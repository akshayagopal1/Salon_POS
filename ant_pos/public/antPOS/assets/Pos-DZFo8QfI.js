const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Open-Shift-D842KrNy.js","assets/index-W9TX4JPH.js","assets/index-DVRVOvho.css","assets/CustomerForm-2IbgNcwZ.js","assets/Held-BWML67yd.js","assets/Return-BKxkI4r_.js","assets/CloseShift-5v09lil1.js","assets/Settings-D_40_l9z.js"])))=>i.map(i=>d[i]);
import{c as I,u as r,s as Yn,w as Y,t as Ft,o as Hn,r as D,a as mt,b as Se,d as de,e as xe,f as G,i as qe,g as j,h as Be,j as Jn,k as Xn,l as nt,m as be,A as we,n as xt,E as wt,p as kt,T as We,F as X,q as ae,v as st,x as Pe,y as Qn,N as ot,z as Z,B as oe,C as zt,D as ne,G as Zn,O as sn,H as Fe,I as eo,J as Ct,P as Lt,K as Je,L as Nt,M as to,_ as ze,Q as R,R as _,S as w,U as M,V as z,W as te,X as ie,Y as B,Z as V,$ as T,a0 as he,a1 as ge,a2 as no,a3 as an,a4 as oo,a5 as lo,a6 as N,a7 as so,a8 as J,a9 as le,aa as L,ab as H,ac as Q,ad as ke,ae as ee,af as rn,ag as Ce,ah as ao,ai as ce,aj as St,ak as Ve,al as ut,am as io,an as ro,ao as dt,ap as Ut,aq as Ge,ar as uo,as as co,at as un,au as fo,av as jt,aw as vt,ax as at,ay as Ye,az as dn,aA as Le,aB as po,aC as cn,aD as mo,aE as vo,aF as ho,aG as go,aH as Ne,aI as fn,aJ as bo,aK as it,aL as yo,aM as pn,aN as _o,aO as Ot,aP as $t,aQ as rt,aR as Oe,aS as xo,aT as ue,aU as wo,aV as lt,aW as tt,aX as Pt,aY as mn,aZ as ko,a_ as Co,a$ as So,b0 as Oo,b1 as $o,b2 as Po,b3 as pe,b4 as Vo,b5 as Eo,b6 as Vt,b7 as Io,b8 as Ao,b9 as Ae}from"./index-W9TX4JPH.js";function Te(e,t,o){let n=o.initialDeps??[],l;function s(){var i,a,d,h;let f;o.key&&((i=o.debug)!=null&&i.call(o))&&(f=Date.now());const u=e();if(!(u.length!==n.length||u.some((v,k)=>n[k]!==v)))return l;n=u;let x;if(o.key&&((a=o.debug)!=null&&a.call(o))&&(x=Date.now()),l=t(...u),o.key&&((d=o.debug)!=null&&d.call(o))){const v=Math.round((Date.now()-f)*100)/100,k=Math.round((Date.now()-x)*100)/100,C=k/16,p=(y,$)=>{for(y=String(y);y.length<$;)y=" "+y;return y};console.info(`%câ± ${p(k,5)} /${p(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*C,120))}deg 100% 31%);`,o==null?void 0:o.key)}return(h=o==null?void 0:o.onChange)==null||h.call(o,l),l}return s.updateDeps=i=>{n=i},s}function qt(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const To=(e,t)=>Math.abs(e-t)<1.01,Ro=(e,t,o)=>{let n;return function(...l){e.clearTimeout(n),n=e.setTimeout(()=>t.apply(this,l),o)}},Kt=e=>{const{offsetWidth:t,offsetHeight:o}=e;return{width:t,height:o}},Mo=e=>e,Do=e=>{const t=Math.max(e.startIndex-e.overscan,0),o=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let l=t;l<=o;l++)n.push(l);return n},Bo=(e,t)=>{const o=e.scrollElement;if(!o)return;const n=e.targetWindow;if(!n)return;const l=i=>{const{width:a,height:d}=i;t({width:Math.round(a),height:Math.round(d)})};if(l(Kt(o)),!n.ResizeObserver)return()=>{};const s=new n.ResizeObserver(i=>{const a=()=>{const d=i[0];if(d!=null&&d.borderBoxSize){const h=d.borderBoxSize[0];if(h){l({width:h.inlineSize,height:h.blockSize});return}}l(Kt(o))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()});return s.observe(o,{box:"border-box"}),()=>{s.unobserve(o)}},Wt={passive:!0},Gt=typeof window>"u"?!0:"onscrollend"in window,Fo=(e,t)=>{const o=e.scrollElement;if(!o)return;const n=e.targetWindow;if(!n)return;let l=0;const s=e.options.useScrollendEvent&&Gt?()=>{}:Ro(n,()=>{t(l,!1)},e.options.isScrollingResetDelay),i=f=>()=>{const{horizontal:u,isRtl:m}=e.options;l=u?o.scrollLeft*(m&&-1||1):o.scrollTop,s(),t(l,f)},a=i(!0),d=i(!1);d(),o.addEventListener("scroll",a,Wt);const h=e.options.useScrollendEvent&&Gt;return h&&o.addEventListener("scrollend",d,Wt),()=>{o.removeEventListener("scroll",a),h&&o.removeEventListener("scrollend",d)}},zo=(e,t,o)=>{if(t!=null&&t.borderBoxSize){const n=t.borderBoxSize[0];if(n)return Math.round(n[o.options.horizontal?"inlineSize":"blockSize"])}return e[o.options.horizontal?"offsetWidth":"offsetHeight"]},Lo=(e,{adjustments:t=0,behavior:o},n)=>{var l,s;const i=e+t;(s=(l=n.scrollElement)==null?void 0:l.scrollTo)==null||s.call(l,{[n.options.horizontal?"left":"top"]:i,behavior:o})};class No{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let o=null;const n=()=>o||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:o=new this.targetWindow.ResizeObserver(l=>{l.forEach(s=>{const i=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var l;(l=n())==null||l.disconnect(),o=null},observe:l=>{var s;return(s=n())==null?void 0:s.observe(l,{box:"border-box"})},unobserve:l=>{var s;return(s=n())==null?void 0:s.unobserve(l)}}})(),this.range=null,this.setOptions=o=>{Object.entries(o).forEach(([n,l])=>{typeof l>"u"&&delete o[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Mo,rangeExtractor:Do,onChange:()=>{},measureElement:zo,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...o}},this.notify=o=>{var n,l;(l=(n=this.options).onChange)==null||l.call(n,this,o)},this.maybeNotify=Te(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),o=>{this.notify(o)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(o=>o()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var o;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((o=this.scrollElement)==null?void 0:o.window)??null,this.elementsCache.forEach(l=>{this.observer.observe(l)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,l=>{this.scrollRect=l,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(l,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<l?"forward":"backward":null,this.scrollOffset=l,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(o,n)=>{const l=new Map,s=new Map;for(let i=n-1;i>=0;i--){const a=o[i];if(l.has(a.lane))continue;const d=s.get(a.lane);if(d==null||a.end>d.end?s.set(a.lane,a):a.end<d.end&&l.set(a.lane,!0),l.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((i,a)=>i.end===a.end?i.index-a.index:i.end-a.end)[0]:void 0},this.getMeasurementOptions=Te(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(o,n,l,s,i)=>(this.pendingMeasuredCacheIndexes=[],{count:o,paddingStart:n,scrollMargin:l,getItemKey:s,enabled:i}),{key:!1}),this.getMeasurements=Te(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:o,paddingStart:n,scrollMargin:l,getItemKey:s,enabled:i},a)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const d=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,d);for(let f=d;f<o;f++){const u=s(f),m=this.options.lanes===1?h[f-1]:this.getFurthestMeasurement(h,f),x=m?m.end+this.options.gap:n+l,v=a.get(u),k=typeof v=="number"?v:this.options.estimateSize(f),C=x+k,p=m?m.lane:f%this.options.lanes;h[f]={index:f,start:x,size:k,end:C,key:u,lane:p}}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Te(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(o,n,l,s)=>this.range=o.length>0&&n>0?Uo({measurements:o,outerSize:n,scrollOffset:l,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Te(()=>{let o=null,n=null;const l=this.calculateRange();return l&&(o=l.startIndex,n=l.endIndex),this.maybeNotify.updateDeps([this.isScrolling,o,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,o,n]},(o,n,l,s,i)=>s===null||i===null?[]:o({startIndex:s,endIndex:i,overscan:n,count:l}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=o=>{const n=this.options.indexAttribute,l=o.getAttribute(n);return l?parseInt(l,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(o,n)=>{const l=this.indexFromElement(o),s=this.measurementsCache[l];if(!s)return;const i=s.key,a=this.elementsCache.get(i);a!==o&&(a&&this.observer.unobserve(a),this.observer.observe(o),this.elementsCache.set(i,o)),o.isConnected&&this.resizeItem(l,this.options.measureElement(o,n,this))},this.resizeItem=(o,n)=>{const l=this.measurementsCache[o];if(!l)return;const s=this.itemSizeCache.get(l.key)??l.size,i=n-s;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(l,i,this):l.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(l.index),this.itemSizeCache=new Map(this.itemSizeCache.set(l.key,n)),this.notify(!1))},this.measureElement=o=>{if(!o){this.elementsCache.forEach((n,l)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(l))});return}this._measureElement(o,void 0)},this.getVirtualItems=Te(()=>[this.getVirtualIndexes(),this.getMeasurements()],(o,n)=>{const l=[];for(let s=0,i=o.length;s<i;s++){const a=o[s],d=n[a];l.push(d)}return l},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=o=>{const n=this.getMeasurements();if(n.length!==0)return qt(n[vn(0,n.length-1,l=>qt(n[l]).start,o)])},this.getOffsetForAlignment=(o,n,l=0)=>{const s=this.getSize(),i=this.getScrollOffset();n==="auto"&&(n=o>=i+s?"end":"start"),n==="center"?o+=(l-s)/2:n==="end"&&(o-=s);const a=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(a,o),0)},this.getOffsetForIndex=(o,n="auto")=>{o=Math.max(0,Math.min(o,this.options.count-1));const l=this.measurementsCache[o];if(!l)return;const s=this.getSize(),i=this.getScrollOffset();if(n==="auto")if(l.end>=i+s-this.options.scrollPaddingEnd)n="end";else if(l.start<=i+this.options.scrollPaddingStart)n="start";else return[i,n];const a=n==="end"?l.end+this.options.scrollPaddingEnd:l.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,n,l.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(o,{align:n="start",behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(o,n),{adjustments:void 0,behavior:l})},this.scrollToIndex=(o,{align:n="auto",behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),o=Math.max(0,Math.min(o,this.options.count-1));let s=0;const i=10,a=h=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(o,h);if(!f){console.warn("Failed to get offset for index:",o);return}const[u,m]=f;this._scrollToOffset(u,{adjustments:void 0,behavior:l}),this.targetWindow.requestAnimationFrame(()=>{const x=this.getScrollOffset(),v=this.getOffsetForIndex(o,m);if(!v){console.warn("Failed to get offset for index:",o);return}To(v[0],x)||d(m)})},d=h=>{this.targetWindow&&(s++,s<i?this.targetWindow.requestAnimationFrame(()=>a(h)):console.warn(`Failed to scroll to index ${o} after ${i} attempts.`))};a(n)},this.scrollBy=(o,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+o,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var o;const n=this.getMeasurements();let l;if(n.length===0)l=this.options.paddingStart;else if(this.options.lanes===1)l=((o=n[n.length-1])==null?void 0:o.end)??0;else{const s=Array(this.options.lanes).fill(null);let i=n.length-1;for(;i>=0&&s.some(a=>a===null);){const a=n[i];s[a.lane]===null&&(s[a.lane]=a.end),i--}l=Math.max(...s.filter(a=>a!==null))}return Math.max(l-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(o,{adjustments:n,behavior:l})=>{this.options.scrollToFn(o,{behavior:l,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const vn=(e,t,o,n)=>{for(;e<=t;){const l=(e+t)/2|0,s=o(l);if(s<n)e=l+1;else if(s>n)t=l-1;else return l}return e>0?e-1:0};function Uo({measurements:e,outerSize:t,scrollOffset:o,lanes:n}){const l=e.length-1,s=d=>e[d].start;if(e.length<=n)return{startIndex:0,endIndex:l};let i=vn(0,l,s,o),a=i;if(n===1)for(;a<l&&e[a].end<o+t;)a++;else if(n>1){const d=Array(n).fill(0);for(;a<l&&d.some(f=>f<o+t);){const f=e[a];d[f.lane]=f.end,a++}const h=Array(n).fill(o+t);for(;i>=0&&h.some(f=>f>=o);){const f=e[i];h[f.lane]=f.start,i--}i=Math.max(0,i-i%n),a=Math.min(l,a+(n-1-a%n))}return{startIndex:i,endIndex:a}}function jo(e){const t=new No(r(e)),o=Yn(t),n=t._didMount();return Y(()=>r(e).getScrollElement(),l=>{l&&t._willUpdate()},{immediate:!0}),Y(()=>r(e),l=>{t.setOptions({...l,onChange:(s,i)=>{var a;Ft(o),(a=l.onChange)==null||a.call(l,s,i)}}),t._willUpdate(),Ft(o)},{immediate:!0}),Hn(n),o}function qo(e){return jo(I(()=>({observeElementRect:Bo,observeElementOffset:Fo,scrollToFn:Lo,...r(e)})))}function Et(e,t,o){let n=D(o==null?void 0:o.value),l=I(()=>e.value!==void 0);return[I(()=>l.value?e.value:n.value),function(s){return l.value||(n.value=s),t==null?void 0:t(s)}]}function Ko(){let e=mt();return Se(()=>e.dispose()),e}function Wo(){let e=Ko();return t=>{e.dispose(),e.nextFrame(t)}}function Yt(e,t){if(e)return e;let o=t??"button";if(typeof o=="string"&&o.toLowerCase()==="button")return"button"}function hn(e,t){let o=D(Yt(e.value.type,e.value.as));return de(()=>{o.value=Yt(e.value.type,e.value.as)}),xe(()=>{var n;o.value||G(t)&&G(t)instanceof HTMLButtonElement&&!((n=G(t))!=null&&n.hasAttribute("type"))&&(o.value="button")}),o}function Ht(e){return[e.screenX,e.screenY]}function Go(){let e=D([-1,-1]);return{wasMoved(t){let o=Ht(t);return e.value[0]===o[0]&&e.value[1]===o[1]?!1:(e.value=o,!0)},update(t){e.value=Ht(t)}}}function gn({container:e,accept:t,walk:o,enabled:n}){xe(()=>{let l=e.value;if(!l||n!==void 0&&!n.value)return;let s=qe(e);if(!s)return;let i=Object.assign(d=>t(d),{acceptNode:t}),a=s.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,i,!1);for(;a.nextNode();)o(a.currentNode)})}var bn=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(bn||{});function Yo(e){throw new Error("Unexpected object: "+e)}var se=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(se||{});function Jt(e,t){let o=t.resolveItems();if(o.length<=0)return null;let n=t.resolveActiveIndex(),l=n??-1;switch(e.focus){case 0:{for(let s=0;s<o.length;++s)if(!t.resolveDisabled(o[s],s,o))return s;return n}case 1:{l===-1&&(l=o.length);for(let s=l-1;s>=0;--s)if(!t.resolveDisabled(o[s],s,o))return s;return n}case 2:{for(let s=l+1;s<o.length;++s)if(!t.resolveDisabled(o[s],s,o))return s;return n}case 3:{for(let s=o.length-1;s>=0;--s)if(!t.resolveDisabled(o[s],s,o))return s;return n}case 4:{for(let s=0;s<o.length;++s)if(t.resolveId(o[s],s,o)===e.id)return s;return n}case 5:return null;default:Yo(e)}}function It(e={},t=null,o=[]){for(let[n,l]of Object.entries(e))_n(o,yn(t,n),l);return o}function yn(e,t){return e?e+"["+t+"]":t}function _n(e,t,o){if(Array.isArray(o))for(let[n,l]of o.entries())_n(e,yn(t,n.toString()),l);else o instanceof Date?e.push([t,o.toISOString()]):typeof o=="boolean"?e.push([t,o?"1":"0"]):typeof o=="string"?e.push([t,o]):typeof o=="number"?e.push([t,`${o}`]):o==null?e.push([t,""]):It(o,t,e)}function xn(e){var t,o;let n=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(n){for(let l of n.elements)if(l!==e&&(l.tagName==="INPUT"&&l.type==="submit"||l.tagName==="BUTTON"&&l.type==="submit"||l.nodeName==="INPUT"&&l.type==="image")){l.click();return}(o=n.requestSubmit)==null||o.call(n)}}var Ho={};function Jo(e,t){return e===t}var Xo=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Xo||{}),Qo=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Qo||{}),Zo=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Zo||{});let wn=Symbol("ComboboxContext");function Ue(e){let t=ne(wn,null);if(t===null){let o=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Ue),o}return t}let kn=Symbol("VirtualContext"),el=j({name:"VirtualProvider",setup(e,{slots:t}){let o=Ue("VirtualProvider"),n=I(()=>{let a=G(o.optionsRef);if(!a)return{start:0,end:0};let d=window.getComputedStyle(a);return{start:parseFloat(d.paddingBlockStart||d.paddingTop),end:parseFloat(d.paddingBlockEnd||d.paddingBottom)}}),l=qo(I(()=>({scrollPaddingStart:n.value.start,scrollPaddingEnd:n.value.end,count:o.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return G(o.optionsRef)},overscan:12}))),s=I(()=>{var a;return(a=o.virtual.value)==null?void 0:a.options}),i=D(0);return Y([s],()=>{i.value+=1}),Fe(kn,o.virtual.value?l:null),()=>[be("div",{style:{position:"relative",width:"100%",height:`${l.value.getTotalSize()}px`},ref:a=>{if(a){if(typeof process<"u"&&Ho.JEST_WORKER_ID!==void 0||o.activationTrigger.value===0)return;o.activeOptionIndex.value!==null&&o.virtual.value.options.length>o.activeOptionIndex.value&&l.value.scrollToIndex(o.activeOptionIndex.value)}}},l.value.getVirtualItems().map(a=>eo(t.default({option:o.virtual.value.options[a.index],open:o.comboboxState.value===0})[0],{key:`${i.value}-${a.index}`,"data-index":a.index,"aria-setsize":o.virtual.value.options.length,"aria-posinset":a.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${a.start}px)`,overflowAnchor:"none"}})))]}}),Cn=j({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:t,attrs:o,emit:n}){let l=D(1),s=D(null),i=D(null),a=D(null),d=D(null),h=D({static:!1,hold:!1}),f=D([]),u=D(null),m=D(2),x=D(!1);function v(S=P=>P){let P=u.value!==null?f.value[u.value]:null,F=S(f.value.slice()),U=F.length>0&&F[0].dataRef.order.value!==null?F.sort((q,re)=>q.dataRef.order.value-re.dataRef.order.value):sn(F,q=>G(q.dataRef.domRef)),K=P?U.indexOf(P):null;return K===-1&&(K=null),{options:U,activeOptionIndex:K}}let k=I(()=>e.multiple?1:0),C=I(()=>e.nullable),[p,y]=Et(I(()=>e.modelValue),S=>n("update:modelValue",S),I(()=>e.defaultValue)),$=I(()=>p.value===void 0?Be(k.value,{1:[],0:void 0}):p.value),g=null,c=null;function O(S){return Be(k.value,{0(){return y==null?void 0:y(S)},1:()=>{let P=ae(E.value.value).slice(),F=ae(S),U=P.findIndex(K=>E.compare(F,ae(K)));return U===-1?P.push(F):P.splice(U,1),y==null?void 0:y(P)}})}let A=I(()=>{});Y([A],([S],[P])=>{if(E.virtual.value&&S&&P&&u.value!==null){let F=S.indexOf(P[u.value]);F!==-1?u.value=F:u.value=null}});let E={comboboxState:l,value:$,mode:k,compare(S,P){if(typeof e.by=="string"){let F=e.by;return(S==null?void 0:S[F])===(P==null?void 0:P[F])}return e.by===null?Jo(S,P):e.by(S,P)},calculateIndex(S){return E.virtual.value?e.by===null?E.virtual.value.options.indexOf(S):E.virtual.value.options.findIndex(P=>E.compare(P,S)):f.value.findIndex(P=>E.compare(P.dataRef.value,S))},defaultValue:I(()=>e.defaultValue),nullable:C,immediate:I(()=>!1),virtual:I(()=>null),inputRef:i,labelRef:s,buttonRef:a,optionsRef:d,disabled:I(()=>e.disabled),options:f,change(S){y(S)},activeOptionIndex:I(()=>{if(x.value&&u.value===null&&(E.virtual.value?E.virtual.value.options.length>0:f.value.length>0)){if(E.virtual.value){let P=E.virtual.value.options.findIndex(F=>{var U;return!((U=E.virtual.value)!=null&&U.disabled(F))});if(P!==-1)return P}let S=f.value.findIndex(P=>!P.dataRef.disabled);if(S!==-1)return S}return u.value}),activationTrigger:m,optionsPropsRef:h,closeCombobox(){x.value=!1,!e.disabled&&l.value!==1&&(l.value=1,u.value=null)},openCombobox(){if(x.value=!0,!e.disabled&&l.value!==0){if(E.value.value){let S=E.calculateIndex(E.value.value);S!==-1&&(u.value=S)}l.value=0}},setActivationTrigger(S){m.value=S},goToOption(S,P,F){x.value=!1,g!==null&&cancelAnimationFrame(g),g=requestAnimationFrame(()=>{if(e.disabled||d.value&&!h.value.static&&l.value===1)return;if(E.virtual.value){u.value=S===se.Specific?P:Jt({focus:S},{resolveItems:()=>E.virtual.value.options,resolveActiveIndex:()=>{var q,re;return(re=(q=E.activeOptionIndex.value)!=null?q:E.virtual.value.options.findIndex(fe=>{var ye;return!((ye=E.virtual.value)!=null&&ye.disabled(fe))}))!=null?re:null},resolveDisabled:q=>E.virtual.value.disabled(q),resolveId(){throw new Error("Function not implemented.")}}),m.value=F??2;return}let U=v();if(U.activeOptionIndex===null){let q=U.options.findIndex(re=>!re.dataRef.disabled);q!==-1&&(U.activeOptionIndex=q)}let K=S===se.Specific?P:Jt({focus:S},{resolveItems:()=>U.options,resolveActiveIndex:()=>U.activeOptionIndex,resolveId:q=>q.id,resolveDisabled:q=>q.dataRef.disabled});u.value=K,m.value=F??2,f.value=U.options})},selectOption(S){let P=f.value.find(U=>U.id===S);if(!P)return;let{dataRef:F}=P;O(F.value)},selectActiveOption(){if(E.activeOptionIndex.value!==null){if(E.virtual.value)O(E.virtual.value.options[E.activeOptionIndex.value]);else{let{dataRef:S}=f.value[E.activeOptionIndex.value];O(S.value)}E.goToOption(se.Specific,E.activeOptionIndex.value)}},registerOption(S,P){let F=st({id:S,dataRef:P});if(E.virtual.value){f.value.push(F);return}c&&cancelAnimationFrame(c);let U=v(K=>(K.push(F),K));u.value===null&&E.isSelected(P.value.value)&&(U.activeOptionIndex=U.options.indexOf(F)),f.value=U.options,u.value=U.activeOptionIndex,m.value=2,U.options.some(K=>!G(K.dataRef.domRef))&&(c=requestAnimationFrame(()=>{let K=v();f.value=K.options,u.value=K.activeOptionIndex}))},unregisterOption(S,P){if(g!==null&&cancelAnimationFrame(g),P&&(x.value=!0),E.virtual.value){f.value=f.value.filter(U=>U.id!==S);return}let F=v(U=>{let K=U.findIndex(q=>q.id===S);return K!==-1&&U.splice(K,1),U});f.value=F.options,u.value=F.activeOptionIndex,m.value=2},isSelected(S){return Be(k.value,{0:()=>E.compare(ae(E.value.value),ae(S)),1:()=>ae(E.value.value).some(P=>E.compare(ae(P),ae(S)))})},isActive(S){return u.value===E.calculateIndex(S)}};Jn([i,a,d],()=>E.closeCombobox(),I(()=>l.value===0)),Fe(wn,E),Xn(I(()=>Be(l.value,{0:nt.Open,1:nt.Closed})));let b=I(()=>{var S;return(S=G(i))==null?void 0:S.closest("form")});return de(()=>{Y([b],()=>{if(!b.value||e.defaultValue===void 0)return;function S(){E.change(e.defaultValue)}return b.value.addEventListener("reset",S),()=>{var P;(P=b.value)==null||P.removeEventListener("reset",S)}},{immediate:!0})}),()=>{var S,P,F;let{name:U,disabled:K,form:q,...re}=e,fe={open:l.value===0,disabled:K,activeIndex:E.activeOptionIndex.value,activeOption:E.activeOptionIndex.value===null?null:E.virtual.value?E.virtual.value.options[(S=E.activeOptionIndex.value)!=null?S:0]:(F=(P=E.options.value[E.activeOptionIndex.value])==null?void 0:P.dataRef.value)!=null?F:null,value:$.value};return be(X,[...U!=null&&$.value!=null?It({[U]:$.value}).map(([ye,Gn])=>be(xt,wt({features:kt.Hidden,key:ye,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:q,disabled:K,name:ye,value:Gn}))):[],we({theirProps:{...o,...We(re,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:fe,slots:t,attrs:o,name:"Combobox"})])}}}),tl=j({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:o,expose:n}){var l;let s=(l=e.id)!=null?l:`headlessui-combobox-button-${Pe()}`,i=Ue("ComboboxButton");n({el:i.buttonRef,$el:i.buttonRef});function a(f){i.disabled.value||(i.comboboxState.value===0?i.closeCombobox():(f.preventDefault(),i.openCombobox()),oe(()=>{var u;return(u=G(i.inputRef))==null?void 0:u.focus({preventScroll:!0})}))}function d(f){switch(f.key){case Z.ArrowDown:f.preventDefault(),f.stopPropagation(),i.comboboxState.value===1&&i.openCombobox(),oe(()=>{var u;return(u=i.inputRef.value)==null?void 0:u.focus({preventScroll:!0})});return;case Z.ArrowUp:f.preventDefault(),f.stopPropagation(),i.comboboxState.value===1&&(i.openCombobox(),oe(()=>{i.value.value||i.goToOption(se.Last)})),oe(()=>{var u;return(u=i.inputRef.value)==null?void 0:u.focus({preventScroll:!0})});return;case Z.Escape:if(i.comboboxState.value!==0)return;f.preventDefault(),i.optionsRef.value&&!i.optionsPropsRef.value.static&&f.stopPropagation(),i.closeCombobox(),oe(()=>{var u;return(u=i.inputRef.value)==null?void 0:u.focus({preventScroll:!0})});return}}let h=hn(I(()=>({as:e.as,type:t.type})),i.buttonRef);return()=>{var f,u;let m={open:i.comboboxState.value===0,disabled:i.disabled.value,value:i.value.value},{...x}=e,v={ref:i.buttonRef,id:s,type:h.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(f=G(i.optionsRef))==null?void 0:f.id,"aria-expanded":i.comboboxState.value===0,"aria-labelledby":i.labelRef.value?[(u=G(i.labelRef))==null?void 0:u.id,s].join(" "):void 0,disabled:i.disabled.value===!0?!0:void 0,onKeydown:d,onClick:a};return we({ourProps:v,theirProps:x,slot:m,attrs:t,slots:o,name:"ComboboxButton"})}}}),Sn=j({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:t,attrs:o,slots:n,expose:l}){var s;let i=(s=e.id)!=null?s:`headlessui-combobox-input-${Pe()}`,a=Ue("ComboboxInput"),d=I(()=>qe(G(a.inputRef))),h={value:!1};l({el:a.inputRef,$el:a.inputRef});function f(){a.change(null);let c=G(a.optionsRef);c&&(c.scrollTop=0),a.goToOption(se.Nothing)}let u=I(()=>{var c;let O=a.value.value;return G(a.inputRef)?typeof e.displayValue<"u"&&O!==void 0?(c=e.displayValue(O))!=null?c:"":typeof O=="string"?O:"":""});de(()=>{Y([u,a.comboboxState,d],([c,O],[A,E])=>{if(h.value)return;let b=G(a.inputRef);b&&((E===0&&O===1||c!==A)&&(b.value=c),requestAnimationFrame(()=>{var S;if(h.value||!b||((S=d.value)==null?void 0:S.activeElement)!==b)return;let{selectionStart:P,selectionEnd:F}=b;Math.abs((F??0)-(P??0))===0&&P===0&&b.setSelectionRange(b.value.length,b.value.length)}))},{immediate:!0}),Y([a.comboboxState],([c],[O])=>{if(c===0&&O===1){if(h.value)return;let A=G(a.inputRef);if(!A)return;let E=A.value,{selectionStart:b,selectionEnd:S,selectionDirection:P}=A;A.value="",A.value=E,P!==null?A.setSelectionRange(b,S,P):A.setSelectionRange(b,S)}})});let m=D(!1);function x(){m.value=!0}function v(){mt().nextFrame(()=>{m.value=!1})}let k=Wo();function C(c){switch(h.value=!0,k(()=>{h.value=!1}),c.key){case Z.Enter:if(h.value=!1,a.comboboxState.value!==0||m.value)return;if(c.preventDefault(),c.stopPropagation(),a.activeOptionIndex.value===null){a.closeCombobox();return}a.selectActiveOption(),a.mode.value===0&&a.closeCombobox();break;case Z.ArrowDown:return h.value=!1,c.preventDefault(),c.stopPropagation(),Be(a.comboboxState.value,{0:()=>a.goToOption(se.Next),1:()=>a.openCombobox()});case Z.ArrowUp:return h.value=!1,c.preventDefault(),c.stopPropagation(),Be(a.comboboxState.value,{0:()=>a.goToOption(se.Previous),1:()=>{a.openCombobox(),oe(()=>{a.value.value||a.goToOption(se.Last)})}});case Z.Home:if(c.shiftKey)break;return h.value=!1,c.preventDefault(),c.stopPropagation(),a.goToOption(se.First);case Z.PageUp:return h.value=!1,c.preventDefault(),c.stopPropagation(),a.goToOption(se.First);case Z.End:if(c.shiftKey)break;return h.value=!1,c.preventDefault(),c.stopPropagation(),a.goToOption(se.Last);case Z.PageDown:return h.value=!1,c.preventDefault(),c.stopPropagation(),a.goToOption(se.Last);case Z.Escape:if(h.value=!1,a.comboboxState.value!==0)return;c.preventDefault(),a.optionsRef.value&&!a.optionsPropsRef.value.static&&c.stopPropagation(),a.nullable.value&&a.mode.value===0&&a.value.value===null&&f(),a.closeCombobox();break;case Z.Tab:if(h.value=!1,a.comboboxState.value!==0)return;a.mode.value===0&&a.activationTrigger.value!==1&&a.selectActiveOption(),a.closeCombobox();break}}function p(c){t("change",c),a.nullable.value&&a.mode.value===0&&c.target.value===""&&f(),a.openCombobox()}function y(c){var O,A,E;let b=(O=c.relatedTarget)!=null?O:zt.find(S=>S!==c.currentTarget);if(h.value=!1,!((A=G(a.optionsRef))!=null&&A.contains(b))&&!((E=G(a.buttonRef))!=null&&E.contains(b))&&a.comboboxState.value===0)return c.preventDefault(),a.mode.value===0&&(a.nullable.value&&a.value.value===null?f():a.activationTrigger.value!==1&&a.selectActiveOption()),a.closeCombobox()}function $(c){var O,A,E;let b=(O=c.relatedTarget)!=null?O:zt.find(S=>S!==c.currentTarget);(A=G(a.buttonRef))!=null&&A.contains(b)||(E=G(a.optionsRef))!=null&&E.contains(b)||a.disabled.value||a.immediate.value&&a.comboboxState.value!==0&&(a.openCombobox(),mt().nextFrame(()=>{a.setActivationTrigger(1)}))}let g=I(()=>{var c,O,A,E;return(E=(A=(O=e.defaultValue)!=null?O:a.defaultValue.value!==void 0?(c=e.displayValue)==null?void 0:c.call(e,a.defaultValue.value):null)!=null?A:a.defaultValue.value)!=null?E:""});return()=>{var c,O,A,E,b,S,P;let F={open:a.comboboxState.value===0},{displayValue:U,onChange:K,...q}=e,re={"aria-controls":(c=a.optionsRef.value)==null?void 0:c.id,"aria-expanded":a.comboboxState.value===0,"aria-activedescendant":a.activeOptionIndex.value===null?void 0:a.virtual.value?(O=a.options.value.find(fe=>!a.virtual.value.disabled(fe.dataRef.value)&&a.compare(fe.dataRef.value,a.virtual.value.options[a.activeOptionIndex.value])))==null?void 0:O.id:(A=a.options.value[a.activeOptionIndex.value])==null?void 0:A.id,"aria-labelledby":(S=(E=G(a.labelRef))==null?void 0:E.id)!=null?S:(b=G(a.buttonRef))==null?void 0:b.id,"aria-autocomplete":"list",id:i,onCompositionstart:x,onCompositionend:v,onKeydown:C,onInput:p,onFocus:$,onBlur:y,role:"combobox",type:(P=o.type)!=null?P:"text",tabIndex:0,ref:a.inputRef,defaultValue:g.value,disabled:a.disabled.value===!0?!0:void 0};return we({ourProps:re,theirProps:q,slot:F,attrs:o,slots:n,features:ot.RenderStrategy|ot.Static,name:"ComboboxInput"})}}}),On=j({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:t,slots:o,expose:n}){let l=Ue("ComboboxOptions"),s=`headlessui-combobox-options-${Pe()}`;n({el:l.optionsRef,$el:l.optionsRef}),xe(()=>{l.optionsPropsRef.value.static=e.static}),xe(()=>{l.optionsPropsRef.value.hold=e.hold});let i=Qn(),a=I(()=>i!==null?(i.value&nt.Open)===nt.Open:l.comboboxState.value===0);gn({container:I(()=>G(l.optionsRef)),enabled:I(()=>l.comboboxState.value===0),accept(h){return h.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:h.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(h){h.setAttribute("role","none")}});function d(h){h.preventDefault()}return()=>{var h,f,u;let m={open:l.comboboxState.value===0},x={"aria-labelledby":(u=(h=G(l.labelRef))==null?void 0:h.id)!=null?u:(f=G(l.buttonRef))==null?void 0:f.id,id:s,ref:l.optionsRef,role:"listbox","aria-multiselectable":l.mode.value===1?!0:void 0,onMousedown:d},v=We(e,["hold"]);return we({ourProps:x,theirProps:v,slot:m,attrs:t,slots:l.virtual.value&&l.comboboxState.value===0?{...o,default:()=>[be(el,{},o.default)]}:o,features:ot.RenderStrategy|ot.Static,visible:a.value,name:"ComboboxOptions"})}}}),$n=j({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:t,attrs:o,expose:n}){let l=Ue("ComboboxOption"),s=`headlessui-combobox-option-${Pe()}`,i=D(null),a=I(()=>e.disabled);n({el:i,$el:i});let d=I(()=>{var y;return l.virtual.value?l.activeOptionIndex.value===l.calculateIndex(e.value):l.activeOptionIndex.value===null?!1:((y=l.options.value[l.activeOptionIndex.value])==null?void 0:y.id)===s}),h=I(()=>l.isSelected(e.value)),f=ne(kn,null),u=I(()=>({disabled:e.disabled,value:e.value,domRef:i,order:I(()=>e.order)}));de(()=>l.registerOption(s,u)),Se(()=>l.unregisterOption(s,d.value)),xe(()=>{let y=G(i);y&&(f==null||f.value.measureElement(y))}),xe(()=>{l.comboboxState.value===0&&d.value&&(l.virtual.value||l.activationTrigger.value!==0&&oe(()=>{var y,$;return($=(y=G(i))==null?void 0:y.scrollIntoView)==null?void 0:$.call(y,{block:"nearest"})}))});function m(y){y.preventDefault(),y.button===bn.Left&&(a.value||(l.selectOption(s),Zn()||requestAnimationFrame(()=>{var $;return($=G(l.inputRef))==null?void 0:$.focus({preventScroll:!0})}),l.mode.value===0&&l.closeCombobox()))}function x(){var y;if(e.disabled||(y=l.virtual.value)!=null&&y.disabled(e.value))return l.goToOption(se.Nothing);let $=l.calculateIndex(e.value);l.goToOption(se.Specific,$)}let v=Go();function k(y){v.update(y)}function C(y){var $;if(!v.wasMoved(y)||e.disabled||($=l.virtual.value)!=null&&$.disabled(e.value)||d.value)return;let g=l.calculateIndex(e.value);l.goToOption(se.Specific,g,0)}function p(y){var $;v.wasMoved(y)&&(e.disabled||($=l.virtual.value)!=null&&$.disabled(e.value)||d.value&&(l.optionsPropsRef.value.hold||l.goToOption(se.Nothing)))}return()=>{let{disabled:y}=e,$={active:d.value,selected:h.value,disabled:y},g={id:s,ref:i,role:"option",tabIndex:y===!0?void 0:-1,"aria-disabled":y===!0?!0:void 0,"aria-selected":h.value,disabled:void 0,onMousedown:m,onFocus:x,onPointerenter:k,onMouseenter:k,onPointermove:C,onMousemove:C,onPointerleave:p,onMouseleave:p},c=We(e,["order","value"]);return we({ourProps:g,theirProps:c,slot:$,attrs:o,slots:t,name:"ComboboxOption"})}}}),Pn=Symbol("LabelContext");function Vn(){let e=ne(Pn,null);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Vn),t}return e}function At({slot:e={},name:t="Label",props:o={}}={}){let n=D([]);function l(s){return n.value.push(s),()=>{let i=n.value.indexOf(s);i!==-1&&n.value.splice(i,1)}}return Fe(Pn,{register:l,slot:e,name:t,props:o}),I(()=>n.value.length>0?n.value.join(" "):void 0)}let En=j({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:o}){var n;let l=(n=e.id)!=null?n:`headlessui-label-${Pe()}`,s=Vn();return de(()=>Se(s.register(l))),()=>{let{name:i="Label",slot:a={},props:d={}}=s,{passive:h,...f}=e,u={...Object.entries(d).reduce((m,[x,v])=>Object.assign(m,{[x]:r(v)}),{}),id:l};return h&&(delete u.onClick,delete u.htmlFor,delete f.onClick),we({ourProps:u,theirProps:f,slot:a,attrs:o,slots:t,name:i})}}});function nl(e,t){return e===t}let In=Symbol("RadioGroupContext");function An(e){let t=ne(In,null);if(t===null){let o=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,An),o}return t}let ol=j({name:"RadioGroup",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"div"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>nl},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{emit:t,attrs:o,slots:n,expose:l}){var s;let i=(s=e.id)!=null?s:`headlessui-radiogroup-${Pe()}`,a=D(null),d=D([]),h=At({name:"RadioGroupLabel"}),f=Ct({name:"RadioGroupDescription"});l({el:a,$el:a});let[u,m]=Et(I(()=>e.modelValue),C=>t("update:modelValue",C),I(()=>e.defaultValue)),x={options:d,value:u,disabled:I(()=>e.disabled),firstOption:I(()=>d.value.find(C=>!C.propsRef.disabled)),containsCheckedOption:I(()=>d.value.some(C=>x.compare(ae(C.propsRef.value),ae(e.modelValue)))),compare(C,p){if(typeof e.by=="string"){let y=e.by;return(C==null?void 0:C[y])===(p==null?void 0:p[y])}return e.by(C,p)},change(C){var p;if(e.disabled||x.compare(ae(u.value),ae(C)))return!1;let y=(p=d.value.find($=>x.compare(ae($.propsRef.value),ae(C))))==null?void 0:p.propsRef;return y!=null&&y.disabled?!1:(m(C),!0)},registerOption(C){d.value.push(C),d.value=sn(d.value,p=>p.element)},unregisterOption(C){let p=d.value.findIndex(y=>y.id===C);p!==-1&&d.value.splice(p,1)}};Fe(In,x),gn({container:I(()=>G(a)),accept(C){return C.getAttribute("role")==="radio"?NodeFilter.FILTER_REJECT:C.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(C){C.setAttribute("role","none")}});function v(C){if(!a.value||!a.value.contains(C.target))return;let p=d.value.filter(y=>y.propsRef.disabled===!1).map(y=>y.element);switch(C.key){case Z.Enter:xn(C.currentTarget);break;case Z.ArrowLeft:case Z.ArrowUp:if(C.preventDefault(),C.stopPropagation(),Lt(p,Je.Previous|Je.WrapAround)===Nt.Success){let y=d.value.find($=>{var g;return $.element===((g=qe(a))==null?void 0:g.activeElement)});y&&x.change(y.propsRef.value)}break;case Z.ArrowRight:case Z.ArrowDown:if(C.preventDefault(),C.stopPropagation(),Lt(p,Je.Next|Je.WrapAround)===Nt.Success){let y=d.value.find($=>{var g;return $.element===((g=qe($.element))==null?void 0:g.activeElement)});y&&x.change(y.propsRef.value)}break;case Z.Space:{C.preventDefault(),C.stopPropagation();let y=d.value.find($=>{var g;return $.element===((g=qe($.element))==null?void 0:g.activeElement)});y&&x.change(y.propsRef.value)}break}}let k=I(()=>{var C;return(C=G(a))==null?void 0:C.closest("form")});return de(()=>{Y([k],()=>{if(!k.value||e.defaultValue===void 0)return;function C(){x.change(e.defaultValue)}return k.value.addEventListener("reset",C),()=>{var p;(p=k.value)==null||p.removeEventListener("reset",C)}},{immediate:!0})}),()=>{let{disabled:C,name:p,form:y,...$}=e,g={ref:a,id:i,role:"radiogroup","aria-labelledby":h.value,"aria-describedby":f.value,onKeydown:v};return be(X,[...p!=null&&u.value!=null?It({[p]:u.value}).map(([c,O])=>be(xt,wt({features:kt.Hidden,key:c,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:y,disabled:C,name:c,value:O}))):[],we({ourProps:g,theirProps:{...o,...We($,["modelValue","defaultValue","by"])},slot:{},attrs:o,slots:n,name:"RadioGroup"})])}}});var ll=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(ll||{});let sl=j({name:"RadioGroupOption",props:{as:{type:[Object,String],default:"div"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{attrs:t,slots:o,expose:n}){var l;let s=(l=e.id)!=null?l:`headlessui-radiogroup-option-${Pe()}`,i=An("RadioGroupOption"),a=At({name:"RadioGroupLabel"}),d=Ct({name:"RadioGroupDescription"}),h=D(null),f=I(()=>({value:e.value,disabled:e.disabled})),u=D(1);n({el:h,$el:h});let m=I(()=>G(h));de(()=>i.registerOption({id:s,element:m,propsRef:f})),Se(()=>i.unregisterOption(s));let x=I(()=>{var g;return((g=i.firstOption.value)==null?void 0:g.id)===s}),v=I(()=>i.disabled.value||e.disabled),k=I(()=>i.compare(ae(i.value.value),ae(e.value))),C=I(()=>v.value?-1:k.value||!i.containsCheckedOption.value&&x.value?0:-1);function p(){var g;i.change(e.value)&&(u.value|=2,(g=G(h))==null||g.focus())}function y(){u.value|=2}function $(){u.value&=-3}return()=>{let{value:g,disabled:c,...O}=e,A={checked:k.value,disabled:v.value,active:!!(u.value&2)},E={id:s,ref:h,role:"radio","aria-checked":k.value?"true":"false","aria-labelledby":a.value,"aria-describedby":d.value,"aria-disabled":v.value?!0:void 0,tabIndex:C.value,onClick:v.value?void 0:p,onFocus:v.value?void 0:y,onBlur:v.value?void 0:$};return we({ourProps:E,theirProps:O,slot:A,attrs:t,slots:o,name:"RadioGroupOption"})}}}),al=En,Tn=Symbol("GroupContext"),il=j({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:o}){let n=D(null),l=At({name:"SwitchLabel",props:{htmlFor:I(()=>{var i;return(i=n.value)==null?void 0:i.id}),onClick(i){n.value&&(i.currentTarget.tagName==="LABEL"&&i.preventDefault(),n.value.click(),n.value.focus({preventScroll:!0}))}}}),s=Ct({name:"SwitchDescription"});return Fe(Tn,{switchRef:n,labelledby:l,describedby:s}),()=>we({theirProps:e,ourProps:{},slot:{},slots:t,attrs:o,name:"SwitchGroup"})}}),rl=j({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:t,attrs:o,slots:n,expose:l}){var s;let i=(s=e.id)!=null?s:`headlessui-switch-${Pe()}`,a=ne(Tn,null),[d,h]=Et(I(()=>e.modelValue),y=>t("update:modelValue",y),I(()=>e.defaultChecked));function f(){h(!d.value)}let u=D(null),m=a===null?u:a.switchRef,x=hn(I(()=>({as:e.as,type:o.type})),m);l({el:m,$el:m});function v(y){y.preventDefault(),f()}function k(y){y.key===Z.Space?(y.preventDefault(),f()):y.key===Z.Enter&&xn(y.currentTarget)}function C(y){y.preventDefault()}let p=I(()=>{var y,$;return($=(y=G(m))==null?void 0:y.closest)==null?void 0:$.call(y,"form")});return de(()=>{Y([p],()=>{if(!p.value||e.defaultChecked===void 0)return;function y(){h(e.defaultChecked)}return p.value.addEventListener("reset",y),()=>{var $;($=p.value)==null||$.removeEventListener("reset",y)}},{immediate:!0})}),()=>{let{name:y,value:$,form:g,tabIndex:c,...O}=e,A={checked:d.value},E={id:i,ref:m,role:"switch",type:x.value,tabIndex:c===-1?0:c,"aria-checked":d.value,"aria-labelledby":a==null?void 0:a.labelledby.value,"aria-describedby":a==null?void 0:a.describedby.value,onClick:v,onKeyup:k,onKeypress:C};return be(X,[y!=null&&d.value!=null?be(xt,wt({features:kt.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:d.value,form:g,disabled:O.disabled,name:y,value:$})):null,we({ourProps:E,theirProps:{...o,...We(O,["modelValue","defaultChecked"])},slot:A,attrs:o,slots:n,name:"Switch"})])}}}),ul=En,dl=to;const cl={name:"Popover",inheritAttrs:!1,props:{show:{default:void 0},trigger:{type:String,default:"click"},hoverDelay:{type:Number,default:0},leaveDelay:{type:Number,default:0},placement:{type:String,default:"bottom-start"},popoverClass:[String,Object,Array],transition:{default:null},hideOnBlur:{default:!0}},emits:["open","close","update:show"],expose:["open","close"],data(){return{popoverContainerClass:"body-container",showPopup:!1,targetWidth:null,pointerOverTargetOrPopup:!1}},watch:{show(e){e?this.open():this.close()}},created(){if(!(typeof window>"u")&&!document.getElementById("frappeui-popper-root")){const e=document.createElement("div");e.id="frappeui-popper-root",document.body.appendChild(e)}},mounted(){this.listener=e=>{const t=e.target,o=this.$refs.reference,n=this.$refs.popover;if(t===o||t===n||(o==null?void 0:o.contains(t))||(n==null?void 0:n.contains(t)))return;if(!document.getElementById("frappeui-popper-root").contains(t))return this.close();const a=`.${this.popoverContainerClass}`,d=t==null?void 0:t.closest(a),h=o==null?void 0:o.closest(a);d&&h&&d===h&&this.close()},this.hideOnBlur&&(document.addEventListener("click",this.listener),document.addEventListener("mousedown",this.listener)),this.$nextTick(()=>{this.targetWidth=this.$refs.target.clientWidth})},beforeDestroy(){this.popper&&this.popper.destroy(),document.removeEventListener("click",this.listener),document.removeEventListener("mousedown",this.listener)},computed:{showPropPassed(){return this.show!=null},isOpen:{get(){return this.showPropPassed?this.show:this.showPopup},set(e){e=!!e,this.showPropPassed?this.$emit("update:show",e):this.showPopup=e,e===!1?this.$emit("close"):e===!0&&this.$emit("open")}},popupTransition(){let e={default:{enterActiveClass:"transition duration-150 ease-out",enterFromClass:"translate-y-1 opacity-0",enterToClass:"translate-y-0 opacity-100",leaveActiveClass:"transition duration-150 ease-in",leaveFromClass:"translate-y-0 opacity-100",leaveToClass:"translate-y-1 opacity-0"}};return typeof this.transition=="string"?e[this.transition]:this.transition}},methods:{setupPopper(){this.popper?this.updatePosition():this.popper=lo(this.$refs.reference,this.$refs.popover,{placement:this.placement})},updatePosition(){this.popper&&this.popper.update()},togglePopover(e){e instanceof Event&&(e=null),e==null&&(e=!this.isOpen),e=!!e,e?this.open():this.close()},open(){this.isOpen=!0,this.$nextTick(()=>this.setupPopper())},close(){this.isOpen=!1},onMouseover(){this.pointerOverTargetOrPopup=!0,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.trigger==="hover"&&(this.hoverDelay?this.hoverTimer=setTimeout(()=>{this.pointerOverTargetOrPopup&&this.open()},Number(this.hoverDelay)*1e3):this.open())},onMouseleave(e){this.pointerOverTargetOrPopup=!1,this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.trigger==="hover"&&(this.leaveTimer&&clearTimeout(this.leaveTimer),this.leaveDelay?this.leaveTimer=setTimeout(()=>{this.pointerOverTargetOrPopup||this.close()},Number(this.leaveDelay)*1e3):this.pointerOverTargetOrPopup||this.close())}}},fl={ref:"reference"},pl={class:"rounded-lg border bg-surface-modal shadow-xl"};function ml(e,t,o,n,l,s){return _(),R("div",fl,[w("div",{ref:"target",class:B(["flex",e.$attrs.class]),onClick:t[0]||(t[0]=(...i)=>s.updatePosition&&s.updatePosition(...i)),onFocusin:t[1]||(t[1]=(...i)=>s.updatePosition&&s.updatePosition(...i)),onKeydown:t[2]||(t[2]=(...i)=>s.updatePosition&&s.updatePosition(...i)),onMouseover:t[3]||(t[3]=(...i)=>s.onMouseover&&s.onMouseover(...i)),onMouseleave:t[4]||(t[4]=(...i)=>s.onMouseleave&&s.onMouseleave(...i))},[z(e.$slots,"target",te(ie({togglePopover:s.togglePopover,updatePosition:s.updatePosition,open:s.open,close:s.close,isOpen:s.isOpen})))],34),(_(),M(oo,{to:"#frappeui-popper-root"},[w("div",{ref:"popover",class:B(["relative z-[100]",[l.popoverContainerClass,o.popoverClass]]),style:an({minWidth:l.targetWidth?l.targetWidth+"px":null}),onMouseover:t[5]||(t[5]=i=>l.pointerOverTargetOrPopup=!0),onMouseleave:t[6]||(t[6]=(...i)=>s.onMouseleave&&s.onMouseleave(...i))},[V(no,te(ie(s.popupTransition)),{default:T(()=>[he(w("div",null,[z(e.$slots,"body",te(ie({togglePopover:s.togglePopover,updatePosition:s.updatePosition,open:s.open,close:s.close,isOpen:s.isOpen})),()=>[w("div",pl,[z(e.$slots,"body-main",te(ie({togglePopover:s.togglePopover,updatePosition:s.updatePosition,open:s.open,close:s.close,isOpen:s.isOpen})))])])],512),[[ge,s.isOpen]])]),_:3},16)],38)]))],512)}const Tt=ze(cl,[["render",ml]]),vl={class:"w-full space-y-1.5"},hl={key:0,class:"block text-xs text-ink-gray-5"},gl=["onClick"],bl={class:"flex items-center overflow-hidden"},yl={key:0,class:"truncate text-base leading-5 text-ink-gray-8"},_l={key:1,class:"text-base leading-5 text-ink-gray-4"},xl={key:0,class:"sticky top-0 z-10 flex items-stretch space-x-1.5 bg-surface-modal py-1.5"},wl={class:"relative w-full"},kl={class:"absolute right-0 inline-flex h-7 w-7 items-center justify-center"},Cl={key:0,class:"sticky top-10 truncate bg-surface-modal px-2.5 py-1.5 text-sm font-medium text-ink-gray-5"},Sl={class:"flex flex-1 gap-2 overflow-hidden items-center"},Ol={key:0,class:"flex flex-shrink-0"},$l={key:1,class:"h-4 w-4"},Pl={class:"flex-1 truncate text-ink-gray-7"},Vl={key:0,class:"ml-2 flex-shrink-0"},El={key:0,class:"text-sm text-ink-gray-5"},Il={key:1,class:"rounded-md px-2.5 py-1.5 text-base text-ink-gray-5"},Al={key:0,class:"border-t p-1"},Tl={key:0,class:"flex items-center justify-end"},Rl={key:1,class:"flex items-center justify-end"},ht=j({__name:"Autocomplete",props:{label:{},options:{},hideSearch:{type:Boolean,default:!1},placeholder:{},bodyClasses:{},loading:{type:Boolean},placement:{},showFooter:{type:Boolean},compareFn:{type:Function,default:(e,t)=>e.value===t.value},maxOptions:{default:50},multiple:{type:Boolean,default:!1},modelValue:{type:[Array,null,String,Number,Boolean,Object]}},emits:["update:modelValue","update:query","change"],setup(e,{expose:t,emit:o}){const n=e,l=o,s=D(),i=D(!1),a=D(""),d=I(()=>{var S;if(!((S=n.options)!=null&&S.length))return[];let b;return O(n.options[0])?b=n.options:b=[{group:"",items:f(n.options),hideLabel:!1}],b.map((P,F)=>({key:F,group:P.group,hideLabel:P.hideLabel,items:u(f(P.items||[]))})).filter(P=>P.items.length>0)}),h=I(()=>d.value.flatMap(b=>b.items)),f=b=>b?b.map(S=>c(S)?S:{label:S.toString(),value:S}):[],u=b=>a.value?b.filter(S=>S.label.toLowerCase().includes(a.value.trim().toLowerCase())||S.value.toString().toLowerCase().includes(a.value.trim().toLowerCase())):b,m=I({get(){if(!n.multiple)return x(n.modelValue)||v(n.modelValue);const b=n.modelValue||[];return c(b[0])?b:b.map(S=>x(S)||v(S))},set(b){if(a.value="",b&&!n.multiple&&(i.value=!1),!n.multiple){l("update:modelValue",b);return}l("update:modelValue",b)}}),x=b=>{if(!b)return b;const S=c(b)?b.value:b;return h.value.find(P=>P.value===S)},v=b=>c(b)?b:{label:b,value:b},k=b=>c(b)?(b==null?void 0:b.label)||(b==null?void 0:b.value):b,C=I(()=>m.value?n.multiple?m.value.map(b=>k(b)).join(", "):k(m.value):""),p=b=>{if(!m.value)return!1;const S=c(b)?b.value:b;return n.multiple?m.value.find(P=>c(P)?P.value===S:P===S):m.value===S},y=I(()=>{var b;return n.multiple?h.value.length===((b=m.value)==null?void 0:b.length):!1}),$=()=>{m.value=h.value},g=()=>{m.value=n.multiple?[]:void 0},c=b=>typeof b=="object",O=b=>typeof b=="object"&&"items"in b&&"group"in b;Y(()=>a.value,()=>{l("update:query",a.value)}),Y(()=>i.value,()=>{i.value&&oe(()=>{var b;return(b=s.value)==null?void 0:b.$el.focus()})});const A=D();return t({rootRef:A,togglePopover:()=>{i.value=!i.value}}),(b,S)=>(_(),M(r(Cn),{modelValue:m.value,"onUpdate:modelValue":S[2]||(S[2]=P=>m.value=P),multiple:b.multiple,nullable:"",by:b.compareFn},{default:T(({open:P})=>[V(r(Tt),{class:"w-full",show:i.value,"onUpdate:show":S[1]||(S[1]=F=>i.value=F),ref_key:"rootRef",ref:A,placement:b.placement},{target:T(({open:F,togglePopover:U,close:K})=>[z(b.$slots,"target",te(ie({open:F,close:K,togglePopover:U,isOpen:P})),()=>[w("div",vl,[n.label?(_(),R("label",hl,L(n.label),1)):N("",!0),w("button",{class:B(["flex h-7 w-full items-center justify-between gap-2 rounded bg-surface-gray-2 px-2 py-1 transition-colors hover:bg-surface-gray-3 border border-transparent focus:border-outline-gray-4 focus:outline-none focus:ring-2 focus:ring-outline-gray-3",{"bg-surface-gray-3":P}]),onClick:()=>U()},[w("div",bl,[z(b.$slots,"prefix"),C.value?(_(),R("span",yl,L(C.value),1)):(_(),R("span",_l,L(b.placeholder||""),1)),z(b.$slots,"suffix")]),V(J,{name:"chevron-down",class:"h-4 w-4 text-ink-gray-5","aria-hidden":"true"})],10,gl)])])]),body:T(({isOpen:F,togglePopover:U})=>[he(w("div",null,[w("div",{class:B(["relative mt-1 rounded-lg bg-surface-modal text-base shadow-2xl",b.bodyClasses])},[V(r(On),{class:B(["max-h-[15rem] overflow-y-auto px-1.5 pb-1.5",{"pt-1.5":b.hideSearch}]),static:""},{default:T(()=>[b.hideSearch?N("",!0):(_(),R("div",xl,[w("div",wl,[V(r(Sn),{ref_key:"searchInput",ref:s,class:"form-input w-full focus:bg-surface-gray-3 hover:bg-surface-gray-4 text-ink-gray-8",type:"text",value:a.value,onChange:S[0]||(S[0]=K=>a.value=K.target.value),autocomplete:"off",placeholder:"Search"},null,8,["value"]),w("div",kl,[n.loading?(_(),M(so,{key:0,class:"h-4 w-4 text-ink-gray-5"})):(_(),R("button",{key:1,onClick:g},[V(J,{name:"x",class:"w-4 text-ink-gray-8"})]))])])])),(_(!0),R(X,null,le(d.value,K=>he((_(),R("div",{key:K.key},[K.group&&!K.hideLabel?(_(),R("div",Cl,L(K.group),1)):N("",!0),(_(!0),R(X,null,le(K.items.slice(0,n.maxOptions),(q,re)=>(_(),M(r($n),{as:"template",key:re,value:q,disabled:q.disabled},{default:T(({active:fe,selected:ye})=>[w("li",{class:B(["flex cursor-pointer items-center justify-between rounded px-2.5 py-1.5 text-base",{"bg-surface-gray-3":fe,"opacity-50":q.disabled}])},[w("div",Sl,[b.$slots["item-prefix"]||n.multiple?(_(),R("div",Ol,[z(b.$slots,"item-prefix",H({ref_for:!0},{active:fe,selected:ye,option:q}),()=>[p(q)?(_(),M(J,{key:0,name:"check",class:"h-4 w-4 text-ink-gray-7"})):(_(),R("div",$l))])])):N("",!0),w("span",Pl,L(k(q)),1)]),b.$slots["item-suffix"]||q!=null&&q.description?(_(),R("div",Vl,[z(b.$slots,"item-suffix",H({ref_for:!0},{active:fe,selected:ye,option:q}),()=>[q!=null&&q.description?(_(),R("div",El,L(q.description),1)):N("",!0)])])):N("",!0)],2)]),_:2},1032,["value","disabled"]))),128))])),[[ge,K.items.length>0]])),128)),d.value.length==0?(_(),R("li",Il," No results found ")):N("",!0)]),_:3},8,["class"]),b.$slots.footer||n.showFooter||b.multiple?(_(),R("div",Al,[z(b.$slots,"footer",te(ie({togglePopover:U})),()=>[b.multiple?(_(),R("div",Tl,[y.value?N("",!0):(_(),M(r(Q),{key:0,label:"Select All",onClick:ke($,["stop"])})),y.value?(_(),M(r(Q),{key:1,label:"Clear All",onClick:ke(g,["stop"])})):N("",!0)])):(_(),R("div",Rl,[V(r(Q),{label:"Clear",onClick:ke(g,["stop"])})]))])])):N("",!0)],2)],512),[[ge,F]])]),_:2},1032,["show","placement"])]),_:3},8,["modelValue","multiple","by"]))}}),Xt=j({__name:"Badge",props:{theme:{default:"gray"},size:{default:"md"},variant:{default:"subtle"},label:{}},setup(e){const t=e,o=I(()=>{let n={gray:"text-ink-white bg-surface-gray-7",blue:"text-ink-blue-1 bg-surface-blue-2",green:"text-ink-green-1 bg-surface-green-3",orange:"text-ink-amber-1 bg-surface-amber-2",red:"text-ink-red-1 bg-surface-red-4"}[t.theme],l={gray:"text-ink-gray-6 bg-surface-gray-2",blue:"text-ink-blue-2 bg-surface-blue-1",green:"text-ink-green-3 bg-surface-green-2",orange:"text-ink-amber-3 bg-surface-amber-1",red:"text-ink-red-4 bg-surface-red-1"}[t.theme],s={gray:"text-ink-gray-6 bg-transparent border border-outline-gray-1",blue:"text-ink-blue-2 bg-transparent border border-outline-blue-1",green:"text-ink-green-3 bg-transparent border border-outline-green-2",orange:"text-ink-amber-3 bg-transparent border border-outline-amber-2",red:"text-ink-red-4 bg-transparent border border-outline-red-2"}[t.theme],i={gray:"text-ink-gray-6 bg-transparent",blue:"text-ink-blue-2 bg-transparent",green:"text-ink-green-3 bg-transparent",orange:"text-ink-amber-3 bg-transparent",red:"text-ink-red-4 bg-transparent"}[t.theme],a={subtle:l,solid:n,outline:s,ghost:i}[t.variant],d={sm:"h-4 text-xs px-1.5",md:"h-5 text-xs px-1.5",lg:"h-6 text-sm px-2"}[t.size];return[a,d]});return(n,l)=>(_(),R("div",{class:B(["inline-flex select-none items-center gap-1 rounded-full",o.value])},[n.$slots.prefix?(_(),R("div",{key:0,class:B([t.size=="lg"?"max-h-6":"max-h-4"])},[z(n.$slots,"prefix")],2)):N("",!0),z(n.$slots,"default",{},()=>{var s;return[ee(L((s=t.label)==null?void 0:s.toString()),1)]}),n.$slots.suffix?(_(),R("div",{key:1,class:B([t.size=="lg"?"max-h-6":"max-h-4"])},[z(n.$slots,"suffix")],2)):N("",!0)],2))}});function Rt(e){const t=rn({dir:D("ltr")});return I(()=>{var o;return(e==null?void 0:e.value)||((o=t.dir)==null?void 0:o.value)||"ltr"})}const Ml=["INPUT","TEXTAREA"];function Dl(e,t,o,n={}){if(!t||n.enableIgnoredElement&&Ml.includes(t.nodeName))return null;const{arrowKeyOptions:l="both",attributeName:s="[data-reka-collection-item]",itemsArray:i=[],loop:a=!0,dir:d="ltr",preventScroll:h=!0,focus:f=!1}=n,[u,m,x,v,k,C]=[e.key==="ArrowRight",e.key==="ArrowLeft",e.key==="ArrowUp",e.key==="ArrowDown",e.key==="Home",e.key==="End"],p=x||v,y=u||m;if(!k&&!C&&(!p&&!y||l==="vertical"&&y||l==="horizontal"&&p))return null;const $=o?Array.from(o.querySelectorAll(s)):i;if(!$.length)return null;h&&e.preventDefault();let g=null;return y||p?g=Rn($,t,{goForward:p?v:d==="ltr"?u:m,loop:a}):k?g=$.at(0)||null:C&&(g=$.at(-1)||null),f&&(g==null||g.focus()),g}function Rn(e,t,o,n=e.length){if(--n===0)return null;const l=e.indexOf(t),s=o.goForward?l+1:l-1;if(!o.loop&&(s<0||s>=e.length))return null;const i=(s+e.length)%e.length,a=e[i];return a?a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false"?Rn(e,a,o,n):a:null}const Bl="menu.itemSelect",gt=["Enter"," "],Fl=["ArrowDown","PageUp","Home"],Mn=["ArrowUp","PageDown","End"],zl=[...Fl,...Mn],Ll={ltr:[...gt,"ArrowRight"],rtl:[...gt,"ArrowLeft"]},Nl={ltr:["ArrowLeft"],rtl:["ArrowRight"]};function Dn(e){return e?"open":"closed"}function Ul(e){const t=Ce();for(const o of e)if(o===t||(o.focus(),Ce()!==t))return}function jl(e,t){const{x:o,y:n}=e;let l=!1;for(let s=0,i=t.length-1;s<t.length;i=s++){const a=t[s].x,d=t[s].y,h=t[i].x,f=t[i].y;d>n!=f>n&&o<(h-a)*(n-d)/(f-d)+a&&(l=!l)}return l}function ql(e,t){if(!t)return!1;const o={x:e.clientX,y:e.clientY};return jl(o,t)}function Ke(e){return e.pointerType==="mouse"}const Kl=ao(()=>D([]));function Wl(){const e=Kl();return{add(t){const o=e.value[0];t!==o&&(o==null||o.pause()),e.value=Qt(e.value,t),e.value.unshift(t)},remove(t){var o;e.value=Qt(e.value,t),(o=e.value[0])==null||o.resume()}}}function Qt(e,t){const o=[...e],n=o.indexOf(t);return n!==-1&&o.splice(n,1),o}function Gl(e){return e.filter(t=>t.tagName!=="A")}const Yl=j({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const o=e,n=t,{currentRef:l,currentElement:s}=ce(),i=D(null),a=Wl(),d=st({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});xe(f=>{if(!St)return;const u=s.value;if(!o.trapped)return;function m(C){if(d.paused||!u)return;const p=C.target;u.contains(p)?i.value=p:Ve(i.value,{select:!0})}function x(C){if(d.paused||!u)return;const p=C.relatedTarget;p!==null&&(u.contains(p)||Ve(i.value,{select:!0}))}function v(C){u.contains(i.value)||Ve(u)}document.addEventListener("focusin",m),document.addEventListener("focusout",x);const k=new MutationObserver(v);u&&k.observe(u,{childList:!0,subtree:!0}),f(()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",x),k.disconnect()})}),xe(async f=>{const u=s.value;if(await oe(),!u)return;a.add(d);const m=Ce();if(!u.contains(m)){const v=new CustomEvent(ut,Ut);u.addEventListener(ut,k=>n("mountAutoFocus",k)),u.dispatchEvent(v),v.defaultPrevented||(io(Gl(ro(u)),{select:!0}),Ce()===m&&Ve(u))}f(()=>{u.removeEventListener(ut,C=>n("mountAutoFocus",C));const v=new CustomEvent(dt,Ut),k=C=>{n("unmountAutoFocus",C)};u.addEventListener(dt,k),u.dispatchEvent(v),setTimeout(()=>{v.defaultPrevented||Ve(m??document.body,{select:!0}),u.removeEventListener(dt,k),a.remove(d)},0)})});function h(f){if(!o.loop&&!o.trapped||d.paused)return;const u=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,m=Ce();if(u&&m){const x=f.currentTarget,[v,k]=uo(x);v&&k?!f.shiftKey&&m===k?(f.preventDefault(),o.loop&&Ve(v,{select:!0})):f.shiftKey&&m===v&&(f.preventDefault(),o.loop&&Ve(k,{select:!0})):m===x&&f.preventDefault()}}return(f,u)=>(_(),M(r(Ge),{ref_key:"currentRef",ref:l,tabindex:"-1","as-child":f.asChild,as:f.as,onKeydown:h},{default:T(()=>[z(f.$slots,"default")]),_:3},8,["as-child","as"]))}});var Hl=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Re=new WeakMap,Xe=new WeakMap,Qe={},ct=0,Bn=function(e){return e&&(e.host||Bn(e.parentNode))},Jl=function(e,t){return t.map(function(o){if(e.contains(o))return o;var n=Bn(o);return n&&e.contains(n)?n:(console.error("aria-hidden",o,"in not contained inside",e,". Doing nothing"),null)}).filter(function(o){return!!o})},Xl=function(e,t,o,n){var l=Jl(t,Array.isArray(e)?e:[e]);Qe[o]||(Qe[o]=new WeakMap);var s=Qe[o],i=[],a=new Set,d=new Set(l),h=function(u){!u||a.has(u)||(a.add(u),h(u.parentNode))};l.forEach(h);var f=function(u){!u||d.has(u)||Array.prototype.forEach.call(u.children,function(m){if(a.has(m))f(m);else try{var x=m.getAttribute(n),v=x!==null&&x!=="false",k=(Re.get(m)||0)+1,C=(s.get(m)||0)+1;Re.set(m,k),s.set(m,C),i.push(m),k===1&&v&&Xe.set(m,!0),C===1&&m.setAttribute(o,"true"),v||m.setAttribute(n,"true")}catch(p){console.error("aria-hidden: cannot operate on ",m,p)}})};return f(t),a.clear(),ct++,function(){i.forEach(function(u){var m=Re.get(u)-1,x=s.get(u)-1;Re.set(u,m),s.set(u,x),m||(Xe.has(u)||u.removeAttribute(n),Xe.delete(u)),x||u.removeAttribute(o)}),ct--,ct||(Re=new WeakMap,Re=new WeakMap,Xe=new WeakMap,Qe={})}},Ql=function(e,t,o){o===void 0&&(o="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),l=Hl(e);return l?(n.push.apply(n,Array.from(l.querySelectorAll("[aria-live], script"))),Xl(n,l,o,"aria-hidden")):function(){return null}};function Zl(e){let t;Y(()=>co(e),o=>{o?t=Ql(o):t&&t()}),Se(()=>{t&&t()})}function ft(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function bt(e,t,o=".",n){if(!ft(t))return bt(e,{},o,n);const l=Object.assign({},t);for(const s in e){if(s==="__proto__"||s==="constructor")continue;const i=e[s];i!=null&&(n&&n(l,s,i,o)||(Array.isArray(i)&&Array.isArray(l[s])?l[s]=[...i,...l[s]]:ft(i)&&ft(l[s])?l[s]=bt(i,l[s],(o?`${o}.`:"")+s.toString(),n):l[s]=i))}return l}function es(e){return(...t)=>t.reduce((o,n)=>bt(o,n,"",e),{})}const ts=es(),ns=un(()=>{const e=D(new Map),t=D(),o=I(()=>{for(const i of e.value.values())if(i)return!0;return!1}),n=rn({scrollBody:D(!0)});let l=null;const s=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",jt&&(l==null||l()),t.value=void 0};return Y(o,(i,a)=>{var u;if(!St)return;if(!i){a&&s();return}t.value===void 0&&(t.value=document.body.style.overflow);const d=window.innerWidth-document.documentElement.clientWidth,h={padding:d,margin:0},f=(u=n.scrollBody)!=null&&u.value?typeof n.scrollBody.value=="object"?ts({padding:n.scrollBody.value.padding===!0?d:n.scrollBody.value.padding,margin:n.scrollBody.value.margin===!0?d:n.scrollBody.value.margin},h):h:{padding:0,margin:0};d>0&&(document.body.style.paddingRight=typeof f.padding=="number"?`${f.padding}px`:String(f.padding),document.body.style.marginRight=typeof f.margin=="number"?`${f.margin}px`:String(f.margin),document.documentElement.style.setProperty("--scrollbar-width",`${d}px`),document.body.style.overflow="hidden"),jt&&(l=vt(document,"touchmove",m=>ls(m),{passive:!1})),oe(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function os(e){const t=Math.random().toString(36).substring(2,7),o=ns();o.value.set(t,e??!1);const n=I({get:()=>o.value.get(t)??!1,set:l=>o.value.set(t,l)});return fo(()=>{o.value.delete(t)}),n}function Fn(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!(o instanceof Element)||o.tagName==="BODY"?!1:Fn(o)}}function ls(e){const t=e||window.event,o=t.target;return o instanceof Element&&Fn(o)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}const ss="rovingFocusGroup.onEntryFocus",as={bubbles:!1,cancelable:!0};function is(e,t=!1){const o=Ce();for(const n of e)if(n===o||(n.focus({preventScroll:t}),Ce()!==o))return}const[qr,rs]=Le("RovingFocusGroup"),us=j({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(e,{expose:t,emit:o}){const n=e,l=o,{loop:s,orientation:i,dir:a}=at(n),d=Rt(a),h=Ye(n,"currentTabStopId",l,{defaultValue:n.defaultCurrentTabStopId,passive:n.currentTabStopId===void 0}),f=D(!1),u=D(!1),m=D(0),{getItems:x,CollectionSlot:v}=dn({isProvider:!0});function k(p){const y=!u.value;if(p.currentTarget&&p.target===p.currentTarget&&y&&!f.value){const $=new CustomEvent(ss,as);if(p.currentTarget.dispatchEvent($),l("entryFocus",$),!$.defaultPrevented){const g=x().map(E=>E.ref).filter(E=>E.dataset.disabled!==""),c=g.find(E=>E.getAttribute("data-active")===""),O=g.find(E=>E.id===h.value),A=[c,O,...g].filter(Boolean);is(A,n.preventScrollOnEntryFocus)}}u.value=!1}function C(){setTimeout(()=>{u.value=!1},1)}return t({getItems:x}),rs({loop:s,dir:d,orientation:i,currentTabStopId:h,onItemFocus:p=>{h.value=p},onItemShiftTab:()=>{f.value=!0},onFocusableItemAdd:()=>{m.value++},onFocusableItemRemove:()=>{m.value--}}),(p,y)=>(_(),M(r(v),null,{default:T(()=>[V(r(Ge),{tabindex:f.value||m.value===0?-1:0,"data-orientation":r(i),as:p.as,"as-child":p.asChild,dir:r(d),style:{outline:"none"},onMousedown:y[0]||(y[0]=$=>u.value=!0),onMouseup:C,onFocus:k,onBlur:y[1]||(y[1]=$=>f.value=!1)},{default:T(()=>[z(p.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}});function ds(e){const t=po("",1e3);return{search:t,handleTypeaheadSearch:(l,s)=>{t.value=t.value+l;{const i=Ce(),a=s.map(m=>{var x,v;return{...m,textValue:((x=m.value)==null?void 0:x.textValue)??((v=m.ref.textContent)==null?void 0:v.trim())??""}}),d=a.find(m=>m.ref===i),h=a.map(m=>m.textValue),f=fs(h,t.value,d==null?void 0:d.textValue),u=a.find(m=>m.textValue===f);return u&&u.ref.focus(),u==null?void 0:u.ref}},resetTypeahead:()=>{t.value=""}}}function cs(e,t){return e.map((o,n)=>e[(t+n)%e.length])}function fs(e,t,o){const l=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,s=o?e.indexOf(o):-1;let i=cs(e,Math.max(s,0));l.length===1&&(i=i.filter(h=>h!==o));const d=i.find(h=>h.toLowerCase().startsWith(l.toLowerCase()));return d!==o?d:void 0}function ps(){const e=D(!1);return de(()=>{vt("keydown",()=>{e.value=!0},{capture:!0,passive:!0}),vt(["pointerdown","pointermove"],()=>{e.value=!1},{capture:!0,passive:!0})}),e}const ms=un(ps),[Ie,zn]=Le(["MenuRoot","MenuSub"],"MenuContext"),[He,vs]=Le("MenuRoot"),hs=j({__name:"MenuRoot",props:{open:{type:Boolean,default:!1},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(e,{emit:t}){const o=e,n=t,{modal:l,dir:s}=at(o),i=Rt(s),a=Ye(o,"open",n),d=D(),h=ms();return zn({open:a,onOpenChange:f=>{a.value=f},content:d,onContentChange:f=>{d.value=f}}),vs({onClose:()=>{a.value=!1},isUsingKeyboardRef:h,dir:i,modal:l}),(f,u)=>(_(),M(r(cn),null,{default:T(()=>[z(f.$slots,"default")]),_:3}))}});let pt=0;function gs(){xe(e=>{if(!St)return;const t=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",t[0]??Zt()),document.body.insertAdjacentElement("beforeend",t[1]??Zt()),pt++,e(()=>{pt===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(o=>o.remove()),pt--})})}function Zt(){const e=document.createElement("span");return e.setAttribute("data-reka-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}const[Mt,bs]=Le("MenuContent"),Dt=j({__name:"MenuContentImpl",props:mo({loop:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},disableOutsideScroll:{type:Boolean},trapFocus:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},{...go}),emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus","dismiss"],setup(e,{emit:t}){const o=e,n=t,l=Ie(),s=He(),{trapFocus:i,disableOutsidePointerEvents:a,loop:d}=at(o);gs(),os(a.value);const h=D(""),f=D(0),u=D(0),m=D(null),x=D("right"),v=D(0),k=D(null),C=D(),{forwardRef:p,currentElement:y}=ce(),{handleTypeaheadSearch:$}=ds();Y(y,b=>{l.onContentChange(b)}),Se(()=>{window.clearTimeout(f.value)});function g(b){var P,F;return x.value===((P=m.value)==null?void 0:P.side)&&ql(b,(F=m.value)==null?void 0:F.area)}async function c(b){var S;n("openAutoFocus",b),!b.defaultPrevented&&(b.preventDefault(),(S=y.value)==null||S.focus({preventScroll:!0}))}function O(b){var fe;if(b.defaultPrevented)return;const P=b.target.closest("[data-reka-menu-content]")===b.currentTarget,F=b.ctrlKey||b.altKey||b.metaKey,U=b.key.length===1,K=Dl(b,Ce(),y.value,{loop:d.value,arrowKeyOptions:"vertical",dir:s==null?void 0:s.dir.value,focus:!0,attributeName:"[data-reka-collection-item]:not([data-disabled])"});if(K)return K==null?void 0:K.focus();if(b.code==="Space")return;const q=((fe=C.value)==null?void 0:fe.getItems())??[];if(P&&(b.key==="Tab"&&b.preventDefault(),!F&&U&&$(b.key,q)),b.target!==y.value||!zl.includes(b.key))return;b.preventDefault();const re=[...q.map(ye=>ye.ref)];Mn.includes(b.key)&&re.reverse(),Ul(re)}function A(b){var S,P;(P=(S=b==null?void 0:b.currentTarget)==null?void 0:S.contains)!=null&&P.call(S,b.target)||(window.clearTimeout(f.value),h.value="")}function E(b){var F;if(!Ke(b))return;const S=b.target,P=v.value!==b.clientX;if((F=b==null?void 0:b.currentTarget)!=null&&F.contains(S)&&P){const U=b.clientX>v.value?"right":"left";x.value=U,v.value=b.clientX}}return bs({onItemEnter:b=>!!g(b),onItemLeave:b=>{var S;g(b)||((S=y.value)==null||S.focus(),k.value=null)},onTriggerLeave:b=>!!g(b),searchRef:h,pointerGraceTimerRef:u,onPointerGraceIntentChange:b=>{m.value=b}}),(b,S)=>(_(),M(r(Yl),{"as-child":"",trapped:r(i),onMountAutoFocus:c,onUnmountAutoFocus:S[7]||(S[7]=P=>n("closeAutoFocus",P))},{default:T(()=>[V(r(vo),{"as-child":"","disable-outside-pointer-events":r(a),onEscapeKeyDown:S[2]||(S[2]=P=>n("escapeKeyDown",P)),onPointerDownOutside:S[3]||(S[3]=P=>n("pointerDownOutside",P)),onFocusOutside:S[4]||(S[4]=P=>n("focusOutside",P)),onInteractOutside:S[5]||(S[5]=P=>n("interactOutside",P)),onDismiss:S[6]||(S[6]=P=>n("dismiss"))},{default:T(()=>[V(r(us),{ref_key:"rovingFocusGroupRef",ref:C,"current-tab-stop-id":k.value,"onUpdate:currentTabStopId":S[0]||(S[0]=P=>k.value=P),"as-child":"",orientation:"vertical",dir:r(s).dir.value,loop:r(d),onEntryFocus:S[1]||(S[1]=P=>{n("entryFocus",P),r(s).isUsingKeyboardRef.value||P.preventDefault()})},{default:T(()=>[V(r(ho),{ref:r(p),role:"menu",as:b.as,"as-child":b.asChild,"aria-orientation":"vertical","data-reka-menu-content":"","data-state":r(Dn)(r(l).open.value),dir:r(s).dir.value,side:b.side,"side-offset":b.sideOffset,align:b.align,"align-offset":b.alignOffset,"avoid-collisions":b.avoidCollisions,"collision-boundary":b.collisionBoundary,"collision-padding":b.collisionPadding,"arrow-padding":b.arrowPadding,"prioritize-position":b.prioritizePosition,"position-strategy":b.positionStrategy,"update-position-strategy":b.updatePositionStrategy,sticky:b.sticky,"hide-when-detached":b.hideWhenDetached,reference:b.reference,onKeydown:O,onBlur:A,onPointermove:E},{default:T(()=>[z(b.$slots,"default")]),_:3},8,["as","as-child","data-state","dir","side","side-offset","align","align-offset","avoid-collisions","collision-boundary","collision-padding","arrow-padding","prioritize-position","position-strategy","update-position-strategy","sticky","hide-when-detached","reference"])]),_:3},8,["current-tab-stop-id","dir","loop"])]),_:3},8,["disable-outside-pointer-events"])]),_:3},8,["trapped"]))}}),Ln=j({inheritAttrs:!1,__name:"MenuItemImpl",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(e){const t=e,o=Mt(),{forwardRef:n}=ce(),{CollectionItem:l}=dn(),s=D(!1);async function i(d){if(!d.defaultPrevented&&Ke(d)){if(t.disabled)o.onItemLeave(d);else if(!o.onItemEnter(d)){const f=d.currentTarget;f==null||f.focus({preventScroll:!0})}}}async function a(d){await oe(),!d.defaultPrevented&&Ke(d)&&o.onItemLeave(d)}return(d,h)=>(_(),M(r(l),{value:{textValue:d.textValue}},{default:T(()=>[V(r(Ge),H({ref:r(n),role:"menuitem",tabindex:"-1"},d.$attrs,{as:d.as,"as-child":d.asChild,"aria-disabled":d.disabled||void 0,"data-disabled":d.disabled?"":void 0,"data-highlighted":s.value?"":void 0,onPointermove:i,onPointerleave:a,onFocus:h[0]||(h[0]=async f=>{await oe(),!(f.defaultPrevented||d.disabled)&&(s.value=!0)}),onBlur:h[1]||(h[1]=async f=>{await oe(),!f.defaultPrevented&&(s.value=!1)})}),{default:T(()=>[z(d.$slots,"default")]),_:3},16,["as","as-child","aria-disabled","data-disabled","data-highlighted"])]),_:3},8,["value"]))}}),ys=j({__name:"MenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(e,{emit:t}){const o=e,n=t,{forwardRef:l,currentElement:s}=ce(),i=He(),a=Mt(),d=D(!1);async function h(){const f=s.value;if(!o.disabled&&f){const u=new CustomEvent(Bl,{bubbles:!0,cancelable:!0});n("select",u),await oe(),u.defaultPrevented?d.value=!1:i.onClose()}}return(f,u)=>(_(),M(Ln,H(o,{ref:r(l),onClick:h,onPointerdown:u[0]||(u[0]=()=>{d.value=!0}),onPointerup:u[1]||(u[1]=async m=>{var x;await oe(),!m.defaultPrevented&&(d.value||(x=m.currentTarget)==null||x.click())}),onKeydown:u[2]||(u[2]=async m=>{const x=r(a).searchRef.value!=="";f.disabled||x&&m.key===" "||r(gt).includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})}),{default:T(()=>[z(f.$slots,"default")]),_:3},16))}}),_s=j({__name:"MenuRootContentModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const o=e,n=t,l=Ne(o,n),s=Ie(),{forwardRef:i,currentElement:a}=ce();return Zl(a),(d,h)=>(_(),M(Dt,H(r(l),{ref:r(i),"trap-focus":r(s).open.value,"disable-outside-pointer-events":r(s).open.value,"disable-outside-scroll":!0,onDismiss:h[0]||(h[0]=f=>r(s).onOpenChange(!1)),onFocusOutside:h[1]||(h[1]=ke(f=>n("focusOutside",f),["prevent"]))}),{default:T(()=>[z(d.$slots,"default")]),_:3},16,["trap-focus","disable-outside-pointer-events"]))}}),xs=j({__name:"MenuRootContentNonModal",props:{loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const l=Ne(e,t),s=Ie();return(i,a)=>(_(),M(Dt,H(r(l),{"trap-focus":!1,"disable-outside-pointer-events":!1,"disable-outside-scroll":!1,onDismiss:a[0]||(a[0]=d=>r(s).onOpenChange(!1))}),{default:T(()=>[z(i.$slots,"default")]),_:3},16))}}),ws=j({__name:"MenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const l=Ne(e,t),s=Ie(),i=He();return(a,d)=>(_(),M(r(fn),{present:a.forceMount||r(s).open.value},{default:T(()=>[r(i).modal.value?(_(),M(_s,te(H({key:0},{...a.$attrs,...r(l)})),{default:T(()=>[z(a.$slots,"default")]),_:3},16)):(_(),M(xs,te(H({key:1},{...a.$attrs,...r(l)})),{default:T(()=>[z(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),ks=j({__name:"MenuLabel",props:{asChild:{type:Boolean},as:{default:"div"}},setup(e){const t=e;return(o,n)=>(_(),M(r(Ge),te(ie(t)),{default:T(()=>[z(o.$slots,"default")]),_:3},16))}}),Cs=j({__name:"MenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=e;return(o,n)=>(_(),M(r(bo),te(ie(t)),{default:T(()=>[z(o.$slots,"default")]),_:3},16))}}),[Nn,Ss]=Le("MenuSub"),Os=j({__name:"MenuSub",props:{open:{type:Boolean,default:void 0}},emits:["update:open"],setup(e,{emit:t}){const o=e,l=Ye(o,"open",t,{defaultValue:!1,passive:o.open===void 0}),s=Ie(),i=D(),a=D();return xe(d=>{(s==null?void 0:s.open.value)===!1&&(l.value=!1),d(()=>l.value=!1)}),zn({open:l,onOpenChange:d=>{l.value=d},content:a,onContentChange:d=>{a.value=d}}),Ss({triggerId:"",contentId:"",trigger:i,onTriggerChange:d=>{i.value=d}}),(d,h)=>(_(),M(r(cn),null,{default:T(()=>[z(d.$slots,"default")]),_:3}))}}),$s=j({__name:"MenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean,default:!0},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const l=Ne(e,t),s=Ie(),i=He(),a=Nn(),{forwardRef:d,currentElement:h}=ce();return a.contentId||(a.contentId=it(void 0,"reka-menu-sub-content")),(f,u)=>(_(),M(r(fn),{present:f.forceMount||r(s).open.value},{default:T(()=>[V(Dt,H(r(l),{id:r(a).contentId,ref:r(d),"aria-labelledby":r(a).triggerId,align:"start",side:r(i).dir.value==="rtl"?"left":"right","disable-outside-pointer-events":!1,"disable-outside-scroll":!1,"trap-focus":!1,onOpenAutoFocus:u[0]||(u[0]=ke(m=>{var x;r(i).isUsingKeyboardRef.value&&((x=r(h))==null||x.focus())},["prevent"])),onCloseAutoFocus:u[1]||(u[1]=ke(()=>{},["prevent"])),onFocusOutside:u[2]||(u[2]=m=>{m.defaultPrevented||m.target!==r(a).trigger.value&&r(s).onOpenChange(!1)}),onEscapeKeyDown:u[3]||(u[3]=m=>{r(i).onClose(),m.preventDefault()}),onKeydown:u[4]||(u[4]=m=>{var k,C;const x=(k=m.currentTarget)==null?void 0:k.contains(m.target),v=r(Nl)[r(i).dir.value].includes(m.key);x&&v&&(r(s).onOpenChange(!1),(C=r(a).trigger.value)==null||C.focus(),m.preventDefault())})}),{default:T(()=>[z(f.$slots,"default")]),_:3},16,["id","aria-labelledby","side"])]),_:3},8,["present"]))}}),Un=j({__name:"MenuAnchor",props:{reference:{},asChild:{type:Boolean},as:{}},setup(e){const t=e;return(o,n)=>(_(),M(r(yo),te(ie(t)),{default:T(()=>[z(o.$slots,"default")]),_:3},16))}}),Ps=j({__name:"MenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(e){const t=e,o=Ie(),n=He(),l=Nn(),s=Mt(),i=D(null);l.triggerId||(l.triggerId=it(void 0,"reka-menu-sub-trigger"));function a(){i.value&&window.clearTimeout(i.value),i.value=null}Se(()=>{a()});function d(u){!Ke(u)||s.onItemEnter(u)||!t.disabled&&!o.open.value&&!i.value&&(s.onPointerGraceIntentChange(null),i.value=window.setTimeout(()=>{o.onOpenChange(!0),a()},100))}async function h(u){var x,v;if(!Ke(u))return;a();const m=(x=o.content.value)==null?void 0:x.getBoundingClientRect();if(m!=null&&m.width){const k=(v=o.content.value)==null?void 0:v.dataset.side,C=k==="right",p=C?-5:5,y=m[C?"left":"right"],$=m[C?"right":"left"];s.onPointerGraceIntentChange({area:[{x:u.clientX+p,y:u.clientY},{x:y,y:m.top},{x:$,y:m.top},{x:$,y:m.bottom},{x:y,y:m.bottom}],side:k}),window.clearTimeout(s.pointerGraceTimerRef.value),s.pointerGraceTimerRef.value=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(u))return;s.onPointerGraceIntentChange(null)}}async function f(u){var x;const m=s.searchRef.value!=="";t.disabled||m&&u.key===" "||Ll[n.dir.value].includes(u.key)&&(o.onOpenChange(!0),await oe(),(x=o.content.value)==null||x.focus(),u.preventDefault())}return(u,m)=>(_(),M(Un,{"as-child":""},{default:T(()=>[V(Ln,H(t,{id:r(l).triggerId,ref:x=>{var v;(v=r(l))==null||v.onTriggerChange(x==null?void 0:x.$el)},"aria-haspopup":"menu","aria-expanded":r(o).open.value,"aria-controls":r(l).contentId,"data-state":r(Dn)(r(o).open.value),onClick:m[0]||(m[0]=async x=>{t.disabled||x.defaultPrevented||(x.currentTarget.focus(),r(o).open.value||r(o).onOpenChange(!0))}),onPointermove:d,onPointerleave:h,onKeydown:f}),{default:T(()=>[z(u.$slots,"default")]),_:3},16,["id","aria-expanded","aria-controls","data-state"])]),_:3}))}}),[jn,Vs]=Le("DropdownMenuRoot"),Es=j({__name:"DropdownMenuRoot",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0},dir:{},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(e,{emit:t}){const o=e,n=t;ce();const l=Ye(o,"open",n,{defaultValue:o.defaultOpen,passive:o.open===void 0}),s=D(),{modal:i,dir:a}=at(o),d=Rt(a);return Vs({open:l,onOpenChange:h=>{l.value=h},onOpenToggle:()=>{l.value=!l.value},triggerId:"",triggerElement:s,contentId:"",modal:i,dir:d}),(h,f)=>(_(),M(r(hs),{open:r(l),"onUpdate:open":f[0]||(f[0]=u=>pn(l)?l.value=u:null),dir:r(d),modal:r(i)},{default:T(()=>[z(h.$slots,"default",{open:r(l)})]),_:3},8,["open","dir","modal"]))}}),Is=j({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(e,{emit:t}){const l=Ne(e,t);ce();const s=jn(),i=D(!1);function a(d){d.defaultPrevented||(i.value||setTimeout(()=>{var h;(h=s.triggerElement.value)==null||h.focus()},0),i.value=!1,d.preventDefault())}return s.contentId||(s.contentId=it(void 0,"reka-dropdown-menu-content")),(d,h)=>{var f;return _(),M(r(ws),H(r(l),{id:r(s).contentId,"aria-labelledby":(f=r(s))==null?void 0:f.triggerId,style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"},onCloseAutoFocus:a,onInteractOutside:h[0]||(h[0]=u=>{var k;if(u.defaultPrevented)return;const m=u.detail.originalEvent,x=m.button===0&&m.ctrlKey===!0,v=m.button===2||x;(!r(s).modal.value||v)&&(i.value=!0),(k=r(s).triggerElement.value)!=null&&k.contains(u.target)&&u.preventDefault()})}),{default:T(()=>[z(d.$slots,"default")]),_:3},16,["id","aria-labelledby"])}}}),en=j({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},emits:["select"],setup(e,{emit:t}){const o=e,l=_o(t);return ce(),(s,i)=>(_(),M(r(ys),te(ie({...o,...r(l)})),{default:T(()=>[z(s.$slots,"default")]),_:3},16))}}),tn=j({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{}},setup(e){const t=e;return ce(),(o,n)=>(_(),M(r(ks),te(ie(t)),{default:T(()=>[z(o.$slots,"default")]),_:3},16))}}),nn=j({__name:"DropdownMenuPortal",props:{to:{},disabled:{type:Boolean},defer:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=e;return(o,n)=>(_(),M(r(Cs),te(ie(t)),{default:T(()=>[z(o.$slots,"default")]),_:3},16))}}),As=j({__name:"DropdownMenuSub",props:{defaultOpen:{type:Boolean},open:{type:Boolean,default:void 0}},emits:["update:open"],setup(e,{emit:t}){const o=e,l=Ye(o,"open",t,{passive:o.open===void 0,defaultValue:o.defaultOpen??!1});return ce(),(s,i)=>(_(),M(r(Os),{open:r(l),"onUpdate:open":i[0]||(i[0]=a=>pn(l)?l.value=a:null)},{default:T(()=>[z(s.$slots,"default",{open:r(l)})]),_:3},8,["open"]))}}),Ts=j({__name:"DropdownMenuSubContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},sideOffset:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},positionStrategy:{},updatePositionStrategy:{},disableUpdateOnLayoutShift:{type:Boolean},prioritizePosition:{type:Boolean},reference:{},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","entryFocus","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const l=Ne(e,t);return ce(),(s,i)=>(_(),M(r($s),H(r(l),{style:{"--reka-dropdown-menu-content-transform-origin":"var(--reka-popper-transform-origin)","--reka-dropdown-menu-content-available-width":"var(--reka-popper-available-width)","--reka-dropdown-menu-content-available-height":"var(--reka-popper-available-height)","--reka-dropdown-menu-trigger-width":"var(--reka-popper-anchor-width)","--reka-dropdown-menu-trigger-height":"var(--reka-popper-anchor-height)"}}),{default:T(()=>[z(s.$slots,"default")]),_:3},16))}}),Rs=j({__name:"DropdownMenuSubTrigger",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{}},setup(e){const t=e;return ce(),(o,n)=>(_(),M(r(Ps),te(ie(t)),{default:T(()=>[z(o.$slots,"default")]),_:3},16))}}),Ms=j({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e,o=jn(),{forwardRef:n,currentElement:l}=ce();return de(()=>{o.triggerElement=l}),o.triggerId||(o.triggerId=it(void 0,"reka-dropdown-menu-trigger")),(s,i)=>(_(),M(r(Un),{"as-child":""},{default:T(()=>[V(r(Ge),{id:r(o).triggerId,ref:r(n),type:s.as==="button"?"button":void 0,"as-child":t.asChild,as:s.as,"aria-haspopup":"menu","aria-expanded":r(o).open.value,"aria-controls":r(o).open.value?r(o).contentId:void 0,"data-disabled":s.disabled?"":void 0,disabled:s.disabled,"data-state":r(o).open.value?"open":"closed",onClick:i[0]||(i[0]=async a=>{var d;!s.disabled&&a.button===0&&a.ctrlKey===!1&&((d=r(o))==null||d.onOpenToggle(),await oe(),r(o).open.value&&a.preventDefault())}),onKeydown:i[1]||(i[1]=Ot(a=>{s.disabled||(["Enter"," "].includes(a.key)&&r(o).onOpenToggle(),a.key==="ArrowDown"&&r(o).onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())},["enter","space","arrow-down"]))},{default:T(()=>[z(s.$slots,"default")]),_:3},8,["id","type","as-child","as","aria-expanded","aria-controls","data-disabled","disabled","data-state"])]),_:3}))}}),Ds=j({inheritAttrs:!1,__name:"Dropdown",props:{button:{},options:{default:()=>[]},placement:{default:"left"}},setup(e){const t=$t(),o=rt(),n=e,l=x=>{x.route?t.push(x.route):x.onClick&&x.onClick()},s=x=>({label:x.label,icon:x.icon,component:x.component,onClick:()=>l(x),submenu:x.submenu}),i=x=>{let v=[],k=null,C=0;for(let p of x)if(p!=null){if("group"in p){k&&(v.push(k),k=null);let y={key:C,...p,items:d(p.items)};v.push(y)}else k||(k={key:C,group:"",hideLabel:!0,items:[]}),k.items.push(...d([p]));C++}return k&&v.push(k),v},a=x=>i(x),d=x=>(x||[]).filter(Boolean).filter(v=>v.condition?v.condition():!0).map(v=>s(v)),h={dropdownContent:"min-w-40 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none dropdown-content",groupContainer:"p-1.5",groupLabel:"flex h-7 items-center px-2 text-sm font-medium text-ink-gray-6",itemLabel:"whitespace-nowrap text-ink-gray-7",itemIcon:"mr-2 h-4 w-4 flex-shrink-0 text-ink-gray-6",chevronIcon:"ml-auto h-4 w-4 flex-shrink-0 text-ink-gray-6",itemButton:"group flex h-7 w-full items-center rounded px-2 text-base text-ink-gray-6 focus:bg-surface-gray-3 focus:outline-none data-[highlighted]:bg-surface-gray-3",submenuTrigger:"group flex h-7 w-full items-center rounded px-2 text-base text-ink-gray-6 focus:bg-surface-gray-3 focus:outline-none data-[highlighted]:bg-surface-gray-3 data-[state=open]:bg-surface-gray-3"},f=I(()=>i(n.options)),u=I(()=>"bottom"),m=I(()=>n.placement==="left"?"start":n.placement==="right"?"end":n.placement==="center"?"center":"start");return(x,v)=>(_(),M(r(Es),null,{default:T(({open:k})=>[V(r(Ms),{"as-child":""},{default:T(()=>[x.$slots.default?z(x.$slots,"default",te(H({key:0},{open:k,...r(o)})),void 0,!0):(_(),M(r(Q),H({key:1,active:!1},{...x.button,...r(o)}),{default:T(()=>{var C;return[ee(L(x.button?((C=x.button)==null?void 0:C.label)||null:"Options"),1)]}),_:1},16))]),_:2},1024),V(r(nn),null,{default:T(()=>[V(r(Is),{class:B([h.dropdownContent,{"origin-top-left":x.placement=="left","origin-top-right":x.placement=="right","origin-top":x.placement=="center"}]),side:u.value,align:m.value,"side-offset":4},{default:T(()=>[(_(!0),R(X,null,le(f.value,C=>(_(),R("div",{key:C.key,class:B(h.groupContainer)},[C.group&&!C.hideLabel?(_(),M(r(tn),{key:0,class:B(h.groupLabel)},{default:T(()=>[ee(L(C.group),1)]),_:2},1032,["class"])):N("",!0),(_(!0),R(X,null,le(C.items,p=>(_(),M(r(en),{key:p.label,"as-child":"",onSelect:p.onClick},{default:T(()=>[p.component?(_(),M(Oe(p.component),{key:0,active:!1})):p.submenu?(_(),M(r(As),{key:1},{default:T(()=>[V(r(Rs),{"as-child":""},{default:T(()=>[w("button",{class:B(h.submenuTrigger)},[p.icon&&typeof p.icon=="string"?(_(),M(J,{key:0,name:p.icon,class:B(h.itemIcon),"aria-hidden":"true"},null,8,["name","class"])):p.icon?(_(),M(Oe(p.icon),{key:1,class:B(h.itemIcon)},null,8,["class"])):N("",!0),w("span",{class:B(h.itemLabel)},L(p.label),3),V(J,{name:"chevron-right",class:B(h.chevronIcon),"aria-hidden":"true"},null,8,["class"])],2)]),_:2},1024),V(r(nn),null,{default:T(()=>[V(r(Ts),{class:B(h.dropdownContent),"side-offset":4},{default:T(()=>[(_(!0),R(X,null,le(a(p.submenu),y=>(_(),R("div",{key:y.key,class:B(h.groupContainer)},[y.group&&!y.hideLabel?(_(),M(r(tn),{key:0,class:B(h.groupLabel)},{default:T(()=>[ee(L(y.group),1)]),_:2},1032,["class"])):N("",!0),(_(!0),R(X,null,le(y.items,$=>(_(),M(r(en),{key:$.label,"as-child":"",onSelect:()=>l($)},{default:T(()=>[$.component?(_(),M(Oe($.component),{key:0,active:!1})):(_(),R("button",{key:1,class:B(h.itemButton)},[$.icon&&typeof $.icon=="string"?(_(),M(J,{key:0,name:$.icon,class:B(h.itemIcon),"aria-hidden":"true"},null,8,["name","class"])):$.icon?(_(),M(Oe($.icon),{key:1,class:B(h.itemIcon)},null,8,["class"])):N("",!0),w("span",{class:B(h.itemLabel)},L($.label),3)],2))]),_:2},1032,["onSelect"]))),128))],2))),128))]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024)):(_(),R("button",{key:2,class:B(h.itemButton)},[p.icon&&typeof p.icon=="string"?(_(),M(J,{key:0,name:p.icon,class:B(h.itemIcon),"aria-hidden":"true"},null,8,["name","class"])):p.icon?(_(),M(Oe(p.icon),{key:1,class:B(h.itemIcon)},null,8,["class"])):N("",!0),w("span",{class:B(h.itemLabel)},L(p.label),3)],2))]),_:2},1032,["onSelect"]))),128))],2))),128))]),_:1},8,["class","side","align"])]),_:1})]),_:3}))}}),qn=ze(Ds,[["__scopeId","data-v-f12ce6a4"]]),Bs={class:"flex min-w-0 items-center"},Fs={class:"flex min-w-0 items-center overflow-hidden text-ellipsis whitespace-nowrap"},zs=["onClick"],Ls={key:2,class:"mx-0.5 text-base text-ink-gray-4","aria-hidden":"true"},Ns=j({__name:"Breadcrumbs",props:{items:{}},setup(e){const t=e,o=$t(),{width:n}=xo(),l=I(()=>(t.items||[]).filter(Boolean)),s=I(()=>n.value>640?[]:l.value.slice(0,-2).map(d=>{let h=()=>{d.onClick&&d.onClick(),d.route&&o.push(d.route)};return{...d,icon:null,label:d.label,onClick:h}})),i=I(()=>n.value>640?l.value:l.value.slice(-2));return(a,d)=>{const h=ue("router-link");return _(),R("div",Bs,[s.value.length?(_(),R(X,{key:0},[V(r(qn),{class:"h-7",options:s.value},{default:T(()=>[V(r(Q),{variant:"ghost"},{icon:T(()=>d[0]||(d[0]=[w("svg",{class:"w-4 text-ink-gray-5",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[w("circle",{cx:"12",cy:"12",r:"1"}),w("circle",{cx:"19",cy:"12",r:"1"}),w("circle",{cx:"5",cy:"12",r:"1"})],-1)])),_:1})]),_:1},8,["options"]),d[1]||(d[1]=w("span",{class:"ml-1 mr-0.5 text-base text-ink-gray-4","aria-hidden":"true"}," / ",-1))],64)):N("",!0),w("div",Fs,[(_(!0),R(X,null,le(i.value,(f,u)=>(_(),R(X,{key:f.label},[f.route?(_(),M(h,{key:0,to:f.route,onClick:m=>f.onClick?f.onClick():null,class:B(["flex items-center rounded px-0.5 py-1 text-lg font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-outline-gray-3",[u==i.value.length-1?"text-ink-gray-9":"text-ink-gray-5 hover:text-ink-gray-7"]])},{default:T(()=>[z(a.$slots,"prefix",{item:f}),w("span",null,L(f.label),1),z(a.$slots,"suffix",{item:f})]),_:2},1032,["to","onClick","class"])):(_(),R("button",{key:1,onClick:m=>f.onClick?f.onClick():null,class:B(["flex items-center rounded px-0.5 py-1 text-lg font-medium focus:outline-none focus-visible:ring-2 focus-visible:ring-outline-gray-3",[u==i.value.length-1?"text-ink-gray-9":"text-ink-gray-5 hover:text-ink-gray-7"]])},[z(a.$slots,"prefix",{item:f}),w("span",null,L(f.label),1),z(a.$slots,"suffix",{item:f})],10,zs)),u!=i.value.length-1?(_(),R("span",Ls," / ")):N("",!0)],64))),128))])])}}});let Us=0;function js(){return++Us}function Kn(){return"frappe-ui-"+js()}const qs=["disabled","id","checked"],Ks=["for"],Ws=j({__name:"Checkbox",props:{size:{default:"sm"},label:{},checked:{type:Boolean},disabled:{type:Boolean},padding:{type:Boolean,default:!1},modelValue:{type:[Boolean,Number]},id:{}},setup(e){const t=e,o=rt(),n=t.id??Kn(),l=I(()=>[{sm:"text-base font-medium",md:"text-lg font-medium"}[t.size],t.disabled?"text-ink-gray-4":"text-ink-gray-8","select-none"]),s=I(()=>{let i=t.disabled?"border-outline-gray-2 bg-surface-menu-bar text-ink-gray-3":"border-outline-gray-4 text-ink-gray-9 hover:border-gray-600 focus:ring-offset-0 focus:border-gray-900 active:border-gray-700 transition",a=t.disabled?"":t.padding?"focus:ring-0":"hover:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 active:bg-surface-gray-2",d={sm:"w-3.5 h-3.5",md:"w-4 h-4"}[t.size];return[i,a,d]});return(i,a)=>(_(),R("div",{class:B(["inline-flex space-x-2 rounded transition",{"px-2.5 py-1.5":i.padding&&i.size==="sm","px-3 py-2":i.padding&&i.size==="md","focus-within:bg-surface-gray-2 focus-within:ring-2 focus-within:ring-outline-gray-3 hover:bg-surface-gray-3 active:bg-surface-gray-4":i.padding&&!i.disabled}])},[w("input",H({class:["rounded-sm mt-[1px]",s.value],type:"checkbox",disabled:i.disabled,id:r(n),checked:!!i.modelValue,onChange:a[0]||(a[0]=d=>i.$emit("update:modelValue",d.target.checked))},r(o)),null,16,qs),i.label?(_(),R("label",{key:0,class:B(["block",l.value]),for:r(n)},L(i.label),11,Ks)):N("",!0)],2))}});function _e(...e){return new Date(...e)}function Me(e){return!e||e.toString()==="Invalid Date"?"":wo(e).set("hour",0).set("minute",0).set("second",0).set("millisecond",0).format("YYYY-MM-DD")}function Ze(e,t){let o=1;t<0&&(o=-1,t=Math.abs(t));const n=[];for(;t;)e=_e(e.getFullYear(),e.getMonth(),e.getDate()+o),n.push(e),t--;return o===-1?n.reverse():n}function Gs(e,t){const n=[31,28,31,30,31,30,31,31,30,31,30,31][e];return e===1&&Ys(t)?29:n}function Ys(e){return e%400===0?!0:e%100===0?!1:e%4===0}function Hs(){const e=D(0),t=D(0),o=I(()=>_e()),n=I(()=>{if(!(e.value&&t.value))return[];const h=t.value-1,f=e.value,u=_e(f,h,1),m=_e(f,h+1,0),x=u.getDay(),v=6-m.getDay(),k=Ze(u,-x),C=Ze(m,v),p=Gs(h,f),y=Ze(u,p-1);let $=[...k,u,...y,...C];if($.length<42){const g=$.at(-1);if(g){const c=Ze(g,42-$.length);$=$.concat(...c)}}return $}),l=I(()=>{const h=[],f=n.value.slice();for(;f.length;){const u=f.splice(0,7);h.push(u)}return h}),s=I(()=>{if(!(e.value&&t.value))return"";const h=_e(e.value,t.value-1,1);return`${h.toLocaleString("en-US",{month:"long"})}, ${h.getFullYear()}`});function i(){d(-1)}function a(){d(1)}function d(h){t.value=t.value+h,t.value<1&&(t.value=12,e.value=e.value-1),t.value>12&&(t.value=1,e.value=e.value+1)}return{currentYear:e,currentMonth:t,today:o,dates:n,datesAsWeeks:l,formattedMonth:s,prevMonth:i,nextMonth:a,changeMonth:d}}const Js={class:"flex flex-col space-y-1.5"},Xs={key:0,class:"block text-xs text-ink-gray-5"},Qs={class:"flex items-center p-1 text-ink-gray-4"},Zs={class:"flex-1 text-center text-base font-medium text-ink-gray-6"},ea={class:"flex items-center justify-center gap-1 p-1"},ta={class:"flex flex-col items-center justify-center p-1 text-ink-gray-8"},na={class:"flex items-center text-xs uppercase"},oa=["onClick"],la={class:"flex justify-end p-1"},yt=j({__name:"DatePicker",props:{value:{},modelValue:{},placeholder:{},formatter:{type:Function},readonly:{type:Boolean},inputClass:{},placement:{},label:{}},emits:["update:modelValue","change"],setup(e,{emit:t}){const o=e,n=t,{currentYear:l,currentMonth:s,today:i,datesAsWeeks:a,formattedMonth:d,prevMonth:h,nextMonth:f}=Hs(),u=I(()=>{var C,p,y;let k="mt-2";return(C=o.placement)!=null&&C.startsWith("top")?k="mb-2":(p=o.placement)!=null&&p.startsWith("left")?k="mr-2":(y=o.placement)!=null&&y.startsWith("right")&&(k="ml-2"),k}),m=I(()=>o.value?o.value:o.modelValue);function x(k,C=!1){k=C?Pt(k):k,n("change",Me(k)),n("update:modelValue",Me(k))}function v(){let k=m.value?_e(m.value):_e();k.toString()==="Invalid Date"&&(k=_e()),l.value=k.getFullYear(),s.value=k.getMonth()+1}return de(()=>v()),(k,C)=>(_(),M(r(Tt),{onOpen:v,class:"flex w-full [&>div:first-child]:w-full",placement:k.placement},{target:T(({togglePopover:p})=>[w("div",Js,[o.label?(_(),R("label",Xs,L(o.label),1)):N("",!0),V(r(lt),H({readonly:"",type:"text",placeholder:k.placeholder,value:m.value&&k.formatter?k.formatter(m.value):m.value,onFocus:y=>k.readonly?null:p(),class:["w-full",k.inputClass]},k.$attrs),tt({_:2},[k.$slots.prefix?{name:"prefix",fn:T(()=>[z(k.$slots,"prefix")]),key:"0"}:void 0]),1040,["placeholder","value","onFocus","class"])])]),body:T(({togglePopover:p})=>[w("div",{class:B(["w-fit select-none text-base text-ink-gray-9 divide-y divide-outline-gray-modals rounded-lg bg-surface-modal shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",u.value])},[w("div",Qs,[V(r(Q),{variant:"ghost",class:"h-7 w-7",onClick:r(h)},{default:T(()=>[V(J,{"stroke-width":2,name:"chevron-left",class:"h-4 w-4"})]),_:1},8,["onClick"]),w("div",Zs,L(r(d)),1),V(r(Q),{variant:"ghost",class:"h-7 w-7",onClick:r(f)},{default:T(()=>[V(J,{"stroke-width":2,name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["onClick"])]),w("div",ea,[V(r(lt),{class:"text-sm",type:"text",value:m.value,onChange:C[0]||(C[0]=y=>x(r(_e)(y.target.value)))},null,8,["value"]),V(r(Q),{label:"Today",class:"text-sm",onClick:()=>{x(r(_e)(),!0),p()}},null,8,["onClick"])]),w("div",ta,[w("div",na,[(_(),R(X,null,le(["s","m","t","w","t","f","s"],(y,$)=>w("div",{class:"flex h-6 w-8 items-center justify-center text-center",key:$},L(y),1)),64))]),(_(!0),R(X,null,le(r(a),(y,$)=>(_(),R("div",{class:"flex items-center",key:$},[(_(!0),R(X,null,le(y,g=>(_(),R("div",{key:r(Me)(g),class:B(["flex h-8 w-8 cursor-pointer items-center justify-center rounded hover:bg-surface-gray-2",{"text-ink-gray-3":g.getMonth()!==r(s)-1,"font-extrabold text-ink-gray-9":r(Me)(g)===r(Me)(r(i)),"bg-surface-gray-6 text-ink-white hover:bg-surface-gray-6":r(Me)(g)===m.value}]),onClick:()=>{x(g),p()}},L(g.getDate()),11,oa))),128))]))),128))]),w("div",la,[V(r(Q),{label:"Clear",class:"text-sm",onClick:()=>{x(""),p()}},null,8,["onClick"])])],2)]),_:3},8,["placement"]))}}),sa={class:"space-y-1.5"},aa=["for"],ia=["placeholder","disabled","id","value","rows"],ra=j({__name:"Textarea",props:{size:{default:"sm"},variant:{default:"subtle"},placeholder:{},disabled:{type:Boolean},id:{},modelValue:{},debounce:{},rows:{default:3},label:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const n=e,l=o,s=rt(),i=D(null),a=I(()=>{let u={sm:"text-base rounded",md:"text-base rounded",lg:"text-lg rounded-md",xl:"text-xl rounded-md"}[n.size],m={sm:["py-1.5 px-2"],md:["py-1.5 px-2.5"],lg:["py-1.5 px-3"],xl:["py-1.5 px-3"]}[n.size],x=n.disabled?"disabled":n.variant,v={subtle:"border border-[--surface-gray-2] bg-surface-gray-2 placeholder-ink-gray-4 hover:border-outline-gray-modals hover:bg-surface-gray-3 focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",outline:"border border-outline-gray-2 bg-surface-white placeholder-ink-gray-4 hover:border-outline-gray-3 hover:shadow-sm focus:bg-surface-white focus:border-outline-gray-4 focus:shadow-sm focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3",disabled:["border bg-surface-gray-1 placeholder-ink-gray-3",n.variant==="outline"?"border-outline-gray-2":"border-transparent"]}[x];return[u,m,v,n.disabled?"text-ink-gray-5":"text-ink-gray-8","transition-colors w-full block"]}),d=I(()=>[{sm:"text-xs",md:"text-base",lg:"text-lg",xl:"text-xl"}[n.size],"text-ink-gray-5"]);let h=u=>{l("update:modelValue",u)};n.debounce&&(h=mn(h,n.debounce));let f=u=>{h(u.target.value)};return t({el:i}),(u,m)=>(_(),R("div",sa,[u.label?(_(),R("label",{key:0,class:B(["block",d.value]),for:u.id},L(u.label),11,aa)):N("",!0),w("textarea",H({ref_key:"textareaRef",ref:i,placeholder:u.placeholder,class:a.value,disabled:u.disabled,id:u.id,value:u.modelValue,rows:u.rows,onInput:m[0]||(m[0]=(...x)=>r(f)&&r(f)(...x)),onChange:m[1]||(m[1]=(...x)=>r(f)&&r(f)(...x))},r(s)),null,16,ia)]))}}),ua=["for"],da=j({__name:"FormLabel",props:{label:{},size:{default:"sm"},id:{},required:{type:Boolean}},setup(e){const t=e,o=I(()=>[{sm:"text-xs",md:"text-base"}[t.size],"text-ink-gray-5"]);return(n,l)=>(_(),R("label",{class:B(["block",o.value]),for:n.id},[ee(L(n.label)+" ",1),n.required?(_(),R(X,{key:0},[l[0]||(l[0]=w("span",{class:"text-ink-red-3 select-none","aria-hidden":"true"},"*",-1)),l[1]||(l[1]=w("span",{class:"sr-only"},"(required)",-1))],64)):N("",!0)],10,ua))}}),ca={inheritAttrs:!1},W=j({...ca,__name:"FormControl",props:{label:{},description:{},type:{default:"text"},size:{default:"sm"},variant:{default:"subtle"},required:{type:Boolean}},setup(e){const t=Kn(),o=e,n=rt(),l=I(()=>{let i={};for(let a in n)a!=="class"&&a!=="style"&&(i[a]=n[a]);return i}),s=I(()=>[{sm:"text-xs",md:"text-base"}[o.size],"text-ink-gray-5"]);return(i,a)=>i.type!="checkbox"?(_(),R("div",{key:0,class:B(["space-y-1.5",r(n).class]),style:an(r(n).style)},[i.label?(_(),M(da,{key:0,label:i.label,size:i.size,id:r(t),required:i.required},null,8,["label","size","id","required"])):N("",!0),i.type==="select"?(_(),M(r(ko),H({key:1,id:r(t)},{...l.value,size:i.size,variant:i.variant}),tt({_:2},[i.$slots.prefix?{name:"prefix",fn:T(()=>[z(i.$slots,"prefix")]),key:"0"}:void 0]),1040,["id"])):i.type==="autocomplete"?(_(),M(r(ht),te(H({key:2},{...l.value})),tt({_:2},[i.$slots.prefix?{name:"prefix",fn:T(()=>[z(i.$slots,"prefix")]),key:"0"}:void 0,i.$slots["item-prefix"]?{name:"item-prefix",fn:T(d=>[z(i.$slots,"item-prefix",te(ie(d)))]),key:"1"}:void 0]),1040)):i.type==="textarea"?(_(),M(r(ra),H({key:3,id:r(t)},{...l.value,size:i.size,variant:i.variant}),null,16,["id"])):(_(),M(r(lt),H({key:4,id:r(t)},{...l.value,type:i.type,size:i.size,variant:i.variant,required:i.required}),tt({_:2},[i.$slots.prefix?{name:"prefix",fn:T(()=>[z(i.$slots,"prefix")]),key:"0"}:void 0,i.$slots.suffix?{name:"suffix",fn:T(()=>[z(i.$slots,"suffix")]),key:"1"}:void 0]),1040,["id"])),z(i.$slots,"description",{},()=>[i.description?(_(),R("p",{key:0,class:B(s.value)},L(i.description),3)):N("",!0)])],6)):(_(),M(r(Ws),H({key:1,id:r(t)},{...l.value,label:i.label,size:i.size,class:r(n).class}),null,16,["id"]))}}),fa=j({__name:"Switch",props:{size:{default:"sm"},label:{default:""},description:{default:""},disabled:{type:Boolean,default:!1},modelValue:{type:[Boolean,Number,String]}},emits:["change","update:modelValue"],setup(e,{emit:t}){const o=e,n=t,l=I(()=>o.label&&o.description?2:o.label?1:0),s=I(()=>["relative inline-flex flex-shrink-0 cursor-pointer rounded-full border-transparent transition-colors duration-100 ease-in-out items-center","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3","disabled:cursor-not-allowed disabled:bg-surface-gray-3",o.modelValue?"bg-surface-gray-7 enabled:hover:bg-surface-gray-6 active:bg-surface-gray-5 group-hover:enabled:bg-surface-gray-6":"bg-surface-gray-4 enabled:hover:bg-gray-400 active:bg-gray-500 group-hover:enabled:bg-gray-400",o.size==="md"?"h-5 w-8 border-[3px]":"h-4 w-[26px] border-2"]),i=I(()=>["pointer-events-none inline-block transform rounded-full bg-surface-white shadow ring-0 transition duration-100 ease-in-out",o.size==="md"?"h-3.5 w-3.5":"h-3 w-3",o.size==="md"?o.modelValue?"translate-x-3 rtl:-translate-x-3":"translate-x-0":o.modelValue?"translate-x-2.5 rtl:-translate-x-2.5":"translate-x-0"]),a=I(()=>["font-medium leading-normal",o.disabled&&l.value===1?"text-ink-gray-4":"text-ink-gray-8",o.size==="md"?"text-lg":"text-base"]),d=I(()=>["max-w-xs text-p-base text-ink-gray-7"]),h=I(()=>{const u=["flex justify-between"];return l.value===1?(u.push("group items-center space-x-3 cursor-pointer rounded focus-visible:bg-surface-gray-2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-outline-gray-3"),u.push(o.disabled?"cursor-not-allowed":"hover:bg-surface-gray-3 active:bg-surface-gray-4"),u.push(o.size==="md"?"px-3 py-1.5":"px-2.5 py-1.5")):l.value===2&&(u.push("items-start"),u.push(o.size==="md"?"space-x-3.5":"space-x-2.5")),u}),f=I(()=>["flex flex-col space-y-0.5"]);return(u,m)=>(_(),M(r(il),{as:"div",tabindex:l.value==1?0:-1,onKeyup:m[1]||(m[1]=Ot(ke(x=>n("update:modelValue",!u.modelValue),["self"]),["space"])),class:B(h.value)},{default:T(()=>[w("span",{class:B(f.value)},[o.label?(_(),M(r(ul),{key:0,as:"span",class:B(a.value)},{default:T(()=>[ee(L(o.label),1)]),_:1},8,["class"])):N("",!0),o.description?(_(),M(r(dl),{key:1,as:"span",class:B(d.value)},{default:T(()=>[ee(L(o.description),1)]),_:1},8,["class"])):N("",!0)],2),V(r(rl),{disabled:o.disabled,"model-value":!!u.modelValue,class:B(s.value),"onUpdate:modelValue":m[0]||(m[0]=x=>n("update:modelValue",!u.modelValue))},{default:T(()=>[w("span",{"aria-hidden":"true",class:B(i.value)},null,2)]),_:1},8,["disabled","model-value","class"])]),_:1},8,["tabindex","class"]))}}),pa={name:"TabButtons",props:{buttons:{type:Array,required:!0},modelValue:{type:[String,Boolean,Number]}},emits:["update:modelValue"],components:{Button:Q,FeatherIcon:J,RadioGroup:ol,RadioGroupOption:sl,RadioGroupLabel:al},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},ma={class:"flex space-x-0.5 rounded-md bg-surface-gray-2 h-7 items-center px-[1px] text-sm"};function va(e,t,o,n,l,s){const i=ue("RadioGroupLabel"),a=ue("Button"),d=ue("RadioGroupOption"),h=ue("RadioGroup");return _(),M(h,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=f=>s.value=f)},{default:T(()=>[w("div",ma,[(_(!0),R(X,null,le(o.buttons,f=>(_(),M(d,{as:"div",key:f.label,disabled:f.disabled,value:f.value??f.label},{default:T(({active:u,checked:m})=>[V(a,H({onClick:f.onClick},{ref_for:!0},f,{class:["!h-6.5",[u?"ring-outline-gray-2 focus-visible:ring":"",m&&"!bg-surface-white",f.disabled?"":m?" text-ink-gray-9 shadow":"text-ink-gray-7"]]}),{default:T(()=>[he(V(i,{as:"span",class:"flex h-4 items-center"},{default:T(()=>[ee(L(f.label),1)]),_:2},1536),[[ge,f.label&&!f.hideLabel]])]),_:2},1040,["onClick","class"])]),_:2},1032,["disabled","value"]))),128))])]),_:1},8,["modelValue"])}const ha=ze(pa,[["render",va]]);let me=null,_t=null;function on(){typeof window<"u"&&!me&&(me=document.querySelector('link[rel="icon"]'),_t=(me==null?void 0:me.href)||null)}function ga(e){typeof window<"u"&&on();const t=Y(()=>{try{return e()}catch{return null}},n=>{if(!(typeof window>"u")&&n)if(n.title&&(document.title=n.title),me||on(),n.emoji){const l=`data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>${n.emoji}</text></svg>`;me&&(me.href=l)}else n.icon?me&&(me.href=n.icon):me&&_t&&(me.href=_t)},{immediate:!0,deep:!0});return So()&&Co(t),t}const je=D({}),et=st({}),ba=Oo({doctype:"AntPOS Settings",name:"AntPOS Settings",onSuccess:e=>(je.value=e,Bt().setupBrand(),e)});function Bt(){function e(){var t,o,n;et.name=(t=je.value)==null?void 0:t.brand_name,et.logo=(o=je.value)==null?void 0:o.brand_logo,et.favicon=(n=je.value)==null?void 0:n.favicon}return{setting:ba,settings:je,brand:et,setupBrand:e}}const ya=$o("antpos-users",()=>{const e=Po();let t=st({});const o=$t(),n=pe({url:"ant_pos.ant_pos.api.session.get_users",cache:"Users",initialData:[],auto:!0,transform(s){for(let i of s)t[i.name]=i,i.name==="Administrator"&&(t[i.email]=i);return s},onError(s){s&&s.exc_type==="AuthenticationError"&&o.push("/login")}});function l(s){return(!s||s==="sessionUser")&&(s=e.user),t[s]||(t[s]={name:s,email:s,full_name:s.split("@")[0],first_name:s.split("@")[0],last_name:"",user_image:null,role:null}),t[s]}return{users:n,getUser:l}}),$e=Vo(),_a=["src"],xa={class:"flex flex-1 flex-col text-left ml-3 transition-all duration-300 ease-in-out"},wa={class:"text-p-sm font-semibold text-gray-900"},ka={class:"mt-1 text-sm text-gray-600"},Ca=["src"],Sa={class:"w-full flex flex-col gap-3 mt-6"},Oa={class:"text-gray-700 font-medium"},$a={class:"text-gray-700 font-medium"},Pa={class:"flex justify-center items-center"},Va={__name:"Sidebar",props:{collapse:{type:Boolean,required:!0}},setup(e){const{brand:t}=Bt();let o=ne("base");D({isExpanded:!0});const{loadComponent:n}=ne("dynamicComponent"),l=ya(),s=I(()=>l.getUser()),i=pe({url:"logout",method:"GET",onSuccess(h){window.location.reload()}}),a=e,d=[{label:"Close Shift",icon:()=>be(J,{name:"file-minus"}),onClick:()=>{n("CloseShift")}},{label:"Settings",icon:()=>be(J,{name:"settings"}),onClick:()=>{n("Settings")}},{label:"Logout",icon:()=>be(J,{name:"log-out"}),onClick:()=>{i.fetch()}}];return(h,f)=>(_(),R("div",{class:B(["h-full pb-4 bg-white shadow-lg flex-col items-center transition-all duration-300 ease-in-out flex ",a.collapse?"w-[3%] sm:hidden lg:flex":"w-[30%] px-1 fixed inset-0 z-40 lg:w-[10%] lg:inset-auto lg:z-auto lg:relative"])},[V(r(qn),{options:d,class:B(a.collapse?"":"adjust w-full")},{default:T(()=>[a.collapse?(_(),R("button",{key:1,class:B(["flex h-14 justify-center items-center pb-2 mt-1 duration-150 ease-in-out",a.collapse?"w-full":"w-44 rounded-lg hover:bg-gray-100"])},[w("img",{src:r(t).logo||"/assets/ant_pos/antPOS.png",alt:"Brand Logo",class:B(["object-cover transition-all duration-300 ease-in-out",a.collapse?"h-full w-full m-0.5":"h-10 w-10"])},null,10,Ca)],2)):(_(),R("button",{key:0,class:B(["flex h-14 items-center pb-2 mt-1 max-w-full duration-150 ease-in-out justify-center object-cover",a.collapse?"w-full ":"w-full  hover:bg-gray-100"])},[w("img",{src:r(t).logo||"/assets/ant_pos/antPOS.png",alt:"Brand Logo",class:B(["object-cover max-h-[60%] lg:max-h-full transition-all duration-300 ease-in-out",a.collapse?"h-7 w-full":"h-10 w-10 object-center"])},null,10,_a),he(w("div",xa,[w("div",wa,L(r(t).name?r(t).name:"antPOS"),1),w("div",ka,L(s.value.full_name),1)],512),[[ge,!a.collapse]]),he(V(r(J),{name:"chevron-down",class:"h-5 w-5 text-gray-500","aria-hidden":"true"},null,512),[[ge,!a.collapse]])],2))]),_:1},8,["class"]),w("div",Sa,[w("div",{class:B(["w-full p-2 flex gap-3 items-center hover:bg-gray-100 hover:cursor-pointer rounded-lg transition-all duration-500 ease-in-out",[{"bg-gray-100":r(o).page!="payments"},a.collapse?"justify-center":""]]),onClick:f[0]||(f[0]=u=>r($e).emit("updatePage","Pos"))},[V(r(J),{name:"monitor",class:"w-5 h-5 text-gray-600"}),he(w("p",Oa,"POS",512),[[ge,!a.collapse]])],2),w("div",{class:B(["w-full p-2 flex gap-3 items-center hover:bg-gray-100 hover:cursor-pointer rounded-lg transition-all duration-500 ease-in-out",[{"bg-gray-100":r(o).page==="payments"},a.collapse?"justify-center":""]]),onClick:f[1]||(f[1]=u=>r($e).emit("updatePage","payments"))},[V(r(J),{name:"credit-card",class:"w-5 h-5 text-gray-600"}),he(w("p",$a,"Payments",512),[[ge,!a.collapse]])],2)]),V(r(Q),{varient:"solid",class:B(["mt-auto w-full flex hover:cursor-pointer transition-all duration-500 ease-in-out",a.collapse?"justify-end":""]),onClick:f[2]||(f[2]=u=>r($e).emit("trigger_collapse"))},{default:T(()=>[w("div",Pa,[V(r(J),{name:a.collapse?"chevrons-right":"chevrons-left",class:"h-5 w-5"},null,8,["name"]),he(w("span",null,"Collapse",512),[[ge,!a.collapse]])])]),_:1},8,["class"])],2))}},Ea=ze(Va,[["__scopeId","data-v-8af5ca21"]]),Ia={class:"w-full h-[6%]"},Aa={class:"bg-gray-300 w-full h-full flex items-center justify-between p-4"},Ta={class:"flex items-center gap-2"},Ra={class:"flex float-right gap-4"},Ma={class:"flex flex-row items-center"},Da={__name:"Navbar",setup(e){const t=ne("base"),o=I({get(){var s;return((s=t==null?void 0:t.pos_profile)==null?void 0:s.custom_set_sales_order)===1},set(s){t&&t.pos_profile&&(t.pos_profile.custom_set_sales_order=s?1:0)}}),n=I(()=>{var s;return t!=null&&t.is_return?{label:"Return",theme:"yellow",class:"'text-xs font-semibold text-yellow-300'"}:(s=t==null?void 0:t.invoice)!=null&&s.docstatus?{label:"Draft",theme:"red",class:"'text-xs font-semibold'"}:{label:"Not Saved",theme:"red",class:"'text-xs font-semibold'"}}),l=I(()=>[{label:(t==null?void 0:t.page)==="Pos"?"POS":"Payments",route:{name:"Pos"}}]);return(s,i)=>{var d,h;const a=ue("Button");return _(),R("div",Ia,[w("div",Aa,[w("div",Ta,[V(a,{variant:"ghost",size:"lg",onClick:i[0]||(i[0]=f=>r($e).emit("trigger_collapse")),class:"bg-gray-300 hover:bg-gray-400 rounded-full p-1.5 lg:hidden block"},{default:T(()=>[V(r(J),{name:"menu",class:"w-4 h-4"})]),_:1}),w("div",null,[V(r(Ns),{items:l.value},null,8,["items"])])]),w("div",Ra,[w("div",Ma,[(h=(d=r(t))==null?void 0:d.pos_profile)!=null&&h.custom_create_sales_order?(_(),M(r(fa),{key:0,size:"sm",label:"Sales Order",disabled:!1,modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=f=>o.value=f)},null,8,["modelValue"])):N("",!0),n.value?(_(),M(r(Xt),{key:1,label:n.value.label,variant:"subtle",class:B(n.value.class),theme:n.value.theme,size:"lg"},null,8,["label","class","theme"])):N("",!0)]),w("div",null,[V(r(Xt),{variant:"subtle",ref_for:!0,class:B("text-xs font-semibold"),theme:"blue",size:"lg"},{default:T(()=>{var f,u;return[ee(L((u=(f=r(t))==null?void 0:f.Ant_Opening_Shift)==null?void 0:u.pos_profile),1)]}),_:1})])])])])}}},Ba={name:"Autocomplete",props:["modelValue","options","placeholder","bodyClasses","multiple","hideSearch"],emits:["update:modelValue","update:query","change"],components:{Popover:Tt,Button:Q,FeatherIcon:J,Combobox:Cn,ComboboxInput:Sn,ComboboxOptions:On,ComboboxOption:$n,ComboboxButton:tl},expose:["togglePopover","closeOptions"],data(){return{query:"",showOptions:!1}},computed:{selectedValue:{get(){var e,t;return this.multiple?De((e=this.modelValue)==null?void 0:e[0])==="value"?(t=this.modelValue)==null?void 0:t.map(o=>this.findOption(o)):this.modelValue:this.findOption(this.modelValue)},set(e){this.query="",e&&!this.multiple&&(this.showOptions=!1),this.$emit("update:modelValue",e)}},groups(){var t;return!this.options||this.options.length===0?[]:((t=this.options[0])!=null&&t.group?this.options:[{group:"",items:this.sanitizeOptions(this.options)}]).map((o,n)=>{const l=this.sanitizeOptions(o.items)||[];return{key:n,group:o.group,hideLabel:o.hideLabel||!1,items:this.filterOptions(l)}}).filter(o=>o.items.length>0)},allOptions(){return this.groups.flatMap(e=>e.items)},areAllOptionsSelected(){var e;return this.multiple?this.allOptions.length===((e=this.selectedValue)==null?void 0:e.length):!1}},watch:{query(e){this.$emit("update:query",e)},showOptions(e){e&&oe(()=>{var t,o;return(o=(t=this.$refs.searchInput)==null?void 0:t.$el)==null?void 0:o.focus()})}},methods:{togglePopover(e){this.showOptions=e??!this.showOptions},closeOptions(){this.showOptions=!1,this.openPopover=!1,this.togglePopover=!1,this.isComboboxOpen=!1},findOption(e){if(!e)return e;const t=De(e)==="value"?e:e.value;return this.allOptions.find(o=>o.value===t)},filterOptions(e){if(!e)return[];if(!this.query)return e;const t=this.query.trim().toLowerCase();return e.filter(o=>{var i,a;const n=(i=o.label)==null?void 0:i.toLowerCase().includes(t),l=(a=o.value)==null?void 0:a.toLowerCase().includes(t),s=o.mobile_no?o.mobile_no.toString().toLowerCase().includes(t):!1;return n||l||s})},displayValue(e){return e?this.multiple?Array.isArray(e)?e.map(t=>this.getLabel(this.findOption(t))).join(", "):"":this.getLabel(this.findOption(e)):""},getLabel(e){return De(e)==="value"?e:(e==null?void 0:e.label)||(e==null?void 0:e.value)||"No Name"},getmobile(e){return De(e)==="value"?e:(e==null?void 0:e.mobile_no)||""},sanitizeOptions(e){return e?e.map(t=>De(t)==="option"?t:{label:t,value:t}):[]},isOptionSelected(e){var o,n;if(!this.selectedValue)return!1;const t=De(e)==="value"?e:e.value;return this.multiple?(n=this.selectedValue)==null?void 0:n.find(l=>l&&l.value===t):((o=this.selectedValue)==null?void 0:o.value)===t},selectAll(){this.selectedValue=this.allOptions},clearAll(){this.selectedValue=[]}}};function De(e){return typeof e=="object"?"option":"value"}const Fa={class:"w-full"},za=["onClick"],La={class:"flex items-center overflow-hidden"},Na={key:0,class:"truncate text-base leading-5"},Ua={key:1,class:"text-base leading-5 text-gray-500"},ja={key:0,class:"sticky top-0 z-10 flex items-stretch space-x-1.5 bg-white py-1.5"},qa={class:"relative w-full"},Ka={key:0,class:"sticky top-10 truncate bg-white px-2.5 py-1.5 text-sm font-medium text-gray-600"},Wa={class:"flex flex-1 gap-2 overflow-hidden"},Ga={key:0,class:"flex-shrink-0"},Ya={key:1,class:"h-4 w-4"},Ha={class:"flex-1 truncate"},Ja={class:"truncate"},Xa={key:0,class:"ml-2 flex-shrink-0"},Qa={key:0,class:"text-sm text-gray-600"},Za={key:1,class:"rounded-md px-2.5 py-1.5 text-base text-gray-600"},ei={key:0,class:"border-t p-1"},ti={key:0,class:"flex items-center justify-end"};function ni(e,t,o,n,l,s){const i=ue("ComboboxInput"),a=ue("FeatherIcon"),d=ue("ComboboxOption"),h=ue("ComboboxOptions"),f=ue("Button"),u=ue("Popover"),m=ue("Combobox");return _(),M(m,{modelValue:s.selectedValue,"onUpdate:modelValue":t[3]||(t[3]=x=>s.selectedValue=x),multiple:o.multiple,nullable:""},{default:T(({open:x})=>[V(u,{class:"w-full",show:l.showOptions,"onUpdate:show":t[2]||(t[2]=v=>l.showOptions=v)},{target:T(({open:v,togglePopover:k})=>[z(e.$slots,"target",te(ie({open:v,togglePopover:k})),()=>[w("div",Fa,[w("button",{class:B(["flex h-7 w-full items-center justify-between gap-2 rounded bg-gray-100 px-2 py-1 transition-colors hover:bg-gray-200 focus:ring-2 focus:ring-gray-400",{"bg-gray-200":x}]),onClick:()=>k()},[w("div",La,[z(e.$slots,"prefix"),s.selectedValue?(_(),R("span",Na,L(s.displayValue(s.selectedValue)),1)):(_(),R("span",Ua,L(o.placeholder||""),1))]),z(e.$slots,"suffix")],10,za)])])]),body:T(({isOpen:v,togglePopover:k})=>[he(w("div",null,[w("div",{class:B(["relative mt-1 rounded-lg bg-white text-base shadow-2xl",o.bodyClasses])},[V(h,{class:B(["max-h-[15rem] overflow-y-auto px-1.5 pb-1.5",{"pt-1.5":o.hideSearch}]),static:""},{default:T(()=>[o.hideSearch?N("",!0):(_(),R("div",ja,[w("div",qa,[V(i,{ref:"searchInput",class:"form-input w-full",type:"text",onChange:t[0]||(t[0]=C=>{l.query=C.target.value}),value:l.query,autocomplete:"off",placeholder:"Search"},null,8,["value"]),w("button",{class:"absolute right-0 inline-flex h-7 w-7 items-center justify-center",onClick:t[1]||(t[1]=C=>s.selectedValue=null)},[V(a,{name:"x",class:"w-4"})])])])),(_(!0),R(X,null,le(s.groups,C=>he((_(),R("div",{key:C.key},[C.group&&!C.hideLabel?(_(),R("div",Ka,L(C.group),1)):N("",!0),(_(!0),R(X,null,le(C.items.slice(0,50),(p,y)=>(_(),M(d,{as:"template",key:(p==null?void 0:p.value)||y,value:p},{default:T(({active:$,selected:g})=>[w("li",{class:B(["flex cursor-pointer items-center justify-between rounded px-2.5 py-1.5 text-base",{"bg-gray-100":$}])},[w("div",Wa,[e.$slots["item-prefix"]||e.$props.multiple?(_(),R("div",Ga,[z(e.$slots,"item-prefix",H({ref_for:!0},{active:$,selected:g,option:p}),()=>[s.isOptionSelected(p)?(_(),M(a,{key:0,name:"check",class:"h-4 w-4 text-gray-700"})):(_(),R("div",Ya))])])):N("",!0),w("span",Ha,L(s.getLabel(p)),1),w("span",Ja,L(s.getmobile(p)),1)]),e.$slots["item-suffix"]||p!=null&&p.description?(_(),R("div",Xa,[z(e.$slots,"item-suffix",H({ref_for:!0},{active:$,selected:g,option:p}),()=>[p!=null&&p.description?(_(),R("div",Qa,L(p.description),1)):N("",!0)])])):N("",!0)],2)]),_:2},1032,["value"]))),128))])),[[ge,C.items.length>0]])),128)),s.groups.length==0?(_(),R("li",Za," No results found ")):N("",!0)]),_:3},8,["class"]),e.$slots.footer||o.multiple?(_(),R("div",ei,[z(e.$slots,"footer",te(ie({togglePopover:k})),()=>[o.multiple?(_(),R("div",ti,[s.areAllOptionsSelected?N("",!0):(_(),M(f,{key:0,label:"Select All",onClick:ke(s.selectAll,["stop"])},null,8,["onClick"])),s.areAllOptionsSelected?(_(),M(f,{key:1,label:"Clear All",onClick:ke(s.clearAll,["stop"])},null,8,["onClick"])):N("",!0)])):N("",!0)])])):N("",!0)],2)],512),[[ge,v]])]),_:2},1032,["show"])]),_:3},8,["modelValue","multiple"])}const oi=ze(Ba,[["render",ni]]);function ve(e){Eo.create({position:"top-center",...e})}function Ee(e,t,o,n=null,l=null,s=null){s||(s=o==="check"?"bg-surface-green-3 text-ink-white rounded-md p-px":o==="alert-circle"?"bg-yellow-600 text-ink-white rounded-md p-px":"bg-surface-red-5 text-ink-white rounded-md p-px"),ve({title:e,message:ln?ln(t):t,icon:o,iconClasses:s,timeout:5,style:{backgroundColor:n||"white",color:l||"black"}})}function ln(e){let t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}const li={class:"w-full"},Wn={__name:"Customer",setup(e){let t=ne("base"),o=!1;const n=Vt({doctype:"Customer",fields:["name","mobile_no","customer_group","territory","is_internal_customer"],filters:{disabled:!1},pageLength:Number.MAX_VALUE*2,auto:!0,onSuccess(a){o=!1},onError(a){o||(ve({title:"error",message:Array.isArray(a==null?void 0:a.messages)?a.messages[0]:(a==null?void 0:a.messages)||a||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),o=!0)},transform:a=>a.map(d=>({label:d.name,value:d.name,mobile_no:d.mobile_no,name:d.name,customer_group:d.customer_group,territory:d.territory,is_internal_customer:d.is_internal_customer}))}),l=I(()=>n!=null&&n.data?n.data.map(a=>({mobile_no:a.mobile_no||"",label:a.label||"Unnamed",value:a.value,name:a.name,customer_group:a.customer_group,territory:a.territory,is_internal_customer:a.is_internal_customer})):[]),s=async a=>{await n.fetch(),i.value={mobile_no:a.mobile_no||"",label:a.name||"Unnamed",value:a.name,name:a.name,customer_group:a.customer_group,territory:a.territory,is_internal_customer:a.is_internal_customer}};de(()=>{$e.on("customerCreated",s)}),Se(()=>{$e.off("customerCreated",s)});const i=I({get:()=>t.customer,set:a=>{t.is_return||(t.customer=a)}});return(a,d)=>(_(),R("div",li,[V(oi,{options:l.value,modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=h=>i.value=h),placeholder:"Select Customer"},null,8,["options","modelValue"])]))}},si={class:"w-full h-[94%] flex p-2 gap-4"},ai={class:"w-full h-full"},ii={class:"w-full h-full flex gap-6"},ri={class:"w-[65%] h-full"},ui={class:"w-full h-full shadow-2xl p-4 rounded"},di={class:"h-[6%]"},ci={class:"w-full h-[94%] flex flex-col gap-4"},fi={class:"flex justify-evenly text-center bg-black-overlay-800 text-white rounded-md p-3 h-[6%] items-center"},pi={class:"w-[4%]"},mi=["checked"],vi={class:"h-[92%] overflow-y-scroll rounded scrollbar-hide flex flex-col gap-3 text-center"},hi={key:0,class:"flex justify-center items-center h-full"},gi={class:"flex justify-evenly items-center rounded text-center bg-blue-200 p-2.5"},bi={class:"w-[4%]"},yi=["checked","onChange"],_i={class:"w-[19%]"},xi={class:"w-[19%]"},wi={class:"w-[19%]"},ki={class:"w-[19%]"},Ci={class:"w-[35%] h-full"},Si={class:"w-full h-full shadow-2xl p-4 rounded flex flex-col justify-between"},Oi={class:"flex flex-col gap-4"},$i={class:"flex flex-col gap-6 h-fit"},Pi={class:"text-right"},Vi={__name:"PaymentSelect",setup(e){let t=ne("base");const o=D(""),n=D("credit"),l=D(t.customer.name),s=D(!1),i=D([]);let a=!1;const d=Vt({doctype:"Sales Invoice",fields:["name","customer","grand_total","outstanding_amount"],filters:{outstanding_amount:[">",0],docstatus:1,is_return:0,customer:l.value},orderBy:"creation asc",transform(g){for(let c of g)c.selected=!1;return g},pageLength:Number.MAX_VALUE*2}),h=I(()=>!d.data||!l.value?[]:o.value?d.data.filter(g=>g.name.toLowerCase().includes(o.value.toLowerCase())||g.customer.toLowerCase().includes(o.value.toLowerCase())):d.data),f=I(()=>{var g;return n.value==="credit"?(g=d.data)==null?void 0:g.some(c=>c.selected):n.value==="advanced"?l.value&&i.value.some(c=>c.amount>0):!1}),u=()=>{let g=d.data.reduce((c,O)=>O.selected?c+O.grand_total:c,0);t.paymentAmount=g},m=g=>{g&&g.stopPropagation&&g.stopPropagation(),s.value=g.target.checked,d.data.forEach(c=>{c.selected=s.value}),u()},x=g=>{s.value&&(s.value=!1),g.selected=!g.selected,s.value=d.data.every(c=>c.selected),u()},v=()=>{t.pos_profile.payments.forEach(g=>{i.value.push({mode_of_payment:g.mode_of_payment,amount:0,base_amount:0})}),t.paid_amount=0,t.diff=0},k=()=>{i.value.forEach(g=>{g.amount=0}),t.paymentAmount=0,t.paid_amount=0,t.diff=0,d.data.forEach(g=>{g.selected=!1}),s.value=!1,d.reload()},C=g=>{i.value.forEach((c,O)=>{O===g?c.amount=t.paymentAmount:c.amount=0}),t.paid_amount=t.paymentAmount};Io(()=>{v()});const p=()=>{const g=new Date,c=g.getFullYear(),O=String(g.getMonth()+1).padStart(2,"0"),A=String(g.getDate()).padStart(2,"0");return`${c}-${O}-${A}`},y=async()=>{if(n.value==="credit"){const g=[...i.value].sort((A,E)=>E.amount-A.amount),c=h.value.filter(A=>A.selected);let O=0;for(;O<g.length;){const A=g[O];let E=A.amount;const b=[];for(let S of c){if(E<=0)break;if(S.outstanding_amount<=0)continue;const P=Math.min(E,S.outstanding_amount);S.outstanding_amount-=P,E-=P,b.push({reference_doctype:"Sales Invoice",reference_name:S.name,allocated_amount:P,outstanding_amount:S.outstanding_amount})}A.amount-E>0&&b.length>0&&await $.fetch({action:"Submit",references:b,mode:A.mode_of_payment,amount:A.amount-E}),O++}k()}else if(i.value.reduce((c,O)=>c+(O.amount||0),0)>0){for(const c of i.value)c.amount>0&&await $.fetch({action:"Submit",references:[],mode:c.mode_of_payment,amount:c.amount||0});k()}else ve({title:"Error",message:"Please enter a valid amount for the payment method.",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5})};let $=pe({url:"frappe.desk.form.save.savedocs",makeParams(g){return{doc:JSON.stringify({doctype:"Payment Entry",payment_type:"Receive",posting_date:p(),party_type:"Customer",mode_of_payment:g.mode,party:t.customer.name,paid_from_account_currency:t.pos_profile.currency,paid_from:"Debtors - FITPL",paid_to:"MGR Cash - FITPL",paid_to_account_currency:t.pos_profile.currency,paid_amount:g.amount,base_paid_amount:g.amount,received_amount:g.amount,base_received_amount:g.amount,references:g.references.length>0?g.references:[],reference_no:t.Ant_Opening_Shift.name}),action:g.action}},onSuccess(g){a=!1},onError(g){a||(ve({title:"error",message:Array.isArray(g==null?void 0:g.messages)?g.messages[0]:(g==null?void 0:g.messages)||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),a=!0)}});return Y(()=>t.customer,(g,c)=>{c!=null&&g.name!==c.name&&(l.value=g.name,d.filters.customer=g.name,d.fetch())},{immediate:!0}),Y(()=>i.value.map(g=>g.amount),g=>{const c=g.reduce((O,A)=>O+Number(A||0),0);t.diff=Number(t.paymentAmount||0)-c},{immediate:!0}),(g,c)=>{const O=ue("Button");return _(),R("div",si,[w("div",ai,[w("div",ii,[w("div",ri,[w("div",ui,[w("div",di,[V(Wn)]),w("div",ci,[V(r(lt),{type:"text",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=A=>o.value=A),placeholder:"Search"},{prefix:T(()=>[V(r(J),{class:"w-4",name:"search"})]),_:1},8,["modelValue"]),w("div",fi,[w("div",pi,[w("input",{name:"name",id:"id",type:"checkbox",checked:s.value,class:"text-black rounded-sm focus:outline-none focus:ring-0 focus:border-transparent",onChange:m},null,40,mi)]),c[4]||(c[4]=w("p",{class:"w-[19%]"},"Name",-1)),c[5]||(c[5]=w("p",{class:"w-[19%]"},"Customer",-1)),c[6]||(c[6]=w("p",{class:"w-[19%]"},"Amount",-1)),c[7]||(c[7]=w("p",{class:"w-[19%]"},"Outstanding",-1))]),w("div",vi,[h.value.length===0?(_(),R("div",hi,c[8]||(c[8]=[w("p",{class:"text-gray-500"},"No invoices found",-1)]))):N("",!0),(_(!0),R(X,null,le(h.value,A=>(_(),R("div",{key:A.name,class:"w-full"},[w("div",gi,[w("div",bi,[w("input",{name:"name",id:"id",type:"checkbox",checked:A.selected,class:"text-black rounded-sm focus:outline-none focus:ring-0 focus:border-transparent",onChange:E=>x(A)},null,40,yi)]),w("p",_i,L(A.name),1),w("p",xi,L(A.customer),1),w("p",wi,L(A.grand_total),1),w("p",ki,L(A.outstanding_amount),1)])]))),128))])])])]),w("div",Ci,[w("div",Si,[w("div",Oi,[w("div",$i,[c[9]||(c[9]=w("div",{class:"flex justify-evenly bg-black-overlay-800 text-white rounded-md p-3"},[w("p",null,"Payment Total")],-1)),V(r(ha),{class:"flex",buttons:[{label:"Credit",value:"credit"},{label:"Advanced",value:"advanced"}],modelValue:n.value,"onUpdate:modelValue":c[1]||(c[1]=A=>n.value=A)},null,8,["modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0",disabled:!1,label:"Credit To Redeem",modelValue:r(t).paymentAmount,"onUpdate:modelValue":c[2]||(c[2]=A=>r(t).paymentAmount=A),onChange:u},null,8,["modelValue"])]),w("div",null,[c[10]||(c[10]=w("p",{class:"text-2xl font-bold"},"Payment Method",-1)),(_(!0),R(X,null,le(i.value,(A,E)=>(_(),R("div",{class:"grid grid-cols-2 gap-4 p-2 items-center",key:E},[V(r(W),{type:"number",size:"sm",variant:"subtle",placeholder:"0",disabled:!1,label:`${A.mode_of_payment}:`,modelValue:A.amount,"onUpdate:modelValue":b=>A.amount=b},null,8,["label","modelValue","onUpdate:modelValue"]),V(O,{class:"w-full h-full",variant:"solid",theme:"gray",size:"lg",label:"Button",loading:!1,disabled:!1,onClick:b=>C(E)},{default:T(()=>[ee(L(A.mode_of_payment),1)]),_:2},1032,["onClick"])]))),128)),V(r(W),{type:"number",size:"sm",variant:"subtle",placeholder:"0",disabled:!0,modelValue:r(t).diff,"onUpdate:modelValue":c[3]||(c[3]=A=>r(t).diff=A),label:"Difference:"},null,8,["modelValue"])])]),w("div",Pi,[V(O,{class:"w-full p-2 h-full",variant:"solid",theme:"gray",size:"lg",label:"Button",loading:!1,onClick:y,disabled:!f.value},{default:T(()=>c[11]||(c[11]=[ee(" Submit ",-1)])),_:1,__:[11]},8,["disabled"])])])])])])])}}},Ei={class:"md:w-1/2 w-full shadow-2xl pt-2 px-2 rounded"},Ii={key:0,class:"text-center text-gray-500"},Ai={key:1},Ti={class:"flex justify-between items-center border-b pb-4"},Ri={class:"flex justify-between w-full"},Mi={class:"text-lg font-medium mr-4"},Di={class:"text-sm text-gray-500"},Bi={class:"text-lg font-semibold ml-4"},Fi={__name:"ItemSelector",setup(e){const t=D(""),o=D([]);let n=ne("base");const l=ne("emitter");let s=!1;const i=pe({url:"ant_pos.ant_pos.api.item.scan_barcode",method:"GET",debounce:300,makeParams(){return{search_value:t.value}},validate(v){if(!n.customer.name)return"Customer is required";if(!v.search_value)return"Search value is required"},onSuccess(v){s=!1,v.serial_no&&(v.selected_serial_no=[v.serial_no]),f(v)||a.fetch({search_value:JSON.stringify(v)})},onError(v){s||(ve({title:"error",message:Array.isArray(v==null?void 0:v.messages)?v.messages[0]:(v==null?void 0:v.messages)||v||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),s=!0)}}),a=pe({url:"ant_pos.ant_pos.api.item.items",method:"GET",makeParams(v){return{pos_profile:n.pos_profile.name,search_value:v.search_value,customer:n.customer.name}},validate(v){if(!v.search_value)return"Search value is required"},onError(v){s||(ve({title:"error",message:Array.isArray(v==null?void 0:v.messages)?v.messages[0]:(v==null?void 0:v.messages)||v||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),s=!0)},onSuccess(v){s=!1,h(v)},transform(v){v.selected_serial_no&&v.selected_serial_no.length>0&&(v.selected_serial_no=v.selected_serial_no.map(p=>({label:p,value:p})));let k=null,C=0;if(v.batch_no&&v.batch_no.length>0&&v.has_batch_no){const p=v.batch_nos.find(y=>y.batch_no===v.selected_batch_no);C=p?p.stock_qty:0,k=p?p.expiry_date:null,v.selected_batch_no={label:v.batch_no,value:v.batch_no}}v.custom_id=Date.now()+Math.random(),v.stock_qty=C,v.expiry_date=k,v.net_rate=v.price_list_rate||0}}),d=()=>{s=!1,i.fetch()},h=v=>{v.doctype="Sales Invoice Item",v.parenttype="Sales Invoice",v.custom_id=Date.now()+Math.random(),f(v)||(v.has_batch_no&&v.batch_no&&(v.serial_no_options=v.serial_no_options.filter(k=>v.batch_no&&k.batch_no===v.batch_no).map(k=>({label:k.serial_no,value:k.serial_no})),v.use_serial_batch_fields=1),u(v))},f=v=>{let k=!1;return n.pos_profile.custom_new_items_on_new_line||n.items.forEach((C,p)=>{if(!C.is_return&&v.item_code===C.item_code&&(v.has_batch_no&&C.batch_no&&v.batch_no===(C.batch_no.value||C.batch_no)||!v.has_batch_no)){if(k=!0,v.has_serial_no&&v.selected_serial_no&&v.selected_serial_no.length>0){for(let y of v.selected_serial_no)if(C.selected_serial_no.map(g=>g.value).includes(y))return Ee("warning","Serial-no Already added"),k;C.selected_serial_no.push({label:v.serial_no,value:v.serial_no})}if(C.serial_no&&!v.serial_no)return Ee("warning","Batch already entered"),k;n.items[p].qty+=1,t.value=""}}),k},u=async v=>{n.items.push(v),t.value=""},m=pe({url:"ant_pos.ant_pos.api.sales_invoice.calculate_invoice_item_taxes",method:"POST",auto:!1,debounce:500,makeParams(v){return{...v}},transform(v){return v&&v.items&&v.items.length>0&&v.items.forEach(k=>{k.serial_no&&(k.selected_serial_no=k.serial_no.trim().split(`
`).map(C=>({label:C,value:C}))),k.batch_no?k.selected_batch_no={label:k.batch_no,value:k.batch_no}:k.selected_batch_no=null}),v},onSuccess(v){n.invoice=v,v.items.forEach(k=>{const C=n.items.find(p=>p.custom_id===k.custom_id);if(C)for(const p in k)p!=="custom_id"&&C[p]!==k[p]&&JSON.stringify(C[p])!==JSON.stringify(k[p])&&(C[p]=k[p])}),s=!1},onError(v){ve({title:"error",message:Array.isArray(v==null?void 0:v.messages)?v.messages[0]:(v==null?void 0:v.messages)||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),s=!0}}),x=async()=>{n.items.length!==0&&await m.fetch({doc:JSON.stringify({...n==null?void 0:n.invoice,doctype:"Sales Invoice",is_pos:n.invoice.is_return?n.invoice.is_pos:1,pos_profile:n.pos_profile.name,company:n.pos_profile.company,conversion_rate:1,selling_price_list:n.pos_profile.selling_price_list,items:n.items,customer:n.customer.name,update_stock:1,additional_discount_percentage:n.additional_discount_percentage?Number(n.additional_discount_percentage):0,discount_amount:n.discount_amount?Number(n.discount_amount):0,base_total:n.invoice.base_total||0,custom_ant_opening:n.Ant_Opening_Shift.name,apply_discount_on:n.pos_profile.apply_discount_on})})};return l.on("featchsearchResource"),l.on("calctotal",()=>{x()}),(v,k)=>(_(),R("div",Ei,[w("div",null,[w("div",null,[V(r(W),{type:"text",modelValue:t.value,"onUpdate:modelValue":k[0]||(k[0]=C=>t.value=C),placeholder:"Search Items",size:"sm",variant:"subtle",onKeyup:Ot(d,["enter"]),disabled:r(n).is_return},{prefix:T(()=>[V(r(J),{class:"w-4",name:"search"})]),_:1},8,["modelValue","disabled"]),w("div",null,[o.value.length===0?(_(),R("div",Ii," No items found. Try searching again. ")):(_(),R("div",Ai,[w("div",Ti,[w("div",Ri,[w("span",Mi,L(o.value.item_code),1),k[1]||(k[1]=w("span",{class:"text-sm text-gray-500"},"Qty: 1",-1)),w("span",Di,"Price: "+L(o.value.rate),1),w("span",Bi,L(o.value.serial_no),1)])])]))])])])]))}},zi={class:"md:w-1/2 w-full shadow-2xl pt-2 px-2 rounded"},Li={class:"h-[85%] w-full"},Ni={class:"grid grid-cols-2 gap-4 p-2"},Ui={class:"grid grid-cols-2 gap-4 p-2"},ji={class:"grid grid-cols-3 gap-4 p-2"},qi={class:"h-[14%] w-full mt-2 flex flex-col gap-2"},Ki={class:"h-1/2"},Wi={class:"flex gap-8 h-full mb-3 justify-center items-center"},Gi={class:"h-1/2"},Yi={__name:"Invoice",setup(e){let t=ne("base"),o=!1,n=D({});const l=()=>{t.invoice.paid_amount=t.invoice.base_rounded_total,t.pos_profile.payments.forEach(p=>{!t.invoice.payments.some(y=>y.mode_of_payment===p.mode_of_payment)&&(t.is_return&&p.allow_in_returns||!t.is_return)&&t.invoice.payments.push({mode_of_payment:p.mode_of_payment,amount:Number(p.default)?Number(t.invoice.base_rounded_total):0,base_amount:Number(p.default)?Number(t.invoice.base_rounded_total):0})})},s=p=>{t.invoice.payments.forEach((y,$)=>{$===p?y.amount=t.invoice.base_rounded_total:y.amount=0}),t.invoice.paid_amount=t.invoice.base_rounded_total},i=I({get(){if(!t.invoice.delivery_date){const p=Pt().format("YYYY-MM-DD");t.invoice.delivery_date=p}return t.invoice.delivery_date},set(p){t.invoice.delivery_date=p}});de(()=>{l()});const a=pe({url:"frappe.desk.form.save.savedocs",makeParams(p){return{doc:JSON.stringify(p.doc),action:p.action}},onSuccess(p){o=!1,n.value.doc=p.docs[0]},onError(p){o||(ve({title:"error",message:Array.isArray(p==null?void 0:p.messages)?p.messages[0]:(p==null?void 0:p.messages)||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),o=!0)}}),d=()=>{t.invoice={payments:[],advances:[],items:[],paid_amount:0,rounded_total:0,net_total:0,total_taxes_and_charges:0,total:0,discount_amount:0,grand_total:0,base_rounded_total:0,delivery_date:""},t.is_return=!1,t.items=[],t.customer={}},h=()=>{t.invoice.paid_amount=0,t.invoice.payments.forEach(p=>{p.amount=Number(p.amount),t.invoice.paid_amount+=p.amount}),Array.isArray(t.invoice.advances)&&t.invoice.advances.forEach(p=>{p.allocated_amount>0&&(p.allocated_amount=Number(p.allocated_amount),t.invoice.paid_amount+=p.allocated_amount)})},f=async p=>{await a.fetch({action:"Save",doc:p.value.doc}),await a.fetch({action:"Submit",doc:p.value.doc})},u=async(p=null)=>{var $;if(!t.pos_profile.custom_allow_credit&&t.invoice.paid_amount<t.invoice.rounded_total)return Ee("warning","Credit Not Allowed","alert-circle","#ffcc00","#ffffff");if(!t.pos_profile.custom_allow_partial_payments&&t.invoice.paid_amount-t.invoice.rounded_total>0)return Ee("warning","Partial payment  Not Allowed","alert-circle","#ffcc00","#ffffff");let y={...t.invoice};if(await C()){if(($=t==null?void 0:t.pos_profile)!=null&&$.custom_set_sales_order){const g={...t.invoice,doctype:"Sales Order",name:"",naming_series:""};n.value={doc:g},await f(n);const c=n.value.doc.name;t.invoice.items.forEach((O,A)=>{var E,b;O.so_detail=((b=(E=n.value.doc.items)==null?void 0:E[A])==null?void 0:b.name)||"",O.sales_order=c})}n.value={doc:t.invoice},await f(n),d(),m(y),Ee("success","Invoice submitted successfully","check-circle","green"),p!==null&&x(y.name)}},m=async p=>{if(p.advances.some(y=>y.allocated_amount>0))for(const y of p.payments)y.amount>0&&await k.fetch({payments:y,invoice:p,method:"Submit",change:!0})},x=async p=>{await v.fetch(),t.pos_profile.skip_printview||window.open(`${v.data}/printview?doctype=Sales+Invoice&name=${p}&format=${encodeURIComponent(t.pos_profile.print_format)}&trigger_print=1&no_letterhead=${t.pos_profile.letter_head?1:0}
            &letterhead=${t.pos_profile.letter_head}`,"_blank")},v=pe({url:"ant_pos.ant_pos.utils.get_domain_url"});pe({url:"run_doc_method",auto:!0,makeParams(p){return{docs:{...t.invoice,is_pos:!1,custom_ant_opening:t.Ant_Opening_Shift.name},method:"set_advances"}},onSuccess(p){t.invoice={...p.docs[0],is_pos:!0},l(),o=!1},onError(p){o||(ve({title:"error",message:Array.isArray(p==null?void 0:p.messages)?p.messages[0]:(p==null?void 0:p.messages)||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),o=!0)}});let k=pe({url:"frappe.desk.form.save.savedocs",makeParams(p){return{doc:JSON.stringify({...p.payments,doctype:"Payment Entry",payment_type:"Receive",party_type:"Customer",party:p.invoice.customer,paid_amount:p.payments.amount,received_amount:p.payments.amount,references:[{reference_doctype:"Sales Invoice",reference_name:p.invoice.name,due_date:p.invoice.due_date,allocated_amount:p.payments.amount}],target_exchange_rate:1,company:p.invoice.company,cost_center:p.invoice.cost_center,branch:p.invoice.branch}),action:p.method}},onSuccess(p){o=!1},onError(p){o||(ve({title:"error",message:Array.isArray(p==null?void 0:p.messages)?p.messages[0]:(p==null?void 0:p.messages)||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),o=!0)}});const C=async()=>{let p=0,y=0;if(t.invoice.advances.forEach($=>{$.allocated_amount=Number($.allocated_amount),p+=$.allocated_amount}),t.invoice.payments.forEach($=>{y+=Number($.amount)}),p>0){if(t.invoice.paid_amount>t.invoice.rounded_total)return Ee("warning","Paid amount is greater than rounded total","alert-circle","#ffcc00","#ffffff"),!1;t.invoice.payments=[],t.invoice.is_pos=!1}return!0};return Y(()=>{var y;const p=(y=t==null?void 0:t.invoice)==null?void 0:y.advances;return Array.isArray(p)?p.map($=>$.allocated_amount):[]},(p,y)=>{h()},{deep:!0}),(p,y)=>{var $,g;return _(),R("div",zi,[w("div",Li,[w("div",Ni,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Placeholder",disabled:!0,label:"Amount Paid",value:Number(r(t).invoice.paid_amount).toFixed(2),modelValue:r(t).invoice.paid_amount,"onUpdate:modelValue":y[0]||(y[0]=c=>r(t).invoice.paid_amount=c)},null,8,["value","modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Placeholder",disabled:!0,label:"To Be Paid",value:Number(r(t).invoice.rounded_total).toFixed(2),modelValue:r(t).invoice.rounded_total,"onUpdate:modelValue":y[1]||(y[1]=c=>r(t).invoice.rounded_total=c)},null,8,["value","modelValue"]),r(t).invoice.paid_amount>r(t).invoice.rounded_total?(_(),M(r(W),{key:0,type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Placeholder",disabled:!0,label:"Paid Change",value:Number(r(t).invoice.paid_amount-r(t).invoice.rounded_total).toFixed(2)},null,8,["value"])):N("",!0)]),(_(!0),R(X,null,le((g=($=r(t))==null?void 0:$.pos_profile)==null?void 0:g.payments,(c,O)=>{var A,E,b,S,P,F,U,K;return _(),R("div",{class:"grid grid-cols-2 gap-4 p-2 items-center",key:O},[(E=(A=r(t).invoice)==null?void 0:A.payments)!=null&&E[O]&&((S=(b=r(t).invoice)==null?void 0:b.payments)==null?void 0:S[O].amount)!==void 0?(_(),M(r(W),{key:0,type:"number",size:"sm",variant:"subtle",placeholder:"0.00",disabled:!1,label:c.mode_of_payment,value:Number(r(t).invoice.payments[O].amount).toFixed(2),modelValue:r(t).invoice.payments[O].amount,"onUpdate:modelValue":q=>r(t).invoice.payments[O].amount=q,onChange:y[2]||(y[2]=q=>h())},null,8,["label","value","modelValue","onUpdate:modelValue"])):N("",!0),(F=(P=r(t).invoice)==null?void 0:P.payments)!=null&&F[O]&&((K=(U=r(t).invoice)==null?void 0:U.payments)==null?void 0:K[O].amount)!==void 0?(_(),M(r(Q),{key:1,class:"w-full h-full",variant:"solid",theme:"gray",size:"lg",label:"Button",loading:!1,disabled:!1,onClick:q=>s(O)},{default:T(()=>[ee(L(c.mode_of_payment),1)]),_:2},1032,["onClick"])):N("",!0)])}),128)),w("div",Ui,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Net Total",value:Number(r(t).invoice.net_total).toFixed(2),modelValue:r(t).invoice.net_total,"onUpdate:modelValue":y[3]||(y[3]=c=>r(t).invoice.net_total=c)},null,8,["value","modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Tax and Charges",value:Number(r(t).invoice.total_taxes_and_charges).toFixed(2),modelValue:r(t).invoice.total_taxes_and_charges,"onUpdate:modelValue":y[4]||(y[4]=c=>r(t).invoice.total_taxes_and_charges=c)},null,8,["value","modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Total Amount",value:Number(r(t).invoice.total).toFixed(2),modelValue:r(t).invoice.total,"onUpdate:modelValue":y[5]||(y[5]=c=>r(t).invoice.total=c)},null,8,["value","modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Discount Amount",value:Number(r(t).invoice.discount_amount).toFixed(2),modelValue:r(t).invoice.discount_amount,"onUpdate:modelValue":y[6]||(y[6]=c=>r(t).invoice.discount_amount=c)},null,8,["value","modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Grand Total",value:Number(r(t).invoice.grand_total).toFixed(2),modelValue:r(t).invoice.grand_total,"onUpdate:modelValue":y[7]||(y[7]=c=>r(t).invoice.grand_total=c)},null,8,["value","modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Rounded Total",value:Number(r(t).invoice.rounded_total).toFixed(2),modelValue:r(t).invoice.rounded_total,"onUpdate:modelValue":y[8]||(y[8]=c=>r(t).invoice.rounded_total=c)},null,8,["value","modelValue"])]),(_(!0),R(X,null,le(r(t).invoice.advances,(c,O)=>(_(),R("div",{key:O},[w("div",ji,[V(r(W),{type:"text",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Credit Origin",modelValue:c.reference_name,"onUpdate:modelValue":A=>c.reference_name=A},null,8,["modelValue","onUpdate:modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Total Credit",value:Number(c.advance_amount).toFixed(2),modelValue:c.advance_amount,"onUpdate:modelValue":A=>c.advance_amount=A},null,8,["value","modelValue","onUpdate:modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!1,label:"Credit To Redeem",value:Number(c.allocated_amount).toFixed(2),modelValue:c.allocated_amount,"onUpdate:modelValue":A=>c.allocated_amount=A,onChange:y[9]||(y[9]=A=>h())},null,8,["value","modelValue","onUpdate:modelValue"])])]))),128)),w("div",null,[r(t).pos_profile.custom_set_sales_order?(_(),M(r(yt),{key:0,size:"md",modelValue:i.value,"onUpdate:modelValue":y[10]||(y[10]=c=>i.value=c),variant:"subtle",placeholder:"Delivery Date",disabled:!1},null,8,["modelValue"])):N("",!0)])]),w("div",qi,[w("div",Ki,[w("div",Wi,[V(r(Q),{class:"w-1/2 h-[90%]",variant:"solid",theme:"gray",size:"lg",label:"Submit",loading:!1,disabled:!1,onClick:y[11]||(y[11]=c=>u())},{default:T(()=>y[13]||(y[13]=[ee(" Submit ",-1)])),_:1,__:[13]}),V(r(Q),{class:"w-1/2 h-[90%]",variant:"solid",theme:"gray",size:"lg",label:"Submit & Print",loading:!1,disabled:!1,onClick:y[12]||(y[12]=c=>u("print"))},{default:T(()=>y[14]||(y[14]=[ee(" Submit & Print ",-1)])),_:1,__:[14]})])]),w("div",Gi,[V(r(Q),{class:"w-full h-[90%]",variant:"ghost",size:"lg",label:"Cancel",loading:!1,disabled:!1,onClick:d,theme:"red"},{default:T(()=>y[15]||(y[15]=[ee(" Cancel ",-1)])),_:1,__:[15]})])])])}}},Hi={class:"w-[18.4%]"},Ji={class:"w-[18.4%]"},Xi={class:"w-[18.4%]"},Qi={class:"w-[18.4%]"},Zi={class:"w-[18.4%]"},er={class:"w-[8%] flex items-center justify-center"},tr={key:0,class:"flex flex-col bg-gray-200 w-full py-1 px-3 rounded-b-2xl justify-between"},nr={class:"grid grid-cols-3 w-full gap-4"},or={class:"p-2"},lr={class:"p-2"},sr={class:"p-2"},ar={class:"p-2"},ir={class:"p-2"},rr={class:"p-2"},ur={class:"p-2"},dr={class:"p-2"},cr={class:"p-2"},fr={class:"p-2"},pr={class:"p-2"},mr={class:"p-2"},vr={class:"flex items-center"},hr={class:"w-full"},gr={class:"p-2"},br={class:"grid grid-cols-2 w-full gap-4"},yr={class:"p-2"},_r={class:"p-2"},xr={class:"p-2 flex gap-4"},wr={class:"w-full"},kr={__name:"Item",props:{items:{type:Object,required:!0},index:{type:Number,required:!0}},setup(e){let t=ne("base");const o=ne("emitter"),n=e,l=pe({url:"ant_pos.ant_pos.api.item.get_batches_list",method:"POST",auto:!1,makeParams(g){return{...g}}}),s=Vt({url:"frappe.client.get_list",auto:!1,doctype:"Serial No",fields:["name as serial_no","batch_no"],filters:{warehouse:t.pos_profile.warehouse,item_code:n.items.item_code},pageLength:Number.MAX_VALUE*2,onSuccess(g){n.items.serial_no_options=g.map(c=>({label:c.serial_no,value:c.serial_no,batch_no:c.batch_no}))}}),i=()=>{let g=[];const{has_batch_no:c,batch_no:O}=n.items;return t.is_return?(g=n.items._serial||[],g.map(A=>({label:A,value:A}))):(g=s.data||[],n.items.batch_no!=null&&!t.is_return&&(g=g.filter(A=>A.batch_no===n.items.batch_no)),g.map(A=>({label:A.serial_no,value:A.serial_no})))},a=()=>t.is_return?[{label:n.items.batch_no,value:n.items.batch_no}]:l.data.map(g=>({label:g.batch_id,value:g.batch_id})),d=I(()=>{var g,c;return((c=(g=n.items)==null?void 0:g.serial_no_options)==null?void 0:c.length)||0});Y(()=>n.items.selected_batch_no,(g,c)=>{if(g&&g.value!==(c==null?void 0:c.value)||!c){let O=h();const A=i();!O&&A.length>0&&(n.items.selected_serial_no=[],n.items.serial_no_options=n.items.serial_no_options.filter(b=>b.batch_no==g).map(b=>({label:b.serial_no,value:b.serial_no})),x());const E=l.data.find(b=>b.batch_no===g);n.items.stock_qty=E?E.stock_qty:0,n.items.expiry_date=E?E.expiry_date:null,n.items.batch_no=typeof g=="object"?g==null?void 0:g.value:g,o.emit("calctotal")}});const h=()=>{if(!t.pos_profile.custom_new_items_on_new_line){let g=!1;for(let c=0;c<t.items.length;c++)if(n.index!==c&&t.items[n.index].item_code===t.items[c].item_code&&(t.items[n.index].has_batch_no&&t.items[n.index].batch_no===t.items[c].batch_no&&!t.items[n.index].is_return||!t.items[n.index].has_batch_no))return t.items.selected_serial_no=f(t.items[n.index].selected_serial_no,t.items[c].selected_serial_no),t.items.splice(n.index,1),g=!0,g;return g}},f=(g,c)=>{const O=g.map(b=>b.value),A=c.map(b=>b.value);return[...new Set([...O,...A])].map(b=>({label:b,value:b}))},u=()=>{n.items.amount=Math.abs(n.items.qty)*n.items.rate},m=()=>{if(n.items.serial_no_options){const g=i();g.length>0&&n.items.qty>g.length&&(Ee("warning","Qty is greater than available serial no","alert-circle","#ffcc00","#ffffff"),n.items.qty=t.is_return?-Math.abs(g.length):g.length)}},x=()=>{n.items.serial_no=n.items.selected_serial_no.map(g=>g.value).join(`
`)};Y(()=>n.items.selected_serial_no,(g,c)=>{(n.items.serial_no_options&&g!==c||!c)&&(x(),v(n.items.qty))}),Y(()=>n.items.price_list_rate,(g,c)=>{n.items.price_list_rate&&g!==c&&(n.items.rate=n.items.price_list_rate)}),Y(()=>n.items.qty,(g,c)=>{g!==c&&(i().length>0&&(k(g),m(),x()),o.emit("calctotal"))});const v=()=>{if(i().length<0)return;const c=n.items.qty,O=n.items.selected_serial_no.length;c!=O&&(n.items.qty=t.is_return?-Math.abs(O):O)},k=g=>{const c=i();if(c.length<0)return;const O=n.items.selected_serial_no,A=O.length;if(Math.abs(A)!==Math.abs(g)){if(Math.abs(A)>Math.abs(g))n.items.selected_serial_no=O.slice(0,g);else if(Math.abs(A)<Math.abs(g)){const E=new Set(O.map(P=>P.value)),b=g-A,S=[];for(let P=0;P<c.length&&S.length<b;P++){const F=c[P];E.has(F.value)||S.push(F)}n.items.selected_serial_no=JSON.parse(JSON.stringify([...O,...S]))}}};Y(()=>n.items.discount_percentage,(g,c)=>{(g!==c||!c)&&C()});const C=mn(()=>{n.items.rate=p(n.items),n.items.amount=n.items.rate*Math.abs(n.items.qty),n.items.discount_amount=(n.items.price_list_rate-n.items.rate)*Math.abs(n.items.qty),o.emit("calctotal")},300);t.items.forEach(g=>{Y(()=>g,()=>{u()},{deep:!0})});const p=g=>{const c=g.price_list_rate||g.rate,O=g.discount_percentage||0;return c-c*(O/100)},y=I({get(){if(!t.invoice.delivery_date){const g=Pt().format("YYYY-MM-DD");t.invoice.delivery_date=g}return t.invoice.delivery_date},set(g){t.invoice.delivery_date=g}});Y(()=>n.items.rate,(g,c)=>{g!==c&&$()});const $=()=>{n.items.rate=p(n.items),u()};return de(async()=>{$(),m(n.items.qty),n.items.selected_serial_no&&k(n.items.selected_serial_no.length),n.items.selected_serial_no&&x(),await l.fetch({item_code:n.items.item_code,warehouse:t.pos_profile.warehouse}),await s.fetch(),o.emit("calctotal")}),Se(()=>{u(),o.emit("calctotal")}),(g,c)=>(_(),R("div",null,[w("div",{class:B(["flex bg-gray-200 w-full py-2 px-3 justify-between hover:cursor-pointer text-center",e.items.custom_open?"rounded-t-2xl":"rounded"])},[w("div",{class:"flex items-center h-[100%] rounded hover:bg-gray-300",onClick:c[0]||(c[0]=O=>e.items.custom_open=!e.items.custom_open)},[V(r(J),{name:e.items.custom_open?"chevron-up":"chevron-down",class:"w-5 h-5"},null,8,["name"])]),w("div",Hi,L(e.items.item_code),1),w("div",Ji,L(e.items.qty),1),w("div",Xi,L(e.items.uom),1),w("div",Qi,L(Number(e.items.rate).toFixed(2)),1),w("div",Zi,L(e.items.amount?e.items.amount.toFixed(2):"0.00"),1),w("div",er,[V(r(J),{name:"trash-2",class:"w-5 h-5 rounded hover:bg-red-400 fill-red-700",onClick:c[1]||(c[1]=O=>r(t).items.splice(e.index,1))})])],2),e.items.custom_open?(_(),R("div",tr,[w("div",nr,[w("div",or,[V(r(W),{type:"text",ref_for:!0,size:"sm",variant:"subtle",placeholder:"items Code",disabled:!0,label:"items Code",modelValue:e.items.item_code,"onUpdate:modelValue":c[2]||(c[2]=O=>e.items.item_code=O)},null,8,["modelValue"])]),w("div",lr,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0",disabled:!1,label:"QTY",modelValue:e.items.qty,"onUpdate:modelValue":c[3]||(c[3]=O=>e.items.qty=O)},null,8,["modelValue"])]),w("div",sr,[V(r(W),{type:"text",ref_for:!0,size:"sm",variant:"subtle",placeholder:"UOM",disabled:!0,label:"UOM",modelValue:e.items.uom,"onUpdate:modelValue":c[4]||(c[4]=O=>e.items.uom=O)},null,8,["modelValue"])]),w("div",ar,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",disabled:!r(t).pos_profile.allow_rate_change,label:"Rate",placeholder:"0",value:Number(e.items.rate).toFixed(2),modelValue:e.items.rate,"onUpdate:modelValue":c[5]||(c[5]=O=>e.items.rate=O)},null,8,["disabled","value","modelValue"])]),w("div",ir,[V(r(W),{type:"text",ref_for:!0,size:"sm",variant:"subtle",disabled:!0,label:"Price List Rate",placeholder:"0",value:Number(e.items.price_list_rate).toFixed(2),modelValue:e.items.price_list_rate,"onUpdate:modelValue":c[6]||(c[6]=O=>e.items.price_list_rate=O)},null,8,["value","modelValue"])]),w("div",rr,[V(r(W),{type:"text",ref_for:!0,size:"sm",variant:"subtle",disabled:!0,label:"Net Rate",placeholder:"0",value:Number(e.items.net_rate).toFixed(2),modelValue:e.items.net_rate,"onUpdate:modelValue":c[7]||(c[7]=O=>e.items.net_rate=O)},null,8,["value","modelValue"])]),w("div",ur,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Discount Percentage",disabled:!1,label:"Discount Percentage",modelValue:e.items.discount_percentage,"onUpdate:modelValue":c[8]||(c[8]=O=>e.items.discount_percentage=O)},null,8,["modelValue"])]),w("div",dr,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",disabled:!0,label:"Discount Amount",placeholder:"0",value:Number(e.items.discount_amount).toFixed(2),modelValue:e.items.discount_amount,"onUpdate:modelValue":c[9]||(c[9]=O=>e.items.discount_amount=O)},null,8,["value","modelValue"])]),w("div",cr,[V(r(W),{type:"text",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Group",disabled:!0,label:"Group",modelValue:e.items.item_group,"onUpdate:modelValue":c[10]||(c[10]=O=>e.items.item_group=O)},null,8,["modelValue"])]),w("div",fr,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Stock Qty",disabled:!0,label:"Stock Qty",modelValue:e.items.stock_qty,"onUpdate:modelValue":c[11]||(c[11]=O=>e.items.stock_qty=O)},null,8,["modelValue"])]),w("div",pr,[V(r(W),{type:"text",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Stock UOM",disabled:!0,label:"Stock UOM",modelValue:e.items.stock_uom,"onUpdate:modelValue":c[12]||(c[12]=O=>e.items.stock_uom=O)},null,8,["modelValue"])]),w("div",mr,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Serial No Qty",disabled:!0,label:"Serial No Qty",modelValue:d.value,"onUpdate:modelValue":c[13]||(c[13]=O=>d.value=O)},null,8,["modelValue"])]),w("div",vr,[r(t).pos_profile.custom_set_sales_order?(_(),M(r(yt),{key:0,size:"sm",variant:"subtle",label:"Delivery Date",placeholder:"Delivery Date",disabled:!1,modelValue:y.value,"onUpdate:modelValue":c[14]||(c[14]=O=>y.value=O),unique:!0},null,8,["modelValue"])):N("",!0)])]),w("div",hr,[w("div",gr,[V(r(ht),{options:i(),placeholder:"Serial No",multiple:!0,modelValue:e.items.selected_serial_no,"onUpdate:modelValue":c[15]||(c[15]=O=>e.items.selected_serial_no=O)},null,8,["options","modelValue"])]),w("div",br,[w("div",yr,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Batch No Available QTY",disabled:!1,label:"Batch No Available QTY",modelValue:e.items.stock_qty,"onUpdate:modelValue":c[16]||(c[16]=O=>e.items.stock_qty=O)},null,8,["modelValue"])]),w("div",_r,[V(r(yt),{size:"sm",variant:"subtle",label:"Expiry Date",placeholder:"Expiry Date",disabled:!1,modelValue:e.items.expiry_date,"onUpdate:modelValue":c[17]||(c[17]=O=>e.items.expiry_date=O)},null,8,["modelValue"])])]),w("div",null,[w("div",xr,[w("div",wr,[V(r(ht),{type:"select",options:a(),size:"sm",variant:"subtle",placeholder:"Batch No",disabled:r(t).is_return,label:"Batch No",modelValue:e.items.selected_batch_no,"onUpdate:modelValue":c[18]||(c[18]=O=>e.items.selected_batch_no=O),hideSearch:!0},null,8,["options","disabled","modelValue"])])])])])])):N("",!0)]))}},Cr={class:"md:w-1/2 w-full h-full flex flex-col gap-2"},Sr={class:"h-[80%] w-full rounded-lg shadow-2xl px-2 pt-2"},Or={class:"flex gap-4 h-[5%]"},$r={class:"py-2 h-[93%] overflow-y-scroll scrollbar-hide flex flex-col items-center w-full"},Pr={class:"h-[20%] flex shadow-2xl rounded"},Vr={class:"w-[60%] grid grid-cols-2 gap-4 p-4 h-full"},Er={class:"w-[40%] h-full grid grid-cols-2 gap-2 p-4"},Ir={__name:"ItemDetail",setup(e){const{loadComponent:t}=ne("dynamicComponent"),o=pe({url:"ant_pos.ant_pos.utils.get_domain_url"});let n=ne("base"),l="";const s=ne("emitter");let i=!1,a=pe({url:"frappe.desk.form.save.savedocs",makeParams(u){return n.items.forEach(m=>{m.has_serial_no&&m.selected_serial_no.length!==m.qty&&(ve({title:"error",message:"Serial number is required",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),i=!0)}),l=u.status,{doc:JSON.stringify({...n==null?void 0:n.invoice,doctype:"Sales Invoice",is_pos:n.invoice.is_return?n.invoice.is_pos:1,pos_profile:n.pos_profile.name,company:n.pos_profile.company,conversion_rate:1,selling_price_list:n.pos_profile.selling_price_list,items:n.items,customer:n.customer.name,update_stock:1,additional_discount_percentage:Number(n.additional_discount_percentage)||0,discount_amount:Number(n.discount_amount)||0,base_total:n.invoice.base_total&&n.invoice.base_total,custom_ant_opening:n.Ant_Opening_Shift.name,apply_discount_on:n.pos_profile.apply_discount_on,payments:d()}),action:u.action}},async onSuccess(u){if(i=!1,l=="pay"){n.invoice=u.docs[0];return}else l=="print"&&(await o.fetch(),window.open(`${o.data}/printview?doctype=Sales+Invoice&name=${u.docs[0].name}&format=${encodeURIComponent(n.pos_profile.print_format)}&trigger_print=1&no_letterhead=${n.pos_profile.letter_head?1:0}
                    &letterhead=${n.pos_profile.letter_head}`,"_blank"));f()},onError(u){i||(ve({title:"error",message:Array.isArray(u==null?void 0:u.messages)?u.messages[0]:(u==null?void 0:u.messages)||u||"An error occurred",icon:"x-circle",iconClasses:"bg-surface-red-5 text-ink-white rounded-md p-px",position:"top-center",timeout:5}),i=!0)}});const d=()=>{const u=n.is_return?-Math.abs(n.invoice.rounded_total):n.invoice.rounded_total;return n.invoice.payments.map(x=>{const v=x.default?u:0;return{...x,amount:v,base_amount:v}})},h=()=>{var m;let u=n.pos_profile.apply_discount_on==="grand_total"?n.invoice.grand_total:n.invoice.base_net_total+((m=n.invoice)==null?void 0:m.discount_amount);n.pos_profile.custom_use_percentage_discount?n.discount_amount=u*100/n.additional_discount_percentage:n.additional_discount_percentage=n.discount_amount*(100/u)};Y(()=>n.discount_amount,(u,m)=>{!n.pos_profile.custom_use_percentage_discount&&u!==m&&(h(),s.emit("calctotal"))},{flush:"post"}),Y(()=>n.additional_discount_percentage,(u,m)=>{n.pos_profile.custom_use_percentage_discount&&u!==m&&(h(),s.emit("calctotal"))},{flush:"post"});const f=()=>{n.invoice={},n.items=[],n.customer={},n.discount_amount=0};return(u,m)=>(_(),R("div",Cr,[w("div",Sr,[w("div",Or,[V(Wn),V(r(Q),{class:"w-1/12",onClick:m[1]||(m[1]=x=>{r(t)("CustomerForm")}),variant:"solid",ref_for:!0,theme:"gray",size:"sm",label:"Button",loading:!1,loadingText:null,disabled:!1,link:null},{default:T(()=>[V(r(J),{class:"w-4 cursor-pointer",name:"plus",onClick:m[0]||(m[0]=x=>{r(t)("CustomerForm")})})]),_:1})]),w("div",$r,[m[12]||(m[12]=Ao('<div class="mb-2 w-full flex flex-col items-center"><div class="flex bg-gray-200 w-full py-2 px-3 justify-between rounded text-center"><div class="w-[18.4%]"> Item Code </div><div class="w-[18.4%]"> QTY </div><div class="w-[18.4%]"> UOM </div><div class="w-[18.4%]"> Rate </div><div class="w-[18.4%]"> Amount </div><div class="w-[8%]"> Remove </div></div></div>',1)),(_(!0),R(X,null,le(r(n).items,(x,v)=>(_(),R("div",{key:x.custom_id,class:"flex flex-col justify-between mb-2 w-full"},[V(kr,{items:x,index:v},null,8,["items","index"])]))),128))])]),w("div",Pr,[w("div",Vr,[V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Total Qty",modelValue:r(n).invoice.total_qty,"onUpdate:modelValue":m[2]||(m[2]=x=>r(n).invoice.total_qty=x)},null,8,["modelValue"]),r(n).pos_profile.custom_use_percentage_discount?(_(),M(r(W),{key:0,type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!r(n).pos_profile.allow_discount_change,label:"Additional Discount (%)",modelValue:r(n).additional_discount_percentage,"onUpdate:modelValue":m[3]||(m[3]=x=>r(n).additional_discount_percentage=x)},null,8,["disabled","modelValue"])):(_(),M(r(W),{key:1,type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!r(n).pos_profile.allow_discount_change,label:`Additional Discount (${r(n).pos_profile.currency})`,modelValue:r(n).discount_amount,"onUpdate:modelValue":m[4]||(m[4]=x=>r(n).discount_amount=x),value:Number(r(n).discount_amount).toFixed(2)},null,8,["disabled","label","modelValue","value"])),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Net Total",class:B(""),value:Number(r(n).invoice.net_total).toFixed(2),modelValue:r(n).invoice.net_total,"onUpdate:modelValue":m[5]||(m[5]=x=>r(n).invoice.net_total=x)},null,8,["value","modelValue"]),V(r(W),{type:"number",ref_for:!0,size:"sm",variant:"subtle",placeholder:"0.00",disabled:!0,label:"Total",class:B(""),value:Number(r(n).invoice.grand_total).toFixed(2),modelValue:r(n).invoice.grand_total,"onUpdate:modelValue":m[6]||(m[6]=x=>r(n).invoice.grand_total=x)},null,8,["value","modelValue"])]),w("div",Er,[V(r(Q),{ref_for:!0,label:"Button",loading:!1,loadingText:null,disabled:!1,link:null,theme:"blue",onClick:m[7]||(m[7]=x=>r(t)("Held"))},{default:T(()=>m[13]||(m[13]=[ee(" HELD ",-1)])),_:1,__:[13]}),V(r(Q),{ref_for:!0,label:"Button",loading:!1,loadingText:null,disabled:!1,link:null,theme:"red",onClick:m[8]||(m[8]=x=>r(t)("Return"))},{default:T(()=>m[14]||(m[14]=[ee(" RETURN ",-1)])),_:1,__:[14]}),V(r(Q),{ref_for:!0,label:"Button",loading:!1,loadingText:null,disabled:!1,link:null,variant:"solid",theme:"gray",onClick:m[9]||(m[9]=x=>r(a).fetch({action:"Save",status:"save_new"}))},{default:T(()=>m[15]||(m[15]=[ee(" SAVE/NEW ",-1)])),_:1,__:[15]}),V(r(Q),{ref_for:!0,label:"Button",loading:!1,loadingText:null,disabled:!1,link:null,theme:"green",onClick:m[10]||(m[10]=x=>r(a).fetch({action:"Save",status:"pay"}))},{default:T(()=>m[16]||(m[16]=[ee(" PAY ",-1)])),_:1,__:[16]}),V(r(Q),{ref_for:!0,label:"Button",loading:!1,loadingText:null,disabled:!1,link:null,variant:"solid",theme:"gray",onClick:m[11]||(m[11]=x=>r(a).fetch({action:"Save",status:"print"}))},{default:T(()=>m[17]||(m[17]=[ee(" SAVE & PRINT ",-1)])),_:1,__:[17]})])])]))}},Ar={class:"w-full h-[94%] flex p-2 gap-4"},Tr={class:"w-full h-full flex flex-col md:flex-row gap-4"},Rr={__name:"Pos",setup(e){let t=ne("base");const o={Invoice:Yi,ItemSelector:Fi};return(n,l)=>{var s,i;return _(),R("div",Ar,[w("div",Tr,[(_(),M(Oe(o[(i=(s=r(t))==null?void 0:s.invoice)!=null&&i.status?"Invoice":"ItemSelector"]))),V(Ir)])])}}},Mr={};function Dr(e,t){return null}const Br=ze(Mr,[["render",Dr]]),Fr={__name:"Platform",props:{collapse:{type:Boolean,required:!0}},setup(e){const t=e,o=ne("base"),n={PaymentSelect:Vi,Pos:Rr,SalesInvoice:Br},l=I(()=>o.page==="payments"?"PaymentSelect":o.page==="salesinvoice"?"SalesInvoice":"Pos");return $e.on("updatePage",s=>{o.items=[],o.invoice={},o.customer={},o.page=s}),(s,i)=>(_(),R("div",{class:B(["w-full h-full",t.collapse?"xl:w-[97%]":"xl:w-[90%]"])},[V(Da),(_(),M(Oe(n[l.value])))],2))}};function zr(){const e=D(null);return{currentComponent:e,loadComponent:async o=>{try{const n={OpenShift:()=>Ae(()=>import("./Open-Shift-D842KrNy.js"),__vite__mapDeps([0,1,2])),CustomerForm:()=>Ae(()=>import("./CustomerForm-2IbgNcwZ.js"),__vite__mapDeps([3,1,2])),Held:()=>Ae(()=>import("./Held-BWML67yd.js"),__vite__mapDeps([4,1,2])),Return:()=>Ae(()=>import("./Return-BKxkI4r_.js"),__vite__mapDeps([5,1,2])),CloseShift:()=>Ae(()=>import("./CloseShift-5v09lil1.js"),__vite__mapDeps([6,1,2])),Settings:()=>Ae(()=>import("./Settings-D_40_l9z.js"),__vite__mapDeps([7,1,2]))};if(n[o]){e.value=null,await new Promise(s=>setTimeout(s,0));const l=await n[o]();e.value=l.default}else console.error(`Component "${o}" not found.`),e.value=null}catch(n){console.error("Error loading component:",n),e.value=null}}}}const Lr={class:"w-screen h-screen flex select-none"},Nr={key:0},Ur={__name:"Pos",setup(e){const t=D(!0),{currentComponent:o,loadComponent:n}=zr(),{brand:l}=Bt();return n("OpenShift"),Fe("dynamicComponent",{currentComponent:o,loadComponent:n}),ga(()=>({icon:l.favicon?l.favicon:"/assets/ant_pos/antPOS.png"})),$e.on("trigger_collapse",()=>{t.value=!t.value}),(s,i)=>(_(),R("div",Lr,[r(o)?(_(),R("div",Nr,[(_(),M(Oe(r(o)),{onSwitchComponent:r(n)},null,40,["onSwitchComponent"]))])):N("",!0),V(Ea,{class:B(s.w-s.full),collapse:t.value},null,8,["class","collapse"]),V(Fr,{collapse:t.value},null,8,["collapse"])]))}},Kr=Object.freeze(Object.defineProperty({__proto__:null,default:Ur},Symbol.toStringTag,{value:"Module"}));export{Kr as P,W as _,Xt as a,ve as c,$e as e,Bt as g,zr as u};
//# sourceMappingURL=Pos-DZFo8QfI.js.map
