import{v as S,r as c,D as U,b3 as v,w as D,U as N,R as f,$ as u,Z as r,u as s,ac as O,ae as b,S as l,Q as y,a6 as T,F as A,a9 as B,aa as E,ba as $}from"./index-W9TX4JPH.js";import{_ as g}from"./Pos-DZFo8QfI.js";const z={class:"flex flex-col gap-8"},F={key:0},M={class:"border-2"},G={class:"w-1/2"},R={class:""},q={__name:"Open-Shift",setup(L){const n=S({company:[],profile:{}}),p=c(!1),t=c({}),i=c({}),m=c([]),d=S({});let C=U("base");const _=()=>{w.fetch()},P=v({url:"ant_pos.ant_pos.api.pos_profile.create_opening",method:"POST",onSuccess(a){}}),h=async()=>{const a={company:t.value.value||null,pos_profile:i.value.value||null,status:"Open",opening_balance_details:m.value.map(e=>({mode_of_payment:e,opening_amount:d[e]||0}))};try{await P.submit({values:a}),_()}catch(e){errorMessage.value="Failed to submit data. Please try again.",console.error("Submission Error:",e)}finally{}},x=()=>{if(V()){const e=n.profile[t.value.value].find(o=>o.name===i.value.value);return e?e.modes_of_payment:[]}return[]},V=()=>{const a=n.profile[t.value.value];return a?a.map(e=>e.name):[]},k=()=>{v({url:"ant_pos.ant_pos.api.pos_profile.get_pos_profiles_by_company",method:"GET",onSuccess(e){e&&typeof e=="object"&&(n.company=Object.keys(e),n.profile=e)}}).fetch(),p.value=!0},w=v({url:"ant_pos.ant_pos.api.pos_profile.get_openingshift",method:"GET",auto:!0,onSuccess(a){a?(Object.assign(C,a),p.value=!1):k()}});return D(i,(a,e)=>{a.value!==e.value&&(m.value=x())}),(a,e)=>(f(),N(s($),{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=o=>p.value=o),onClose:_},{"body-title":u(()=>e[3]||(e[3]=[l("h3",null,"Create ANT Opening Shift",-1)])),"body-content":u(()=>[l("div",z,[r(s(g),{type:"autocomplete",options:n.company.map(o=>({label:o,value:o})),size:"sm",variant:"subtle",placeholder:"Select Company",label:"Company",modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value=o)},null,8,["options","modelValue"]),r(s(g),{type:"autocomplete",options:V(),size:"sm",variant:"subtle",placeholder:"Select POS Profile",disabled:!t.value,label:"POS Profile",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o)},null,8,["options","disabled","modelValue"]),m.value.length?(f(),y("div",F,[l("div",M,[e[4]||(e[4]=l("div",{class:"p-2 flex justify-between"},[l("div",{class:"text-center"},"Mode Of Payment"),b(" Opening Amount ")],-1)),(f(!0),y(A,null,B(m.value,o=>(f(),y("div",{class:"flex justify-between p-2 border-t-2",key:o},[l("div",G,E(o),1),l("div",R,[r(s(g),{type:"number",size:"sm",variant:"subtle",placeholder:"Opening Amount",name:o,modelValue:d[o],"onUpdate:modelValue":j=>d[o]=j},null,8,["name","modelValue","onUpdate:modelValue"])])]))),128))])])):T("",!0)])]),actions:u(()=>[r(s(O),{variant:"solid",onClick:h},{default:u(()=>e[5]||(e[5]=[b("Confirm",-1)])),_:1,__:[5]}),r(s(O),{class:"ml-2",onClick:_},{default:u(()=>e[6]||(e[6]=[b("Close",-1)])),_:1,__:[6]})]),_:1},8,["modelValue"]))}};export{q as default};
//# sourceMappingURL=Open-Shift-D842KrNy.js.map
