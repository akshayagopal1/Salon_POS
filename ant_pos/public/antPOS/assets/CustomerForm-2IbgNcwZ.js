import{r as p,D as x,b6 as i,c as d,b3 as z,U as E,R as N,$ as u,Z as a,u as r,ac as c,ae as v,S as g,ba as S}from"./index-W9TX4JPH.js";import{e as O,_ as s}from"./Pos-DZFo8QfI.js";const k={class:"grid grid-cols-2 gap-5 w-full place-items-stretch"},T={__name:"CustomerForm",setup(B){const m=p(!0),y=x("base"),t=p({customer_name:"",mobile_no:"",email_id:"",gender:"",customer_type:"Individual",customer_group:"",territory:"",posa_referral_company:y.pos_profile.company,gst_category:"Unregistered"}),f=i({doctype:"Gender",fields:["name"],pageLength:10,auto:!0,transform:l=>l.map(e=>e.name)}),V=i({doctype:"Territory",fields:["name"],filters:{is_group:0},pageLength:5e3,orderBy:"name",auto:!0,transform:l=>l.map(e=>e.name)}),_=i({doctype:"Customer Group",fields:["name"],filters:{is_group:0},pageLength:1e3,orderBy:"name",auto:!0,transform:l=>l.map(e=>e.name)}),b=d(()=>f.data||[]),C=d(()=>_.data||[]),U=d(()=>V.data||[]),n=()=>{m.value=!1},G=z({method:"POST",url:"frappe.client.insert",makeParams(){var l,e,o;return{doc:{doctype:"Customer",...t.value,gender:((l=t.value.gender)==null?void 0:l.value)??null,customer_group:((e=t.value.customer_group)==null?void 0:e.value)??null,territory:((o=t.value.territory)==null?void 0:o.value)??null}}},onSuccess(l){O.emit("customerCreated",l),n()},onError(l){console.error("Error:",l)}});return(l,e)=>(N(),E(r(S),{options:{size:"2xl"},modelValue:m.value,"onUpdate:modelValue":e[7]||(e[7]=o=>m.value=o),onClose:n,onAfterLeave:n},{"body-title":u(()=>e[8]||(e[8]=[g("h3",null,"Create Customer",-1)])),"body-content":u(()=>[g("div",k,[a(r(s),{type:"text",label:"Customer Name",modelValue:t.value.customer_name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.customer_name=o),placeholder:"Enter Customer Name",size:"sm"},null,8,["modelValue"]),a(r(s),{type:"text",label:"Mobile Number",modelValue:t.value.mobile_no,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.mobile_no=o),placeholder:"Enter Mobile Number",size:"sm"},null,8,["modelValue"]),a(r(s),{type:"email",label:"Email ID",modelValue:t.value.email_id,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.email_id=o),placeholder:"Enter Email ID",size:"sm"},null,8,["modelValue"]),a(r(s),{type:"autocomplete",label:"Gender",modelValue:t.value.gender,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.gender=o),options:b.value,placeholder:"Select Gender",size:"sm"},null,8,["modelValue","options"]),a(r(s),{type:"autocomplete",label:"Customer Group",modelValue:t.value.customer_group,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.customer_group=o),options:C.value,placeholder:"Select Customer Group",size:"sm"},null,8,["modelValue","options"]),a(r(s),{type:"autocomplete",label:"Territory",modelValue:t.value.territory,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.territory=o),options:U.value,placeholder:"Select Territory",size:"sm"},null,8,["modelValue","options"])])]),actions:u(()=>[a(r(c),{variant:"solid",onClick:e[6]||(e[6]=o=>r(G).fetch({}))},{default:u(()=>e[9]||(e[9]=[v("Submit",-1)])),_:1,__:[9]}),a(r(c),{class:"ml-2",onClick:n},{default:u(()=>e[10]||(e[10]=[v("Close",-1)])),_:1,__:[10]})]),_:1},8,["modelValue"]))}};export{T as default};
//# sourceMappingURL=CustomerForm-2IbgNcwZ.js.map
