import{j as V,r as c,i as U,aK as v,w as j,B as z,C as f,D as r,E as p,u as s,aq as k,ar as b,ag as a,aj as _,ak as F,F as M,an as D,ao as T,aT as E}from"./index-BSAhIZmI.js";import{_ as g}from"./Pos-BCPVCKkp.js";const N={class:"flex flex-col gap-8",style:{"background-color":"#ffffff !important",color:"#82868f !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},R={key:0},A={class:"border-2",style:{"border-color":"#4e60ac !important"}},I={class:"w-1/2"},G={class:""},L={__name:"Open-Shift",setup($){const n=V({company:[],profile:{}}),u=c(!1),l=c({}),i=c({}),m=c([]),d=V({});let h=U("base");const y=()=>{P.fetch()},x=v({url:"ant_pos.ant_pos.api.pos_profile.create_opening",method:"POST",onSuccess(t){}}),O=async()=>{const t={company:l.value.value||null,pos_profile:i.value.value||null,status:"Open",opening_balance_details:m.value.map(e=>({mode_of_payment:e,opening_amount:d[e]||0}))};try{await x.submit({values:t}),y()}catch(e){errorMessage.value="Failed to submit data. Please try again.",console.error("Submission Error:",e)}finally{}},w=()=>{if(S()){const e=n.profile[l.value.value].find(o=>o.name===i.value.value);return e?e.modes_of_payment:[]}return[]},S=()=>{const t=n.profile[l.value.value];return t?t.map(e=>e.name):[]},C=()=>{v({url:"ant_pos.ant_pos.api.pos_profile.get_pos_profiles_by_company",method:"GET",onSuccess(e){e&&typeof e=="object"&&(n.company=Object.keys(e),n.profile=e)}}).fetch(),u.value=!0},P=v({url:"ant_pos.ant_pos.api.pos_profile.get_openingshift",method:"GET",auto:!0,onSuccess(t){t?(Object.assign(h,t),u.value=!1):C()}});return j(i,(t,e)=>{t.value!==e.value&&(m.value=w())}),(t,e)=>(f(),z(s(E),{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o),onClose:y},{"body-title":r(()=>[...e[3]||(e[3]=[a("h3",{style:{color:"#4e60ac !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},"Create ANT Opening Shift",-1)])]),"body-content":r(()=>[a("div",N,[p(s(g),{type:"autocomplete",options:n.company.map(o=>({label:o,value:o})),size:"sm",variant:"subtle",placeholder:"Select Company",label:"Company",modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o)},null,8,["options","modelValue"]),p(s(g),{type:"autocomplete",options:S(),size:"sm",variant:"subtle",placeholder:"Select POS Profile",disabled:!l.value,label:"POS Profile",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value=o)},null,8,["options","disabled","modelValue"]),m.value.length?(f(),_("div",R,[a("div",A,[e[4]||(e[4]=a("div",{class:"p-2 flex justify-between",style:{"background-color":"#4e60ac !important",color:"white !important","font-weight":"600 !important"}},[a("div",{class:"text-center"},"Mode Of Payment"),b(" Opening Amount ")],-1)),(f(!0),_(M,null,D(m.value,o=>(f(),_("div",{class:"flex justify-between p-2 border-t-2",key:o},[a("div",I,T(o),1),a("div",G,[p(s(g),{type:"number",size:"sm",variant:"subtle",placeholder:"Opening Amount",name:o,modelValue:d[o],"onUpdate:modelValue":B=>d[o]=B},null,8,["name","modelValue","onUpdate:modelValue"])])]))),128))])])):F("",!0)])]),actions:r(()=>[p(s(k),{variant:"solid",onClick:O,style:{"background-color":"#4e60ac !important","border-color":"#4e60ac !important",color:"white !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},{default:r(()=>[...e[5]||(e[5]=[b("Confirm",-1)])]),_:1}),p(s(k),{class:"ml-2",onClick:y,style:{"background-color":"#7c8bca !important","border-color":"#7c8bca !important",color:"white !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},{default:r(()=>[...e[6]||(e[6]=[b("Close",-1)])]),_:1})]),_:1},8,["modelValue"]))}};export{L as default};
//# sourceMappingURL=Open-Shift-DS8nm0F9.js.map
