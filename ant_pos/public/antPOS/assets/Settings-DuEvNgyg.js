import{av as F,aj as w,C as g,ag as a,G as U,H as R,I as N,B as _,D as h,E as f,ak as v,u as l,aq as y,ar as b,ao as c,i as z,r as B,am as S,aV as C,aT as O}from"./index-BsfeXoGf.js";import{g as V,a as E,_ as $}from"./Pos-KCdXzYUv.js";class M{constructor(){this.listeners={},this.failed=!1}on(t,e){this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e)}trigger(t,e){(this.listeners[t]||[]).forEach(r=>{r.call(this,e)})}upload(t,e){return new Promise((p,r)=>{let o=new XMLHttpRequest;o.upload.addEventListener("loadstart",()=>{this.trigger("start")}),o.upload.addEventListener("progress",d=>{d.lengthComputable&&this.trigger("progress",{uploaded:d.loaded,total:d.total})}),o.upload.addEventListener("load",()=>{this.trigger("finish")}),o.addEventListener("error",()=>{this.trigger("error"),r()}),o.onreadystatechange=()=>{if(o.readyState==XMLHttpRequest.DONE){let d;if(o.status===200){let u=null;try{u=JSON.parse(o.responseText)}catch{u=o.responseText}let x=u.message||u;p(x)}else if(o.status===403)d=JSON.parse(o.responseText);else{this.failed=!0;try{d=JSON.parse(o.responseText)}catch{}}d&&d.exc&&console.error(JSON.parse(d.exc)[0]),r(d)}};const s=e.upload_endpoint||"/api/method/upload_file";o.open("POST",s,!0),o.setRequestHeader("Accept","application/json"),window.csrf_token&&window.csrf_token!=="{{ csrf_token }}"&&o.setRequestHeader("X-Frappe-CSRF-Token",window.csrf_token);let i=new FormData;t&&i.append("file",t,t.name),i.append("is_private",e.private?"1":"0"),i.append("folder",e.folder||"Home"),e.file_url&&i.append("file_url",e.file_url),e.doctype&&i.append("doctype",e.doctype),e.docname&&i.append("docname",e.docname),e.fieldname&&i.append("fieldname",e.fieldname),e.method&&i.append("method",e.method),e.type&&i.append("type",e.type),e.optimize&&(i.append("optimize","1"),e.max_width&&i.append("max_width",e.max_width.toString()),e.max_height&&i.append("max_height",e.max_height.toString())),o.send(i)})}}const T={name:"FileUploader",props:{fileTypes:{type:[String,Array]},uploadArgs:{type:Object},validateFile:{type:Function,default:null}},data(){return{uploader:null,uploading:!1,uploaded:0,error:null,message:"",total:0,file:null,finishedUploading:!1}},computed:{progress(){let n=Math.floor(this.uploaded/this.total*100);return isNaN(n)?0:n},success(){return this.finishedUploading&&!this.error}},methods:{inputRef(){return this.$refs.input},openFileSelector(){this.$refs.input.click()},async onFileAdd(n){if(this.error=null,this.file=n.target.files[0],this.file&&this.validateFile)try{let t=await this.validateFile(this.file);t&&(this.error=t)}catch(t){this.error=t}this.error||this.uploadFile(this.file)},async uploadFile(n){this.error=null,this.uploaded=0,this.total=0,this.uploader=new M,this.uploader.on("start",()=>{this.uploading=!0}),this.uploader.on("progress",t=>{this.uploaded=t.uploaded,this.total=t.total}),this.uploader.on("error",()=>{this.uploading=!1,this.error="Error Uploading File"}),this.uploader.on("finish",()=>{this.uploading=!1,this.finishedUploading=!0}),this.uploader.upload(n,this.uploadArgs||{}).then(t=>{this.$emit("success",t)}).catch(t=>{this.uploading=!1;let e="Error Uploading File";t!=null&&t._server_messages?e=JSON.parse(JSON.parse(t._server_messages)[0]).message:t!=null&&t.exc&&(e=JSON.parse(t.exc)[0].split(`
`).slice(-2,-1)[0]),this.error=e,this.$emit("failure",t)})}},expose:["inputRef"]},A=["accept"];function I(n,t,e,p,r,o){return g(),w("div",null,[a("input",{ref:"input",type:"file",accept:e.fileTypes,class:"hidden",onChange:t[0]||(t[0]=(...s)=>o.onFileAdd&&o.onFileAdd(...s))},null,40,A),U(n.$slots,"default",R(N({file:r.file,uploading:r.uploading,progress:o.progress,uploaded:r.uploaded,message:r.message,error:r.error,total:r.total,success:o.success,openFileSelector:o.openFileSelector})))])}const j=F(T,[["render",I]]),L={class:"flex items-end space-x-1"},k={__name:"ImageUploader",props:{image_url:String,image_type:{type:String,default:"image/*"},label:{type:String,default:""}},emits:["upload","remove"],setup(n,{emit:t}){return(e,p)=>(g(),_(l(j),{"file-types":n.image_type,class:"text-base",onSuccess:p[1]||(p[1]=r=>{e.$emit("upload",r.file_url)})},{default:h(({progress:r,uploading:o,openFileSelector:s})=>[a("div",L,[f(l(y),{onClick:s,style:{"background-color":"#4e60ac !important","border-color":"#4e60ac !important",color:"white !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},{default:h(()=>[b(c(o?`Uploading ${r}%`:n.image_url?"Change":"Upload"),1)]),_:2},1032,["onClick"]),n.image_url?(g(),_(l(y),{key:0,onClick:p[0]||(p[0]=i=>e.$emit("remove")),style:{"background-color":"#82868f !important","border-color":"#82868f !important",color:"white !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},{default:h(()=>[...p[2]||(p[2]=[b("Remove",-1)])]),_:1})):v("",!0)])]),_:1},8,["file-types"]))}},P={class:"flex h-[calc(100vh_-_8rem)]"},H={class:"flex flex-col p-2 w-52 shrink-0",style:{"background-color":"#4e60ac !important"}},J={class:"flex flex-col gap-2 mt-3 hover:cursor-pointer"},D={class:"flex items-center gap-2 px-2 py-1 rounded-md",style:{"background-color":"#7c8bca !important"}},G={class:"flex h-full flex-col gap-8 p-8",style:{"background-color":"#ffffff !important",color:"#82868f !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},q={class:"flex gap-2 text-xl font-semibold leading-none h-5",style:{color:"#4e60ac !important"}},X={key:0,class:"flex-1 flex flex-col gap-8 overflow-y-auto"},K={class:"flex w-full"},Q={class:"flex flex-col justify-between gap-4"},W={class:"flex flex-1 gap-5"},Y={class:"flex items-center justify-center rounded border border-outline-gray-modals px-10 py-2"},Z=["src"],ee={class:"flex flex-1 flex-col gap-2"},te={class:"flex flex-col justify-between gap-4"},se={class:"flex flex-1 gap-5"},ae={class:"flex items-center justify-center rounded border border-outline-gray-modals px-10 py-2"},oe=["src"],le={class:"flex flex-1 flex-col gap-2"},ie={class:"flex justify-between flex-row-reverse"},de={__name:"Settings",setup(n){z("base");const t=B(!0),{setting:e,setupBrand:p}=V();function r(){e.save.submit(null,{onSuccess:()=>{p()}})}return(o,s)=>(g(),_(l(O),{options:{size:"6xl"},modelValue:t.value,"onUpdate:modelValue":s[6]||(s[6]=i=>t.value=i),class:"my-custom-dialog-height"},{"body-main":h(()=>{var i,d,u,x;return[a("div",P,[a("div",H,[s[8]||(s[8]=a("h1",{class:"px-2 pt-2 mb-3 text-lg font-semibold",style:{color:"white !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},c("Settings"),-1)),a("ul",J,[a("li",D,[f(l(S),{name:"settings",class:"w-4 h-4",style:{color:"white !important"}}),s[7]||(s[7]=a("h1",{style:{color:"white !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},c("General"),-1))])])]),a("div",G,[a("h2",q,[s[9]||(s[9]=b(c("General")+" ",-1)),l(e).isDirty?(g(),_(l(E),{key:0,label:"Not Saved",variant:"subtle",theme:"orange"})):v("",!0)]),l(e).doc?(g(),w("div",X,[a("div",K,[f(l($),{type:"text",class:"w-1/2",modelValue:l(e).doc.brand_name,"onUpdate:modelValue":s[0]||(s[0]=m=>l(e).doc.brand_name=m),label:"Brand Name"},null,8,["modelValue"])]),a("div",Q,[s[11]||(s[11]=a("span",{class:"text-base font-semibold text-ink-gray-9"},c("Logo"),-1)),a("div",W,[a("div",Y,[a("img",{src:((i=l(e).doc)==null?void 0:i.brand_logo)||"/assets/ant_pos/antPOS.png",alt:"Logo",class:"size-8 rounded"},null,8,Z)]),a("div",ee,[f(k,{label:"Favicon",image_type:"image/ico",image_url:(d=l(e).doc)==null?void 0:d.brand_logo,onUpload:s[1]||(s[1]=m=>l(e).doc.brand_logo=m),onRemove:s[2]||(s[2]=()=>l(e).doc.brand_logo="")},null,8,["image_url"]),s[10]||(s[10]=a("span",{class:"text-p-sm text-ink-gray-6"}," Appears in the left sidebar. Recommended size is 32x32 px in PNG or SVG' ",-1))])])]),a("div",te,[s[13]||(s[13]=a("span",{class:"text-base font-semibold text-ink-gray-9"},c("Favicon"),-1)),a("div",se,[a("div",ae,[a("img",{src:((u=l(e).doc)==null?void 0:u.favicon)||"/assets/ant_pos/antPOS.png",alt:"Favicon",class:"size-8 rounded"},null,8,oe)]),a("div",le,[f(k,{label:"Favicon",image_type:"image/ico",image_url:(x=l(e).doc)==null?void 0:x.favicon,onUpload:s[3]||(s[3]=m=>l(e).doc.favicon=m),onRemove:s[4]||(s[4]=()=>l(e).doc.favicon="")},null,8,["image_url"]),s[12]||(s[12]=a("span",{class:"text-p-sm text-ink-gray-6"}," Appears next to the title in your browser tab. Recommended size is 32x32 px in PNG or ICO', ",-1))])])])])):v("",!0),a("div",ie,[f(l(y),{variant:"solid",label:"Update",onClick:r,style:{"background-color":"#4e60ac !important","border-color":"#4e60ac !important",color:"white !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}}),f(l(C),{message:l(e).save.error},null,8,["message"])])]),a("div",null,[f(l(y),{variant:"ghost",class:"absolute top-4 right-4",onClick:s[5]||(s[5]=m=>t.value=!1)},{default:h(()=>[f(l(S),{name:"x",class:"w-5 h-5 text-ink-gray-9"})]),_:1})])])]}),_:1},8,["modelValue"]))}};export{de as default};
//# sourceMappingURL=Settings-DuEvNgyg.js.map
