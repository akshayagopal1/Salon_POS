import{r as v,j as x,aK as y,e as k,ax as D,B as U,C as z,D as r,ag as d,E as o,u as s,aq as c,ar as b,aT as E}from"./index-BsfeXoGf.js";import{_ as i}from"./Pos-KCdXzYUv.js";const C={class:"bg-[#ffffff] text-[#82868f]",style:{"font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif","font-size":"17px"}},F={class:"space-y-3"},w={class:"flex justify-end gap-2 mt-4"},I={__name:"Attendance",setup(A){const p=v(!0),m=x({employees:[],companies:[],shifts:[]}),a=v({employee:{},status:{label:"Present",value:"Present"},date:new Date().toISOString().slice(0,10),company:{},shift:{},late_entry:0,early_exit:0}),V=[{label:"Present",value:"Present"},{label:"Absent",value:"Absent"},{label:"Half Day",value:"Half Day"},{label:"On Leave",value:"On Leave"},{label:"Work From Home",value:"Work From Home"}];function f(){p.value=!1}const _=y({url:"ant_pos.ant_pos.api.attendance.get_dropdown_data",method:"GET",onSuccess(t){var e,n,l;console.log("Dropdown data loaded:",t),t&&(m.employees=((e=t.employees)==null?void 0:e.map(u=>({label:u.employee_name,value:u.name})))||[],m.companies=((n=t.companies)==null?void 0:n.map(u=>({label:u.name,value:u.name})))||[],m.shifts=((l=t.shifts)==null?void 0:l.map(u=>({label:u.name,value:u.name})))||[])},onError(t){console.error("Failed to load dropdown data:",t)}}),S=y({url:"ant_pos.ant_pos.api.attendance.create_attendance",onSuccess(t){alert(`Attendance marked successfully! Document: ${t}`),f()},onError(t){console.error("Attendance submission failed:",t),alert(`Failed to mark attendance: ${t.message}`)}});function g(){var e,n,l;if(console.log("Form data before submission:",a.value),!((e=a.value.employee)!=null&&e.value)||!((n=a.value.status)!=null&&n.value)||!a.value.date){alert("Please fill all required fields.");return}const t={employee:a.value.employee.value,status:a.value.status.value,attendance_date:a.value.date,shift:((l=a.value.shift)==null?void 0:l.value)||null,late_entry:a.value.late_entry||0,early_exit:a.value.early_exit||0};console.log("Submission data:",t),S.submit({values:t})}return k(()=>{_.fetch()}),(t,e)=>{const n=D("Input");return z(),U(s(E),{options:{size:"lg"},modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=l=>p.value=l)},{"body-title":r(()=>[...e[8]||(e[8]=[d("h3",{class:"text-[#4e60ac]",style:{"font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif","font-size":"17px"}},"Mark Attendance",-1)])]),"body-content":r(()=>[d("div",C,[d("div",F,[o(s(i),{type:"autocomplete",options:m.employees,size:"sm",variant:"subtle",placeholder:"Select Employee",label:"Employee",modelValue:a.value.employee,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.employee=l)},null,8,["options","modelValue"]),o(s(i),{type:"autocomplete",options:V,size:"sm",variant:"subtle",placeholder:"Select Status",label:"Status",modelValue:a.value.status,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.status=l)},null,8,["modelValue"]),o(s(i),{type:"date",size:"sm",variant:"subtle",label:"Date",modelValue:a.value.date,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.date=l)},null,8,["modelValue"]),o(s(i),{type:"autocomplete",options:m.companies,size:"sm",variant:"subtle",placeholder:"Select Company",label:"Company",modelValue:a.value.company,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.company=l)},null,8,["options","modelValue"]),o(s(i),{type:"autocomplete",options:m.shifts,size:"sm",variant:"subtle",placeholder:"Select Shift (Optional)",label:"Shift",modelValue:a.value.shift,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.shift=l)},null,8,["options","modelValue"]),o(s(i),{label:"Late Entry (minutes)"},{default:r(()=>[o(n,{type:"number",min:"0",modelValue:a.value.late_entry,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.late_entry=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),o(s(i),{label:"Early Exit (minutes)"},{default:r(()=>[o(n,{type:"number",min:"0",modelValue:a.value.early_exit,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.early_exit=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1})]),d("div",w,[o(s(c),{variant:"ghost",onClick:f},{default:r(()=>[...e[9]||(e[9]=[b("Cancel",-1)])]),_:1}),o(s(c),{variant:"solid",onClick:g,style:{"background-color":"#4e60ac !important","border-color":"#4e60ac !important",color:"white !important","font-family":"'futura-pt', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important","font-size":"17px !important"}},{default:r(()=>[...e[10]||(e[10]=[b("Submit",-1)])]),_:1})])])]),_:1},8,["modelValue"])}}};export{I as default};
//# sourceMappingURL=Attendance-WY7T6c_y.js.map
